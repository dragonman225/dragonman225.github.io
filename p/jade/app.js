/*! For license information please see app.js.LICENSE.txt */
(()=>{var e,t={637:()=>{},369:()=>{},449:()=>{},822:()=>{},151:(e,t,n)=>{"use strict";var r=n(294),o=n(935),a=n(813);const i={colors:{bgCanvas:"var(--bg-canvas)",bgCanvasSemiTransparent:"var(--bg-canvas-semi-transparent)",bgBlock:"var(--bg-block)",bgHover:"var(--bg-hover)",bgActive:"var(--bg-active)",bgDangerHover:"var(--bg-danger-hover)",bgDangerActive:"var(--bg-danger-active)",contentText:"var(--content-text)",uiText:"var(--ui-text)",uiDanger:"var(--ui-danger)",uiPrimaryVeryLight:"hsla(165deg, 65%, 55%, 0.2)",uiPrimaryLight:"hsla(165deg, 65%, 55%, 0.8)",uiPrimary:"hsl(165deg, 65%, 55%)",uiPrimaryHarder:"hsl(42deg, 20%, 35%)",uiPrimaryAttractive:"hsl(165deg, 80%, 79%)",uiPrimaryAttractiveHover:"hsl(165deg, 80%, 74%)",uiPrimaryAttractiveActive:"hsl(165deg, 80%, 69%)",uiSecondaryDumb:"hsl(42deg, 8%, 75%)",neutral95:"var(--neutral-95)",neutral90:"var(--neutral-90)",neutral70:"var(--neutral-70)",neutral60:"var(--neutral-60)",neutral50:"var(--neutral-50)",neutral40:"var(--neutral-40)",neutral10:"var(--neutral-10)"},shadows:{focus:"var(--shadow-focus)",layer:"var(--shadow-layer)",float:"var(--shadow-float)"},borders:{largeRadius:".6rem",smallRadius:".3rem"},animations:{fadeIn:(0,a.F4)({"0%":{opacity:0},"100%":{opacity:1}})},easings:{easeInOutCubic:"cubic-bezier(0.65, 0, 0.35, 1)"},paddings:{blockComfort:".5rem 1.25rem",blockCompact:".35rem 1.25rem",navComfort:".5rem"},arrowSize:6,fonts:{monospace:"var(--font-monospace)"}};var c=(0,a.zE)({App:{overflow:"hidden",height:"100%",color:i.colors.contentText,background:i.colors.bgCanvas,transition:"background 0.3s ".concat(i.easings.easeInOutCubic)},"App--BlockMoving":{cursor:"grabbing"},"App--BlockResizing":{cursor:"ew-resize"},"App--DrawingRelation":{cursor:"crosshair"}});function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){return{x:e.x+t.x,y:e.y+t.y}}function u(e,t){return{x:e.x-t.x,y:e.y-t.y}}function f(e,t){return{x:e.x/t,y:e.y/t}}function m(e,t){var n=Math.pow(10,t);return{x:Math.floor(e.x*n)/n,y:Math.floor(e.y*n)/n}}function p(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}function y(e,t){return e.x>t.x&&e.x<t.x+t.w&&e.y>t.y&&e.y<t.y+t.h}function b(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function g(e,t){return n=e.x,r=e.y,o=e.w,a=e.h,i=t.x,c=t.y,l=t.w,s=t.h,n<i+l&&n+o>i&&r<c+s&&r+a>c;var n,r,o,a,i,c,l,s}function h(e,t,n,r){return{x:e<n?e:n,y:t<r?t:r,w:Math.abs(e-n),h:Math.abs(t-r)}}function v(e,t){return d(t.focus,f(e,t.scale))}function w(e){var t=Math.min.apply(Math,l(e.map((function(e){return e.x})))),n=Math.min.apply(Math,l(e.map((function(e){return e.y}))));return{x:t,y:n,w:Math.max.apply(Math,l(e.map((function(e){return e.x+e.w}))))-t,h:Math.max.apply(Math,l(e.map((function(e){return e.y+e.h}))))-n}}function x(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function k(e,t){return{x:e.x-t,y:e.y-t,w:e.w+2*t,h:e.h+2*t}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n){switch(n){case"top":return{x:e.x,y:Math.min(e.y-(e.y-t.y)/2,e.y-30)};case"bottom":return{x:e.x,y:Math.max(e.y-(e.y-t.y)/2,e.y+30)};case"left":return{x:Math.min(e.x-(e.x-t.x)/2,e.x-30),y:e.y};case"right":return{x:Math.max(e.x-(e.x-t.x)/2,e.x+30),y:e.y}}}function C(e){switch(e){case"top":return 90;case"bottom":return 270;case"left":return 0;default:return 180}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=(0,a.zE)({Arrow:{pointerEvents:"none",overflow:"visible"}});function P(e){var t,n,o,a,c,l=e.fromBox,s=e.toBox,d=e.viewBox,u=e.color,f=void 0===u?"#000":u,p=e.size,g=void 0===p?7:p,h=e.onMouseDown,v=S((n=s,o={padEnd:g},function(e,t,n,r,o,a,i,c,l){for(var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({padStart:0,padEnd:0},l),d={x:e,y:t,w:n,h:r},u={x:e+n/2,y:t-2*s.padStart},f={x:e+n/2,y:t+r+2*s.padStart},m={x:e-2*s.padStart,y:t+r/2},p={x:e+n+2*s.padStart,y:t+r/2},g={x:o,y:a,w:i,h:c},h={x:o+i/2,y:a-2*s.padEnd},v={x:o+i/2,y:a+c+2*s.padEnd},w={x:o-2*s.padEnd,y:a+c/2},x=["top","right","bottom","left"],S=[u,p,f,m],j=[h,{x:o+i+2*s.padEnd,y:a+c/2},v,w],I=1/0,P=u,B=h,A="top",z="top",R=0;R<x.length;R++){var M=S[R];if(!y(M,k(g,15)))for(var D=0;D<x.length;D++){var N=j[D];if(!y(N,k(d,15))){var L=b(M,N);L<I&&(I=L,P=M,B=N,A=x[R],z=x[D])}}}var H=T(P,B,A),F=T(B,P,z);return[P.x,P.y,H.x,H.y,F.x,F.y,B.x,B.y,C(z),C(A)]}((t=l).x,t.y,t.w,t.h,n.x,n.y,n.w,n.h,o)),9),w=v[0],x=v[1],j=v[2],P=v[3],B=v[4],A=v[5],z=v[6],R=v[7],M=v[8],D=[m({x:w,y:x},2),m({x:z,y:R},2),m({x:j,y:P},2),m({x:B,y:A},2),M],N=D[0],L=D[1],H=D[2],F=D[3],$=D[4],_=(a=d,2,c=Math.pow(10,2),{x:Math.floor(a.x*c)/c,y:Math.floor(a.y*c)/c,w:Math.floor(a.w*c)/c,h:Math.floor(a.h*c)/c}),V=S((0,r.useState)(!1),2),U=V[0],W=V[1];return r.createElement("svg",{className:I.Arrow,width:_.w,height:_.h,xmlns:"http://www.w3.org/2000/svg",onMouseDown:h,onContextMenu:function(e){return e.preventDefault()}},r.createElement("path",{d:"M ".concat(N.x-_.x," ").concat(N.y-_.y," C ").concat(H.x-_.x," ").concat(H.y-_.y,", ").concat(F.x-_.x," ").concat(F.y-_.y,", ").concat(L.x-_.x," ").concat(L.y-_.y),stroke:U?i.colors.uiPrimary:f,strokeWidth:g/2,fill:"none"}),r.createElement("polygon",{points:"0,".concat(-g," ").concat(2*g,",0, 0,").concat(g),transform:"translate(".concat(L.x-_.x,", ").concat(L.y-_.y,") rotate(").concat($,")"),fill:U?i.colors.uiPrimary:f}),r.createElement("path",{d:"M ".concat(N.x-_.x," ").concat(N.y-_.y," C ").concat(H.x-_.x," ").concat(H.y-_.y,", ").concat(F.x-_.x," ").concat(F.y-_.y,", ").concat(L.x-_.x," ").concat(L.y-_.y),stroke:"transparent",strokeWidth:2*g,fill:"none",pointerEvents:"visibleStroke",onMouseEnter:function(){return W(!0)},onMouseLeave:function(){return W(!1)}}))}var B=n(472),A=(0,a.oB)({display:"block",fill:"inherit",flexShrink:0,backfaceVisibility:"hidden"}),z=function(){return r.createElement("svg",{className:A,viewBox:"0 0 24 24",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{fill:"none",height:"24",width:"24"}),r.createElement("path",{d:"M9,6L9,6c0,0.56,0.45,1,1,1h5.59L4.7,17.89c-0.39,0.39-0.39,1.02,0,1.41h0c0.39,0.39,1.02,0.39,1.41,0L17,8.41V14 c0,0.55,0.45,1,1,1H18c0.55,0,1-0.45,1-1V6c0-0.55-0.45-1-1-1H10C9.45,5,9,5.45,9,6z"}))},R=r.memo((function(){return r.createElement("svg",{className:A,width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{fill:"none",height:"24",width:"24"}),r.createElement("path",{d:"M21,8.59V4c0-0.55-0.45-1-1-1h-4.59c-0.89,0-1.34,1.08-0.71,1.71l1.59,1.59l-10,10l-1.59-1.59C4.08,14.08,3,14.52,3,15.41 V20c0,0.55,0.45,1,1,1h4.59c0.89,0,1.34-1.08,0.71-1.71l-1.59-1.59l10-10l1.59,1.59C19.92,9.92,21,9.48,21,8.59z"}))})),M=n(586);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N,L,H,F=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),D(this,"camera",void 0),D(this,"blockInfoMap",void 0),D(this,"setElement",(function(e,n){t.blockInfoMap.set(e,{alive:!0,cachedEnvRect:void 0,el:n})})),D(this,"detachElement",(function(e){var n=t.blockInfoMap.get(e);n&&t.blockInfoMap.set(e,{alive:!1,cachedEnvRect:n.cachedEnvRect,el:void 0})})),D(this,"getRect",(function(e){var n,r,o,a,i=t.blockInfoMap.get(e);if(i){if(i.el){var c=(n=i.el.getBoundingClientRect(),r=t.camera,o=v({x:n.x,y:n.y},r),{x:(a={x:o.x,y:o.y,width:n.width/r.scale,height:n.height/r.scale}).x,y:a.y,width:a.width,height:a.height,top:a.y,right:a.x+a.width,bottom:a.y+a.height,left:a.x});return t.blockInfoMap.set(e,{alive:!0,cachedEnvRect:c,el:i.el}),c}return i.cachedEnvRect}})),D(this,"updateCamera",(function(e){t.camera=e})),D(this,"clear",(function(){t.blockInfoMap.clear()})),D(this,"deleteBlocks",(function(e){e.forEach((function(e){t.blockInfoMap.delete(e)}))})),this.blockInfoMap=new Map};!function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.PinnedTL=2]="PinnedTL",e[e.PinnedTR=3]="PinnedTR",e[e.PinnedBL=4]="PinnedBL",e[e.PinnedBR=5]="PinnedBR"}(N||(N={})),function(e){e[e.Idle=0]="Idle",e[e.Moving=1]="Moving",e[e.Resizing=2]="Resizing",e[e.Focusing=3]="Focusing"}(L||(L={})),function(e){e.BackgroundRed="background-red",e.BackgroundOrange="background-orange",e.BackgroundYellow="background-yellow",e.BackgroundGreen="background-green",e.BackgroundBlue="background-blue",e.BackgroundPurple="background-purple",e.BackgroundPink="background-pink",e.BackgroundBrown="background-brown",e.BackgroundGrey="background-grey"}(H||(H={}));var $,_,V,U=function(e){return e.references.length>0};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){return K({id:(0,M.Z)(),createdTime:Date.now(),lastEditedTime:Date.now()},e)}function Y(e,t){return{id:e.id,posType:e.posType,pos:e.pos,size:e.size,zIndex:t,color:e.color,createdTime:e.createdTime,lastEditedTime:e.lastEditedTime,mode:L.Idle,selected:!1,highlighted:!1,conceptId:e.to}}function q(e,t){var n=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};return K(K(K({},e),t),{},{lastEditedTime:n(t,"pos")||n(t,"posType")||n(t,"size")?Date.now():e.lastEditedTime})}function X(e){return e.posType===N.Normal}function Z(e,t){var n,r=(n=t,function(e){var t=F.getRect(e.id);return!!t&&g(n,{x:t.x,y:t.y,w:t.width,h:t.height})});return e.filter(X).filter(r).map((function(e){return e.id}))}function Q(e,t){return e.find((function(e){return t===e.id}))}function ee(e){var t=F.getRect(e.id)||{width:0,height:0};return K(K({},e.pos),{},{w:t.width,h:t.height})}function te(e){return e.map((function(e){return q(e,{selected:!1})}))}function ne(e,t){var n=x({x:e.pos.x,y:e.pos.y,w:"auto"===e.size.w?300:e.size.w,h:"auto"===e.size.h?350:e.size.h}),r=window.innerWidth,o=window.innerHeight;return n&&{x:n.x-r/2/t,y:n.y-o/2/t}}n(822),function(e){e[e.InferFromPointer=0]="InferFromPointer",e[e.Relation=1]="Relation"}($||($={})),n(637),n(369),n(449),function(e){e.Concept="concept",e.Block="block",e.View="view"}(_||(_={}));var re={$nest:(V={},J(V,'&[data-color="'.concat(H.BackgroundRed,'"]'),{background:"var(--bg-red)"}),J(V,'&[data-color="'.concat(H.BackgroundOrange,'"]'),{background:"var(--bg-orange)"}),J(V,'&[data-color="'.concat(H.BackgroundYellow,'"]'),{background:"var(--bg-yellow)"}),J(V,'&[data-color="'.concat(H.BackgroundGreen,'"]'),{background:"var(--bg-green)"}),J(V,'&[data-color="'.concat(H.BackgroundBlue,'"]'),{background:"var(--bg-blue)"}),J(V,'&[data-color="'.concat(H.BackgroundPurple,'"]'),{background:"var(--bg-purple)"}),J(V,'&[data-color="'.concat(H.BackgroundPink,'"]'),{background:"var(--bg-pink)"}),J(V,'&[data-color="'.concat(H.BackgroundBrown,'"]'),{background:"var(--bg-brown)"}),J(V,'&[data-color="'.concat(H.BackgroundGrey,'"]'),{background:"var(--bg-grey)"}),V)};function oe(e,t,n){for(var r={},o=t.length-e.length,a=t.filter((function(t){return e.includes(t.id)})).sort((function(e,t){return e.zIndex-t.zIndex})),i=0;i<a.length;i++){var c=a[i],l=K(K({},c),{},{zIndex:o+i});r[c.id]=n?n(l):l}for(var s=t.filter((function(t){return!e.includes(t.id)})).sort((function(e,t){return e.zIndex-t.zIndex})),d=0;d<s.length;d++){var u=s[d];r[u.id]=K(K({},u),{},{zIndex:d})}return t.map((function(e){return r[e.id]}))}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le,se,de=18,ue=(0,a.zE)({actionButton:{transition:"0.1s opacity ".concat(i.easings.easeInOutCubic,", 30ms fill ").concat(i.easings.easeInOutCubic),fill:i.colors.neutral60,cursor:"pointer",borderRadius:i.borders.smallRadius,$nest:{"&:hover":{fill:i.colors.neutral40,background:i.colors.bgHover},"&:active":{fill:i.colors.neutral10,background:i.colors.bgActive}}},blink:{position:"absolute",top:0,left:0,width:4,height:4,margin:8,borderRadius:"100%",background:i.colors.uiPrimary,transition:"0.1s opacity ".concat(i.easings.easeInOutCubic)}}),fe=ie(ie({},(0,a.zE)({block:{color:i.colors.contentText,background:i.colors.bgBlock,borderRadius:i.borders.smallRadius,overflow:"hidden",position:"relative",transition:"opacity 0.2s ".concat(i.easings.easeInOutCubic,",\nbox-shadow 0.2s ").concat(i.easings.easeInOutCubic,",\nbackground 0.2s ").concat(i.easings.easeInOutCubic),$nest:ie(ie({},re.$nest),{},{"&:hover":{cursor:"pointer"}})},fillParentHeight:{height:"100%"},selected:{boxShadow:"0px 0px 1px 2px ".concat(i.colors.uiPrimary)},focusing:{boxShadow:i.shadows.focus,$nest:{"&:hover":{cursor:"auto"}}},moving:{opacity:.4,$nest:{"&:hover":{cursor:"grabbing"}}},widthResizer:{position:"absolute",top:20,bottom:0,right:0,width:14,cursor:"ew-resize"},heightResizer:{position:"absolute",left:20,right:20,bottom:0,height:14,cursor:"ns-resize"},widthHeightResizer:{position:"absolute",bottom:0,right:0,width:de,height:de,cursor:"nwse-resize"},open:{position:"absolute",top:0,left:0,width:de,height:de,padding:2},arrow:{position:"absolute",top:0,right:0,width:de,height:de,padding:1},highlightOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:i.colors.uiPrimaryVeryLight,overflow:"hidden",animation:"".concat(i.animations.fadeIn," 33ms ").concat(i.easings.easeInOutCubic)}})),ue),me=function(e){return e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:e.touches.length?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:0,y:0}};function pe(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}):""}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e){var t,n,o=e.id,i=e.conceptId,c=e.color,l=e.mode,s=e.selected,d=e.highlighted,f=e.blink,m=e.allowResizeWidth,p=void 0===m||m,y=e.allowResizeHeight,b=void 0!==y&&y,g=e.dispatchAction,h=e.className,v=e.children,w=(0,r.useRef)(null),x=(0,r.useRef)(null),k=(0,r.useRef)(null),E=(0,r.useRef)(null),O=(0,r.useRef)(null),T=(0,r.useRef)(l),C=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=C[0],j=C[1];(0,r.useEffect)((function(){return F.setElement(o,w.current),function(){return F.detachElement(o)}}),[o]),(0,r.useEffect)((function(){T.current=l}),[l]),(0,r.useEffect)((function(){var e,t,n,r,a=(e="",t={x:0,y:0},n=function(n){var r=me(n),a=u(r,t);t=r,e.startsWith("resize")?(g({type:le.BlockResizeDelta,data:{id:o,movementInViewportCoords:{x:"resizeW"===e||"resizeWH"===e?a.x:0,y:"resizeH"===e||"resizeWH"===e?a.y:0}}}),g({type:le.BlockSetMode,data:{id:o,mode:L.Resizing}})):"move"===e?(g({type:le.BlockMove,data:{id:o,pointerInViewportCoords:r}}),g({type:le.BlockSetMode,data:{id:o,mode:L.Moving}})):"drawArrow"===e&&g({type:le.RelationDrawMove,data:{id:o,pointerInViewportCoords:r}})},r=function r(a){a instanceof MouseEvent&&0!==a.button||(window.removeEventListener("mousemove",n),window.removeEventListener("touchmove",n),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r),"drawArrow"===e&&g({type:le.RelationDrawEnd,data:{id:o,pointerInViewportCoords:t}}),e="",T.current===L.Moving&&g({type:le.BlockMoveEnd}),T.current!==L.Moving&&T.current!==L.Resizing||g({type:le.BlockSetMode,data:{id:o,mode:L.Idle}}))},{handlePointerDown:function(a){var i=me(a);if(t=i,a instanceof MouseEvent&&0!==a.button)return T.current!==L.Focusing&&a.preventDefault(),void(2===a.button&&T.current===L.Idle&&g({type:le.ContextMenuOpen,data:{contextType:$.InferFromPointer,pointerInViewportCoords:i}}));var c=x.current,l=k.current,s=E.current,d=O.current;c&&c.contains(a.target)?e="resizeW":l&&l.contains(a.target)?e="resizeH":s&&s.contains(a.target)?e="resizeWH":d&&d.contains(a.target)?(e="drawArrow",g({type:le.RelationDrawStart,data:{id:o,pointerInViewportCoords:i}})):T.current!==L.Focusing&&(e="move",g({type:le.BlockMoveStart,data:{id:o,pointerInViewportCoords:i}})),window.addEventListener("mousemove",n),window.addEventListener("touchmove",n),window.addEventListener("mouseup",r),window.addEventListener("touchend",r)}});function i(e){T.current!==L.Focusing&&e.preventDefault()}var c=w.current;return c.addEventListener("mousedown",a.handlePointerDown),c.addEventListener("touchstart",a.handlePointerDown),c.addEventListener("contextmenu",i),function(){c.removeEventListener("mousedown",a.handlePointerDown),c.removeEventListener("touchstart",a.handlePointerDown),c.removeEventListener("contextmenu",i)}}),[o,g]);var I=(0,r.useMemo)((function(){return(0,a.Sh)(h,fe.block,b&&fe.fillParentHeight,s&&fe.selected,l===L.Focusing&&fe.focusing,l===L.Moving&&fe.moving)}),[l,s,b,h]),P=(0,r.useCallback)((function(){return j(!0)}),[]),B=(0,r.useCallback)((function(){return j(!1)}),[]),A=(0,r.useCallback)((function(){g({type:le.BlockOpenAsCanvas,data:{id:i}})}),[i,g]);return r.createElement("div",{ref:w,className:I,"data-color":c,onMouseEnter:P,onMouseLeave:B},v,p&&r.createElement("div",{ref:x,className:fe.widthResizer}),b&&r.createElement("div",{ref:k,className:fe.heightResizer}),p&&b&&r.createElement("div",{ref:E,className:fe.widthHeightResizer}),!S&&f&&r.createElement("div",{className:fe.blink}),(l===L.Idle||l===L.Focusing)&&S&&r.createElement(r.Fragment,null,r.createElement("div",{className:(0,a.Sh)(fe.actionButton,fe.open),onClick:A},r.createElement(R,null)),r.createElement("div",{ref:O,className:(0,a.Sh)(fe.actionButton,fe.arrow)},r.createElement(z,null))),d&&r.createElement("div",{className:fe.highlightOverlay}))}!function(e){e.ConceptCreate="concept::create",e.ConceptWriteData="concept::writeData",e.BlockCreate="block::create",e.BlockRemove="block::remove",e.BlockMoveStart="block::moveStart",e.BlockMove="block::move",e.BlockMoveEnd="block::moveEnd",e.BlockResizeDelta="block::resizeDelta",e.BlockSetMode="block::setMode",e.BlockSetColor="block::setColor",e.BlockSetSize="block::setSize",e.BlockSelect="block::select",e.BlockDeselect="block::deselect",e.BlockDeselectAll="block::deselectAll",e.BlockOpenAsCanvas="block::openAsCanvas",e.CameraMoveDelta="camera::moveDelta",e.CameraScaleDelta="camera::scaleDelta",e.CameraSetValue="camera::setValue",e.SelectionBoxSetStart="selectionBox::setStart",e.SelectionBoxSetEnd="selectionBox::setEnd",e.SelectionBoxClear="selectionBox::clear",e.RelationDrawStart="relation::drawStart",e.RelationDrawMove="relation::drawMove",e.RelationDrawEnd="relation::drawEnd",e.RelationRemove="relation::remove",e.DebuggingToggle="debugging::toggle",e.Undo="undo",e.BlocksRendered="blocksRendered",e.ContextMenuOpen="contextMenu::open",e.ContextMenuClose="contextMenu::close"}(le||(le={})),function(e){e.ExactAt="exactAt",e.Below="below",e.Above="above",e.LeftOf="leftOf",e.RightOf="rightOf"}(se||(se={}));var ge=(0,r.createContext)(void 0);function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=r.memo((function(e){var t,n,o=e.block,c=(0,r.useContext)(ge),l=c.db,s=c.factoryRegistry,d=c.dispatchAction,u=c.createOverlay,f=(t=(0,r.useState)((function(){return l.getConcept(o.conceptId)})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],p=f[1];(0,r.useEffect)((function(){function e(){p(l.getConcept(m.id))}return l.subscribeConcept(m.id,e),function(){l.unsubscribeConcept(m.id,e)}}),[m.id,l]);var y=(0,r.useCallback)((function(e){d({type:le.BlockSetMode,data:{id:o.id,mode:e}})}),[o.id,d]),b=(0,r.useCallback)((function(e){d({type:le.ConceptWriteData,data:{id:m.id,type:m.summary.type,content:e}})}),[m.id,m.summary.type,d]),g=(0,r.useCallback)((function(e){d({type:le.ConceptWriteData,data:{id:m.id,type:e,content:{initialized:!1}}})}),[m.id,d]),h=(0,r.useCallback)((function(){y(L.Focusing)}),[y]),v=(0,r.useCallback)((function(){y(L.Idle)}),[y]),w=(0,r.useMemo)((function(){return o.posType>N.Normal?(0,a.oB)({boxShadow:i.shadows.layer,borderRadius:i.borders.largeRadius,background:i.colors.bgCanvasSemiTransparent,backdropFilter:"saturate(180%) blur(30px)"}):void 0}),[o.posType]);return r.createElement(be,{id:o.id,conceptId:m.id,color:o.color,mode:o.mode,selected:o.selected,highlighted:o.highlighted,blink:U(m),allowResizeWidth:"auto"!==o.size.w,allowResizeHeight:"auto"!==o.size.h,dispatchAction:d,className:w},s.createConceptDisplay(m.summary.type,{readOnly:o.mode===L.Moving,viewMode:"Block",concept:m,blockId:o.id,dispatchAction:d,factoryRegistry:s,database:l,onChange:b,onReplace:g,onInteractionStart:h,onInteractionEnd:v,createOverlay:u}))}));function we(e){var t=e.posType,n=e.pos,o=e.size,a=e.zIndex,i=e.animatedOpacity,c=e.children,l=void 0===a?"auto":a;switch(t){case N.PinnedTR:return r.createElement("div",{style:{width:o.w,height:o.h,position:"absolute",top:0,right:0,zIndex:l,transformOrigin:"top right",transform:"translate3d(".concat(-n.x,"px, ").concat(n.y,"px, 0px)")}},c);case N.PinnedBL:return r.createElement("div",{style:{width:o.w,height:o.h,position:"absolute",bottom:0,left:0,zIndex:l,transformOrigin:"bottom left",transform:"translate3d(".concat(n.x,"px, ").concat(-n.y,"px, 0px)")}},c);case N.PinnedBR:return r.createElement("div",{style:{width:o.w,height:o.h,position:"absolute",bottom:0,right:0,zIndex:l,transformOrigin:"bottom right",transform:"translate3d(".concat(-n.x,"px, ").concat(-n.y,"px, 0px)")}},c);default:return r.createElement(B.q.div,{style:{width:o.w,height:o.h,position:"absolute",top:0,left:0,zIndex:l,transformOrigin:"top left",transform:"translate3d(".concat(n.x,"px, ").concat(n.y,"px, 0px)"),opacity:i||1}},c)}}function xe(e){var t=e.blocks,n=e.onRender,o=(0,B.useTransition)(t,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},keys:t.map((function(e){return"vo-b-".concat(e.id)}))});return(0,r.useEffect)((function(){n&&n()}),[]),r.createElement(r.Fragment,null,o((function(e,t){var n=e.opacity;return r.createElement(we,{key:"vo-b-".concat(t.id),posType:t.posType,pos:t.pos,size:t.size,zIndex:t.zIndex,animatedOpacity:n},r.createElement(ve,{block:t}))})))}var ke=(0,a.zE)({canvasInteractionDetector:{position:"absolute",top:0,right:0,bottom:0,left:0}});function Ee(e){var t=e.dispatchAction,n=e.children,o=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=function(e){e.ctrlKey?(e.preventDefault(),t({type:le.CameraScaleDelta,data:{focus:{x:e.clientX,y:e.clientY},wheelDelta:e.deltaY}})):t({type:le.CameraMoveDelta,data:{x:-e.deltaX,y:-e.deltaY}})},n=function(e){if(e.target===o.current){var n={x:e.clientX,y:e.clientY};t({type:le.ConceptCreate,data:{posType:N.Normal,intent:se.ExactAt,pointerInViewportCoords:n}})}},r=function(){var e=!1,n=!1,r={x:0,y:0};function a(){e=!1,n&&(t({type:le.SelectionBoxClear}),n=!1),window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a)}return{handlePointerDown:function(i){var c=me(i);i instanceof MouseEvent?0===i.button?i.target===o.current&&(t({type:le.SelectionBoxSetStart,data:c}),n=!0):1===i.button&&(e=!0):i.target===o.current&&2===i.touches.length&&(e=!0),r=c,window.addEventListener("mouseup",a),window.addEventListener("touchend",a)},handlePointerMove:function(o){var a=me(o);if(e){var i=u(a,r);t({type:le.CameraMoveDelta,data:i})}else n&&t({type:le.SelectionBoxSetEnd,data:a});r=a},handleKeydown:function(e){e.altKey&&"n"===e.key?t({type:le.ConceptCreate,data:{posType:N.Normal,intent:se.ExactAt,pointerInViewportCoords:r}}):"Delete"===e.key&&t({type:le.BlockRemove,data:{}})}}}(),a=o.current;return a.addEventListener("wheel",e),a.addEventListener("dblclick",n),a.addEventListener("mousedown",r.handlePointerDown),a.addEventListener("touchstart",r.handlePointerDown),window.addEventListener("keydown",r.handleKeydown),window.addEventListener("mousemove",r.handlePointerMove),window.addEventListener("touchmove",r.handlePointerMove),function(){a.removeEventListener("wheel",e),a.removeEventListener("dblclick",n),a.removeEventListener("mousedown",r.handlePointerDown),a.removeEventListener("touchstart",r.handlePointerDown),window.removeEventListener("keydown",r.handleKeydown),window.removeEventListener("mousemove",r.handlePointerMove),window.removeEventListener("touchmove",r.handlePointerMove)}}),[t]),r.createElement("div",{ref:o,className:ke.canvasInteractionDetector},n)}function Oe(e){return r.createElement("div",null,e.children)}var Te=(0,a.zE)({SelectionBox:{border:"2px solid ".concat(i.colors.uiPrimaryLight),borderRadius:i.borders.smallRadius,background:i.colors.uiPrimaryVeryLight}});function Ce(e){var t=e.style;return r.createElement("div",{className:Te.SelectionBox,style:t})}function Se(e){var t=e.focus,n=e.scale,o=e.selecting,a=e.selectionBox,i=e.shouldAnimate,c=e.children,l="translate3d(".concat(-t.x*n,"px, ").concat(-t.y*n,"px, 0px) scale(").concat(n,")"),s=(0,B.useSpring)({transform:l,config:{frequency:.3,damping:1}});return r.createElement(B.q.div,{style:{width:0,height:0,transformOrigin:"top left",transform:i?s.transform:l}},c,o&&r.createElement(Ce,{key:"SelectionBox",style:{width:a.w,height:a.h,position:"absolute",transformOrigin:"top left",transform:"translate3d(".concat(a.x,"px, ").concat(a.y,"px, 0px)"),zIndex:99999999}}))}function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ie=(0,a.zE)({Overlay:{position:"absolute",top:0,bottom:0,left:0,right:0,pointerEvents:"none"},OverlayChildren:{width:0,height:0,pointerEvents:"auto"}}),Pe=r.forwardRef((function(e,t){var n=e.children,o=e.className,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["children","className"]);return r.createElement("div",je({className:(0,a.Sh)(Ie.Overlay,o)},i),r.createElement("div",{className:Ie.OverlayChildren,ref:t},n))}));function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e){var t=e.near,n=e.children,o=(0,r.useRef)(null),a=Re((0,r.useState)(!1),2),i=a[0],c=a[1],l=Re((0,r.useState)({top:0,left:0}),2),s=l[0],d=l[1];return(0,r.useEffect)((function(){var e=window.innerWidth,n=window.innerHeight,r=o.current.getBoundingClientRect(),a=t.bottom+r.height>n?{bottom:n-t.top}:{top:t.bottom},i=t.right+r.width>e?{right:e-t.right}:{left:t.right};d(Ae(Ae({},a),i)),c(!0)}),[t]),r.createElement("div",{ref:o,style:Ae(Ae({position:"absolute"},s),{},{visibility:i?"visible":"hidden"})},n)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe={outline:"none",border:"none",borderRadius:i.borders.smallRadius,padding:".3rem .5rem",fontSize:".875rem",lineHeight:"1.25rem",transition:"background 30ms ease-in-out",cursor:"pointer"},$e=Le(Le({},Fe),{},{color:i.colors.uiText,background:"transparent",$nest:{"&:hover":{background:i.colors.bgHover},"&:active":{background:i.colors.bgActive}}}),_e=Le(Le({},Fe),{},{color:i.colors.neutral90,background:"rgba(25, 25, 24, 0.75)",$nest:{"&:hover":{background:"rgba(25, 25, 24, 0.85)"},"&:active":{background:"rgba(25, 25, 24, 0.95)"}}}),Ve=Le(Le({},Fe),{},{color:i.colors.uiText,background:i.colors.uiPrimaryAttractive,$nest:{"&:hover":{background:i.colors.uiPrimaryAttractiveHover},"&:active":{background:i.colors.uiPrimaryAttractiveActive}}}),Ue={outline:"none",border:"none",borderRadius:i.borders.smallRadius,padding:".3rem .5rem",background:i.colors.neutral95,lineHeight:"normal"},We=Le(Le({},Ue),{},{background:"transparent"}),Ke={padding:i.paddings.navComfort,fontSize:".8rem"},Je={padding:".3rem",color:i.colors.contentText,background:i.colors.bgBlock,boxShadow:i.shadows.float,borderRadius:i.borders.smallRadius,animation:"".concat(i.animations.fadeIn," 200ms ").concat(i.easings.easeInOutCubic)},Ge={padding:".3rem .5rem",fontSize:".7rem",color:i.colors.neutral50},Ye=Le(Le({},$e),{},{color:i.colors.contentText,width:"100%",padding:".3rem .5rem",fontSize:".875rem",textAlign:"left",borderRadius:i.borders.smallRadius,cursor:"pointer"});function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qe=1.75,et={height:"".concat(Qe,"rem"),fontSize:"0.9rem",outline:"none",border:"none",borderRadius:i.borders.smallRadius,color:i.colors.contentText,background:i.colors.bgBlock,cursor:"pointer",transition:"background 30ms ".concat(i.easings.easeInOutCubic),$nest:{"&:hover":{background:i.colors.bgHover},"&:active":{background:i.colors.bgActive}}},tt=(0,a.zE)({ContextMenu:Xe(Xe({},Je),{},{width:"calc(".concat(Qe,"rem * 6 + 1.1rem)")}),Title:Xe({},Ge),TileButtonGroup:{padding:".3rem .25rem"},TileButton:Xe(Xe({},et),{},{padding:".25rem",width:"".concat(Qe,"rem")}),ListButton:Xe({},Ye),ColorTile:{width:"100%",height:"100%",background:i.colors.bgBlock,borderRadius:i.borders.smallRadius,$nest:Xe(Ze({},'&[data-color="default"]',{border:"1px solid ".concat(i.colors.neutral90)}),re.$nest)},Danger:{color:i.colors.uiDanger,$nest:{"&:hover":{background:i.colors.bgDangerHover},"&:active":{background:i.colors.bgDangerActive}}},InfoLines:{fontSize:"0.68rem",padding:".3rem .5rem"}}),nt=(0,a.zE)({InfoLine:{$nest:{"&, & > *":{userSelect:"text"}}},Label:{color:i.colors.neutral40},Value:{color:i.colors.contentText}});function rt(e){var t=e.label,n=e.value;return r.createElement("div",{className:nt.InfoLine},r.createElement("span",{className:nt.Label},t)," ",r.createElement("span",{className:nt.Value},n))}var ot=(0,a.zE)({section:{$nest:{"&:not(:first-of-type)":{marginTop:"0.3rem"}}}});function at(e){var t=e.children;return r.createElement("div",{className:ot.section},t)}function it(e){var t=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(r,"px"),n.setAttribute("readonly",""),n.value=e,n}(e);document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),t.remove()}function ct(e){return"jade://v1/concept/".concat(e.id)}function lt(e){var t=e.split("/"),n=t.findIndex((function(e){return"concept"===e}));return{conceptId:t[n+1],blockId:t[n+2]}}function st(e){return e.startsWith("jade://")}var dt,ut=r.forwardRef((function(e,t){var n=e.context,o=n.block,i=n.parentConcept,c=n.linkedConcept,l=(0,r.useContext)(ge).dispatchAction,s=(0,r.useCallback)((function(e){l({type:le.BlockSetColor,data:{id:o.id,color:e}})}),[o.id,l]),d=(0,r.useCallback)((function(){l({type:le.BlockRemove,data:{id:o.id}}),l({type:le.ContextMenuClose})}),[o.id,l]),u=(0,r.useCallback)((function(){var e=ne(o,1);e&&l({type:le.CameraSetValue,data:{focus:e,scale:1}}),l({type:le.ContextMenuClose})}),[o,l]),f=(0,r.useCallback)((function(){it(function(e,t){return"jade://v1/concept/".concat(e.id,"/").concat(t.id)}(i,o)),l({type:le.ContextMenuClose})}),[o,i,l]),m=(0,r.useMemo)((function(){return[{title:"Delete block",perform:d},{title:"Focus block",perform:u},{title:"Copy link",perform:f}]}),[u,f,d]);return r.createElement("div",{ref:t,className:tt.ContextMenu},r.createElement(at,null,r.createElement("div",{className:tt.Title},"BACKGROUND"),r.createElement("div",{className:tt.TileButtonGroup},r.createElement("button",{key:"default",className:tt.TileButton,onClick:function(){return s(void 0)}},r.createElement("div",{className:tt.ColorTile,"data-color":"default"})),Object.values(H).map((function(e){return r.createElement("button",{key:e,className:tt.TileButton,onClick:function(){return s(e)}},r.createElement("div",{className:tt.ColorTile,"data-color":e}))})))),r.createElement(at,null,r.createElement("div",{className:tt.Title},"ACTION"),m.map((function(e){return r.createElement("button",{key:e.title,className:(0,a.Sh)(tt.ListButton,e.danger&&tt.Danger),onClick:e.perform},e.title)}))),r.createElement(at,null,r.createElement("div",{className:tt.Title},"INFO"),r.createElement("div",{className:tt.InfoLines},r.createElement(rt,{label:"Created",value:pe(c.createdTime)}),r.createElement(rt,{label:"Updated",value:pe(c.lastEditedTime)}))))})),ft=r.forwardRef((function(e,t){var n=e.context,o=n.relation,i=n.fromBlock,c=n.toBlock,l=(0,r.useContext)(ge).dispatchAction,s=(0,r.useCallback)((function(){l({type:le.RelationRemove,data:{id:o.id}}),l({type:le.ContextMenuClose})}),[o.id,l]),d=(0,r.useCallback)((function(){var e,t,n,r=(1,e=x(k(w([ee(i),ee(c)]),10)),t=window.innerWidth,n=window.innerHeight,{x:e.x-t/2/1,y:e.y-n/2/1});l({type:le.CameraSetValue,data:{focus:r,scale:1}}),l({type:le.ContextMenuClose})}),[i,c,l]),u=(0,r.useCallback)((function(){console.log(o),l({type:le.ContextMenuClose})}),[o,l]),f=(0,r.useMemo)((function(){return[{title:"Delete arrow",perform:s},{title:"Focus arrow",perform:d},{title:"Copy link",perform:u}]}),[s,d,u]);return r.createElement("div",{ref:t,className:tt.ContextMenu},r.createElement(at,null,r.createElement("div",{className:tt.Title},"ACTION"),f.map((function(e){return r.createElement("button",{key:e.title,className:(0,a.Sh)(tt.ListButton,e.danger&&tt.Danger),onClick:e.perform},e.title)}))),r.createElement(at,null,r.createElement("div",{className:tt.Title},"INFO"),r.createElement("div",{className:tt.InfoLines},r.createElement(rt,{label:"ID",value:o.id}),r.createElement(rt,{label:"Type",value:o.type}))))}));!function(e){e[e.Block=0]="Block",e[e.Relation=1]="Relation"}(dt||(dt={}));var mt,pt=(0,r.createContext)(void 0);function yt(e,t){var n=e.contextMenuState;switch(n.data.contextType){case $.InferFromPointer:return function(e,t){var n=e.contextMenuState,r=e.camera,o=e.blocks,a=e.viewingConcept,i=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.length-1;r>=0;r--){var o=t[r],a=F.getRect(o.id);if(a&&!n.includes(o.id)&&p(e,a))return o}}(v(n.pos,r),o);return i&&{type:dt.Block,block:i,parentConcept:a,linkedConcept:t.db.getConcept(i.conceptId)}}(e,t);case $.Relation:return function(e,t){var n=e.viewingConcept,r=e.blocks,o=n.relations.find((function(e){return t===e.id}));if(o){var a=r.find((function(e){return o.fromId===e.id})),i=r.find((function(e){return o.toId===e.id}));return a&&i&&{type:dt.Relation,relation:o,fromBlock:a,toBlock:i}}}(e,n.data.relationId)}}function bt(){var e=(0,r.useContext)(pt),t=(0,r.useContext)(ge),n=t.dispatchAction,o=(0,r.useRef)(null),a=yt(e,t);if((0,r.useEffect)((function(){function e(){n({type:le.ContextMenuClose})}function t(t){o.current.contains(t.target)||e()}return window.addEventListener("mousedown",t),window.addEventListener("touchstart",t),window.addEventListener("resize",e),function(){window.removeEventListener("mousedown",t),window.removeEventListener("touchstart",t),window.removeEventListener("resize",e)}}),[n]),!a)return r.createElement("div",{className:tt.ContextMenu},r.createElement("div",{className:tt.Title},"Something is wrong. Cannot find entities to operate on."));switch(a.type){case dt.Block:return r.createElement(ut,{ref:o,context:a});case dt.Relation:return r.createElement(ft,{ref:o,context:a})}}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ht({id:(0,M.Z)(),summary:{type:e,data:{}},references:[],relations:[],drawing:[],camera:{focus:{x:0,y:0},scale:1},createdTime:Date.now(),lastEditedTime:Date.now()},t)}function xt(e,t){return ht(ht(ht({},e),t),{},{lastEditedTime:Object.prototype.hasOwnProperty.call(t,"summary")?Date.now():e.lastEditedTime})}function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t){var n=t.map((function(e){return e.id}));return e.filter((function(e){return n.includes(e.fromId)&&n.includes(e.toId)}))}function Ct(e,t,n){for(var r={value:e,guideline:void 0},o=0;o<t.length;o+=1){var a=t[o],i=Math.abs(e-a.valueOf());i<n&&(n=i,r={value:a.valueOf(),guideline:a})}return r}function St(e,t,n){for(var r=[],o=[],a=function(a){var i=t[a],c={x:i.x-n,y:i.y-n,w:i.w+2*n,h:i.h+2*n};g(e,c)&&(r.push({valueOf:function(){return i.y},fromSide:mt.Top},{valueOf:function(){return i.y+i.h},fromSide:mt.Bottom}),o.push({valueOf:function(){return i.x},fromSide:mt.Left},{valueOf:function(){return i.x+i.w},fromSide:mt.Right}))},i=0;i<t.length;i+=1)a(i);return{horizontalGuidelines:r,verticalGuidelines:o}}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e,t,n){function r(e,t){if(!n)return Y(e,t);var r=n.find((function(t){return t.id===e.id}));return r?(r.conceptId=e.to,r.posType=e.posType,r.pos=e.pos,r.size=e.size,r.color=e.color,r.lastEditedTime=e.lastEditedTime,r):Y(e,t)}var o=t.getConcept("__tool_mask__").references.map(r),a=e.references.map(r);return o.concat(a)}!function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left"}(mt||(mt={}));var At={w:0,h:0};function zt(){var e=(0,r.useContext)(pt),t=e.relations,n=e.blocks,o=(0,r.useContext)(ge).dispatchAction,a=(0,r.useMemo)((function(){return t.map((function(e){return ee(Q(n,e.fromId))}))}),[t,n]),c=(0,r.useMemo)((function(){return t.map((function(e){return ee(Q(n,e.toId))}))}),[t,n]);return r.createElement(r.Fragment,null,t.map((function(e,t){var n=a[t],l=c[t],s=k(w([n,l]),100);return r.createElement(we,{key:"vo-r-".concat(e.id),posType:N.Normal,pos:s,size:At},r.createElement(P,{fromBox:n,toBox:l,viewBox:s,color:i.colors.uiPrimaryHarder,size:i.arrowSize,onMouseDown:function(t){if(2===t.button){var n={x:t.clientX,y:t.clientY};o({type:le.ContextMenuOpen,data:{contextType:$.Relation,pointerInViewportCoords:n,relationId:e.id}})}}}))})))}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt={w:0,h:0},Ht=r.memo((function(){var e=(0,r.useContext)(pt),t=(0,r.useContext)(ge),n=t.dispatchAction,o=t.createOverlay,l=(0,r.useCallback)((function(){n({type:le.BlocksRendered})}),[n]);F.updateCamera(e.camera);var s,d,u,f=(0,r.useMemo)((function(){if(e.shouldAnimateCamera)return e.blocks.filter((function(e){return e.posType===N.Normal}));var t=window.innerWidth,n=window.innerHeight,r=.25*t,o=.25*n,a={x:e.camera.focus.x-r,y:e.camera.focus.y-o,w:t/e.camera.scale+2*r,h:n/e.camera.scale+2*o};return e.blocks.filter((function(t){var n=F.getRect(t.id);return t.posType===N.Normal&&(!n||e.debugging||g(Dt(Dt({},t.pos),{},{w:"number"==typeof t.size.w?t.size.w:n.width,h:"number"==typeof t.size.h?t.size.h:n.height}),a))}))}),[e.blocks,e.camera,e.debugging,e.shouldAnimateCamera]),m=e.blocks.filter((function(e){return e.posType>N.Normal})),p=(0,r.useMemo)((function(){return{top:e.contextMenuState.pos.y,left:e.contextMenuState.pos.x,bottom:e.contextMenuState.pos.y,right:e.contextMenuState.pos.x}}),[e.contextMenuState.pos]);return r.createElement("div",{className:(0,a.Sh)(c.App,e.blocks.find((function(e){return e.mode===L.Moving}))&&c["App--BlockMoving"],e.blocks.find((function(e){return e.mode===L.Resizing}))&&c["App--BlockResizing"],e.drawingRelation&&c["App--DrawingRelation"])},r.createElement(Ee,{dispatchAction:n},r.createElement(Se,{focus:e.camera.focus,scale:e.camera.scale,selecting:e.selecting,selectionBox:e.selectionBox,shouldAnimate:e.shouldAnimateCamera},e.blocksRendered&&r.createElement(zt,null),r.createElement(xe,{key:e.viewingConcept.id,blocks:f,onRender:l}),e.blocksRendered&&e.drawingRelation&&(u=k(w([s=ee(Q(e.blocks,e.drawingRelationFromBlockId)),d=Dt(Dt({},e.drawingRelationToPoint),{},{w:0,h:0})]),10),r.createElement(we,{key:"drawingRelation",posType:N.Normal,pos:u,size:Lt},r.createElement(P,{fromBox:s,toBox:d,viewBox:u,color:i.colors.uiPrimaryHarder,size:i.arrowSize}))))),r.createElement(Oe,null,r.createElement(xe,{blocks:m})),e.contextMenuState.shouldShow&&o(r.createElement(De,{near:p},r.createElement(bt,null))))}));function Ft(e){var t,n,a,i,c,l,s=e.db,m=e.factoryRegistry,y=e.openExternal,b=(0,r.useMemo)((function(){return function(e,t){var n={w:300,h:"auto"},r="",o={w:0,h:0},a=void 0;return function(i,c){switch(c.type){case le.ConceptCreate:var l=c.data.posType,s=i.camera,m=i.blocks,y=wt(t.getDefaultContentFactory().id),b=function(){switch(c.data.intent){case se.ExactAt:return It(It({},v(c.data.pointerInViewportCoords,s)),n);case se.Below:var e=F.getRect(c.data.blockId);return e&&{x:e.left,y:e.bottom+5,w:e.width,h:n.h};case se.Above:var t=F.getRect(c.data.blockId);return t&&{x:t.left,y:t.top-50+5,w:t.width,h:n.h};case se.LeftOf:var r=F.getRect(c.data.blockId);return r&&{x:r.left-n.w-5,y:r.top,w:r.width,h:n.h};case se.RightOf:var o=F.getRect(c.data.blockId);return o&&{x:o.right+5,y:o.top,w:o.width,h:n.h}}}();if(!b)return i;var g=G({to:y.id,posType:l,pos:b,size:b}),w=Y(g,m.length),x=xt(i.viewingConcept,{references:i.viewingConcept.references.concat(g)});return e.createConcept(y),e.updateConcept(x),It(It({},i),{},{viewingConcept:x,blocks:te(i.blocks).concat(w),selectedBlockIds:[]});case le.ConceptWriteData:var k=c.data.type,E=c.data.content,O=xt(e.getConcept(c.data.id),{summary:{type:k,data:E}});return e.updateConcept(O),c.data.id===i.viewingConcept.id?It(It({},i),{},{viewingConcept:O}):i;case le.BlockCreate:var T=G({to:c.data.id,posType:N.Normal,pos:c.data.position,size:n}),C=xt(i.viewingConcept,{references:i.viewingConcept.references.concat([T])});return e.updateConcept(C),It(It({},i),{},{viewingConcept:C,blocks:Bt(C,e)});case le.BlockRemove:var S=i.blocks,j=i.selectedBlockIds,I=c.data.id,P=I&&S.find((function(e){return I===e.id})),B=function(e){return P?P.selected?j.includes(e):e===P.id:j.includes(e)},A=xt(i.viewingConcept,{references:i.viewingConcept.references.filter((function(e){return!B(e.id)})),relations:i.viewingConcept.relations.filter((function(e){return!B(e.fromId)&&!B(e.toId)}))});return e.updateConcept(A),F.deleteBlocks(S.filter((function(e){return B(e.id)})).map((function(e){return e.id}))),It(It({},i),{},{viewingConcept:A,relations:A.relations,blocks:Bt(A,e)});case le.BlockMoveStart:var z,R=c.data,D=R.id,H=R.pointerInViewportCoords,V=i.blocks,U=i.selectedBlockIds,W=i.camera;if((null===(z=V.find((function(e){return D===e.id})))||void 0===z?void 0:z.posType)!==N.Normal)return console.warn("reducer/BlockMoveStart: No support for moving non-normal positioned blocks."),i;var K=U.length&&U.includes(D)?U:[D],J=V.find((function(e){return D===e.id})),X=v(H,W);return It(It({},i),{},{blocks:oe(K,V).map((function(e){return q(e,{selected:K.includes(e.id)})})),selectedBlockIds:K,pointerOffsetInCursorBox:u(X,J.pos)});case le.BlockMove:var re,ae=c.data,ie=ae.id,ce=ae.pointerInViewportCoords,de=i.selectedBlockIds,ue=i.blocks,fe=i.camera,me=i.pointerOffsetInCursorBox;if((null===(re=ue.find((function(e){return ie===e.id})))||void 0===re?void 0:re.posType)!==N.Normal)return console.warn("reducer: No support for moving non-normal positioned blocks."),i;var pe=v(ce,fe),ye=ue.find((function(e){return ie===e.id})),be=ee(ye),ge=u(pe,me),he=function(e){return ye.selected?de.includes(e):e===ye.id},ve=St(be,ue.filter((function(e){return!he(e.id)&&e.posType===N.Normal})).map((function(e){var t=F.getRect(e.id);return It(It({},e.pos),{},{w:"number"==typeof e.size.w?e.size.w:t.width,h:"number"==typeof e.size.h?e.size.h:t.height})})),36),we=ve.horizontalGuidelines,xe=ve.verticalGuidelines,ke={left:Ct(ge.x,xe,12),top:Ct(ge.y,we,12),right:Ct(ge.x+be.w,xe,12),bottom:Ct(ge.y+be.h,we,12)},Ee=ke.left.guideline&&ke.right.guideline?Math.abs(ge.x-ke.left.value)<Math.abs(ge.x+be.w-ke.right.value)?"left":"right":ke.left.guideline?"left":"right",Oe=ke.top.guideline&&ke.bottom.guideline?Math.abs(ge.y-ke.top.value)<Math.abs(ge.y+be.h-ke.bottom.value)?"top":"bottom":ke.top.guideline?"top":"bottom",Te={x:"right"===Ee?ke.right.guideline&&ke.right.guideline.fromSide===mt.Left?ke.right.value-5-be.w:ke.right.value-be.w:ke.left.guideline&&ke.left.guideline.fromSide===mt.Right?ke.left.value+5:ke.left.value,y:"bottom"===Oe?ke.bottom.guideline&&ke.bottom.guideline.fromSide===mt.Top?ke.bottom.value-5-be.h:ke.bottom.value-be.h:ke.top.guideline&&ke.top.guideline.fromSide===mt.Bottom?ke.top.value+5:ke.top.value},Ce={x:Te.x-ye.pos.x,y:Te.y-ye.pos.y},Se=xt(i.viewingConcept,{references:i.viewingConcept.references.map((function(e){return he(e.id)?It(It({},e),{},{pos:d(e.pos,Ce)}):e}))});return a=function(){for(var e=ue.length-1;e>=0;e--){var t=ue[e];if(t.posType!==N.Normal)return;var n=F.getRect(t.id),r={top:t.pos.y,left:t.pos.x,bottom:t.pos.y+n.height,right:t.pos.x+n.width},o=v(ce,fe);if(t.id!==ie&&r&&p(o,r))return t}}(),e.updateConcept(Se),It(It({},i),{},{viewingConcept:Se,blocks:oe([ie],ue).map((function(e){return It(It({},e),{},{highlighted:(t=e.id,t===(a&&a.id)),pos:he(e.id)?d(e.pos,Ce):e.pos});var t}))});case le.BlockMoveEnd:if(a){var je=i.viewingConcept,Ie=i.selectedBlockIds,Pe=i.blocks,Be=Pe.filter((function(e){return Ie.includes(e.id)})),Ae=Be.reduce((function(e,t){return t.pos.x<=e.pos.x&&t.pos.y<=e.pos.y?t:e}),Be[0]),ze=e.getConcept(a.conceptId),Re=ze.references.reduce((function(e,t){var n=t.pos.x+("auto"===t.size.w?0:t.size.w);return n>e.x&&(e.x=n),t.pos.y<e.y&&(e.y=t.pos.y),e}),{x:-1/0,y:-1/0}),Me=u(d({x:Re.x===-1/0?100:Re.x,y:Re.y===-1/0?100:Re.y},{x:100,y:0}),Ae.pos),De=xt(je,{references:je.references.filter((function(e){return!Ie.includes(e.id)})),relations:je.relations.filter((function(e){return!Ie.includes(e.fromId)&&!Ie.includes(e.toId)}))}),Ne=xt(ze,{references:ze.references.concat(je.references.filter((function(e){return Ie.includes(e.id)})).map((function(e){return It(It({},e),{},{pos:d(e.pos,Me)})}))),relations:ze.relations.concat(je.relations.filter((function(e){return Ie.includes(e.fromId)&&Ie.includes(e.toId)})))});return e.updateConcept(De),e.updateConcept(Ne),It(It({},i),{},{viewingConcept:De,pointerOffsetInCursorBox:{x:0,y:0},blocks:Pe.filter((function(e){return!Be.includes(e)})).map((function(e){return It(It({},e),{},{highlighted:!1})})),relations:De.relations,selectedBlockIds:[]})}return It(It({},i),{},{pointerOffsetInCursorBox:{x:0,y:0},blocks:i.blocks.map((function(e){return q(e,{highlighted:!1})}))});case le.BlockResizeDelta:var Le=c.data,He=Le.id,Fe=Le.movementInViewportCoords,$e=i.camera,_e=i.blocks,Ve=i.selectedBlockIds,Ue=_e.find((function(e){return e.id===He})),We=F.getRect(He),Ke=Ue.size;o=r!==He?{w:"number"==typeof Ke.w?Ke.w+Fe.x/$e.scale:We.width,h:"number"==typeof Ke.h?Ke.h+Fe.y/$e.scale:We.height}:{w:"number"==typeof o.w?o.w+Fe.x/$e.scale:o.w,h:"number"==typeof o.h?o.h+Fe.y/$e.scale:o.h},r=He;var Je=It(It({},Ue.pos),o),Ge=function(e){return Ue.selected?Ve.includes(e):e===Ue.id},Ye=St(Je,_e.filter((function(e){return!Ge(e.id)&&e.posType===N.Normal})).map((function(e){var t=F.getRect(e.id);return It(It({},e.pos),{},{w:"number"==typeof e.size.w?e.size.w:t.width,h:"number"==typeof e.size.h?e.size.h:t.height})})),36/$e.scale),qe=Ye.horizontalGuidelines,Xe=Ye.verticalGuidelines,Ze=12/$e.scale,Qe=Ct(Je.y+Je.h,qe,Ze),et=Ct(Je.x+Je.w,Xe,Ze),tt=Qe.guideline&&Qe.guideline.fromSide===mt.Top?Qe.value-5-Je.y:Qe.value-Je.y,nt=et.guideline&&et.guideline.fromSide===mt.Left?et.value-5-Je.x:et.value-Je.x,rt={w:"number"==typeof Ke.w?nt-Ke.w:0,h:"number"==typeof Ke.h?tt-Ke.h:0},ot=xt(i.viewingConcept,{references:i.viewingConcept.references.map((function(e){return Ge(e.id)?It(It({},e),{},{size:{w:"number"==typeof e.size.w?e.size.w+rt.w:e.size.w,h:"number"==typeof e.size.h?e.size.h+rt.h:e.size.h}}):e}))});return e.updateConcept(ot),It(It({},i),{},{viewingConcept:ot,blocks:oe([He],_e).map((function(e){return Ge(e.id)?q(e,{size:{w:"number"==typeof e.size.w?e.size.w+rt.w:e.size.w,h:"number"==typeof e.size.h?e.size.h+rt.h:e.size.h}}):e}))});case le.BlockSetMode:var at=c.data,it=at.id,ct=at.mode,lt=i.blocks;return It(It({},i),{},{blocks:ct!==L.Idle?oe([it],lt,(function(e){return q(e,{mode:ct})})):lt.map((function(e){return e.id===it?q(e,{mode:ct}):e}))});case le.BlockSetColor:var st=c.data,dt=st.id,ut=st.color,ft=i.blocks,pt=i.selectedBlockIds,yt=ft.find((function(e){return e.id===dt}));if(!yt)return i;var bt=function(e){return yt.selected?pt.includes(e):e===yt.id},gt=xt(i.viewingConcept,{references:i.viewingConcept.references.map((function(e){return bt(e.id)?It(It({},e),{},{color:ut}):e}))});return e.updateConcept(gt),It(It({},i),{},{viewingConcept:gt,blocks:oe([dt],ft).map((function(e){return bt(e.id)?q(e,{color:ut}):e}))});case le.BlockSetSize:var ht=c.data,vt=ht.id,kt=ht.size,Ot=i.blocks,Tt=i.viewingConcept,jt=Q(Ot,vt);if(!jt)return i;var Pt=q(jt,{size:kt}),At=xt(Tt,{references:Tt.references.map((function(e){return e.id===vt?function(e){return{id:e.id,to:e.conceptId,posType:e.posType,pos:e.pos,size:e.size,color:e.color,createdTime:e.createdTime,lastEditedTime:e.lastEditedTime}}(Pt):e}))});return e.updateConcept(At),r="",It(It({},i),{},{viewingConcept:At,blocks:Ot.map((function(e){return e.id===vt?Pt:e}))});case le.BlockSelect:return It(It({},i),{},{selectedBlockIds:i.selectedBlockIds.concat(c.data.filter((function(e){return!i.selectedBlockIds.find((function(t){return t===e}))})))});case le.BlockDeselect:return It(It({},i),{},{selectedBlockIds:i.selectedBlockIds.filter((function(e){return!c.data.find((function(t){return t===e}))}))});case le.BlockDeselectAll:return It(It({},i),{},{selectedBlockIds:[]});case le.BlockOpenAsCanvas:var zt=c.data,Rt=zt.id,Mt=zt.focusBlockId,Dt=i.blocks;if(!Rt)return i;if(Rt===i.viewingConcept.id){var Nt=Dt.find((function(e){return e.id===Mt}));if(Nt){var Lt=ne(Nt,1);return It(It({},i),{},{camera:{focus:Lt,scale:1},shouldAnimateCamera:!0,blocks:oe([Nt.id],Dt).map((function(e){return q(e,{selected:e.id===Mt,mode:L.Idle})})),selectedBlockIds:[Mt]})}return i}e.saveSettings({debugging:i.debugging,homeConceptId:i.homeConceptId,viewingConceptId:Rt});var Ht=e.getConcept(Rt),Ft=Ht.references.find((function(e){return e.id===Mt})),$t=Ft&&{focus:ne(Ft,1),scale:1};return It(It({},i),{},{viewingConcept:Ht,camera:$t||Ht.camera,shouldAnimateCamera:!1,blocks:Ft?oe([Mt],Bt(Ht,e)).map((function(e){return q(e,{selected:e.id===Mt})})):Bt(Ht,e),selectedBlockIds:Ft?[Mt]:i.selectedBlockIds,blocksRendered:!1,relations:Ht.relations,expandHistory:i.expandHistory.slice(1).concat(Rt)});case le.SelectionBoxSetStart:var _t=v(c.data,i.camera);return It(It({},i),{},{selecting:!0,selectionBoxStart:_t,selectionBoxEnd:_t,selectionBox:It(It({},_t),{},{w:0,h:0}),selectedBlockIds:[],blocks:te(i.blocks)});case le.SelectionBoxSetEnd:var Vt=i.selectionBoxStart,Ut=v(c.data,i.camera),Wt=h(Vt.x,Vt.y,Ut.x,Ut.y),Kt=Z(i.blocks,Wt),Jt=i.blocks.map((function(e){return q(e,{selected:Kt.includes(e.id)})}));return It(It({},i),{},{selectionBoxEnd:Ut,selectionBox:Wt,selectedBlockIds:Kt,blocks:Jt});case le.SelectionBoxClear:return It(It({},i),{},{selecting:!1,selectionBoxStart:{x:0,y:0},selectionBoxEnd:{x:0,y:0},selectionBox:{x:0,y:0,w:0,h:0}});case le.CameraMoveDelta:var Gt=f(c.data,i.camera.scale),Yt=It(It({},i.camera),{},{focus:{x:i.camera.focus.x-Gt.x,y:i.camera.focus.y-Gt.y}}),qt=xt(i.viewingConcept,{camera:Yt});e.updateConcept(qt);var Xt=i.selectionBoxStart;if(i.selecting){var Zt=u(i.selectionBoxEnd,Gt),Qt=h(Xt.x,Xt.y,Zt.x,Zt.y),en=Z(i.blocks,Qt),tn=i.blocks.map((function(e){return q(e,{selected:en.includes(e.id)})}));return It(It({},i),{},{viewingConcept:qt,camera:Yt,shouldAnimateCamera:!1,selectionBoxEnd:Zt,selectionBox:Qt,selectedBlockIds:en,blocks:tn})}return It(It({},i),{},{viewingConcept:qt,camera:Yt,shouldAnimateCamera:!1});case le.CameraScaleDelta:var nn=Math.sqrt(1.618),rn=-c.data.wheelDelta/48,on=i.camera.scale*Math.pow(nn,rn);on>2?on=2:on<.2&&(on=.2);var an=u(v(c.data.focus,i.camera),f(c.data.focus,on));on===i.camera.scale&&(an=i.camera.focus);var cn=It(It({},i.camera),{},{focus:an,scale:on}),ln=xt(i.viewingConcept,{camera:cn});return e.updateConcept(ln),It(It({},i),{},{viewingConcept:ln,camera:cn,shouldAnimateCamera:!0});case le.CameraSetValue:var sn=i.viewingConcept,dn=It(It({},i.camera),c.data),un=xt(sn,{camera:dn});return e.updateConcept(un),It(It({},i),{},{viewingConcept:un,camera:dn,shouldAnimateCamera:!0});case le.RelationDrawStart:var fn=c.data,mn=fn.id,pn=fn.pointerInViewportCoords,yn=i.camera;return It(It({},i),{},{drawingRelation:!0,drawingRelationFromBlockId:mn,drawingRelationToPoint:v(pn,yn)});case le.RelationDrawMove:var bn=c.data.pointerInViewportCoords,gn=i.camera,hn=i.blocks,vn=v(bn,gn),wn=function(){for(var e=hn.length-1;e>=0;e--){var t=hn[e],n=F.getRect(t.id);if(n&&p(vn,n))return t}}();return It(It({},i),{},{blocks:hn.map((function(e){return q(e,{highlighted:!!wn&&e.id===wn.id})})),drawingRelationToPoint:v(bn,gn)});case le.RelationDrawEnd:var xn=c.data,kn=xn.id,En=xn.pointerInViewportCoords,On=i.blocks,Tn=i.relations,Cn=i.camera,Sn=i.viewingConcept,jn=function(){for(var e=On.length-1;e>=0;e--){var t=On[e];if(t.id!==kn&&t.posType===N.Normal&&p(v(En,Cn),F.getRect(t.id)))return t}}(),In=jn&&{type:"block-to-block-in-canvas",fromEntity:_.Block,fromId:kn,toEntity:_.Block,toId:jn.id},Pn=In&&!function(e,t){return!!e.find((function(e){return e.type===t.type&&e.fromEntity===t.fromEntity&&e.fromId===t.fromId&&e.toEntity===t.toEntity&&e.toId===t.toId}))}(Tn,In)&&Et(Et({},In),{},{id:(0,M.Z)(),userData:void 0}),Bn=xt(Sn,{relations:Pn?Tn.concat(Pn):Sn.relations});return e.updateConcept(Bn),It(It({},i),{},{viewingConcept:Bn,blocks:On.map((function(e){return q(e,{highlighted:!1})})),relations:Bn.relations,drawingRelation:!1,drawingRelationFromBlockId:"",drawingRelationToPoint:{x:0,y:0}});case le.RelationRemove:var An=c.data.id,zn=xt(i.viewingConcept,{relations:i.relations.filter((function(e){return e.id!==An}))});return e.updateConcept(zn),It(It({},i),{},{viewingConcept:zn,relations:zn.relations});case le.DebuggingToggle:return e.saveSettings({debugging:!i.debugging,homeConceptId:i.homeConceptId,viewingConceptId:i.viewingConcept.id}),It(It({},i),{},{debugging:!i.debugging});case le.Undo:var Rn=i.expandHistory,Mn=Rn[Rn.length-2],Dn=e.getConcept(Mn);return Dn?(e.saveSettings({debugging:i.debugging,homeConceptId:i.homeConceptId,viewingConceptId:Mn}),It(It({},i),{},{viewingConcept:Dn,camera:Dn.camera,shouldAnimateCamera:!1,blocks:Bt(Dn,e),blocksRendered:!1,relations:Dn.relations,expandHistory:[""].concat(Rn.slice(0,-1))})):i;case le.BlocksRendered:return It(It({},i),{},{blocksRendered:!0});case le.ContextMenuOpen:var Nn=c.data.pointerInViewportCoords;return It(It({},i),{},{contextMenuState:{shouldShow:!0,pos:Nn,data:c.data}});case le.ContextMenuClose:return It(It({},i),{},{contextMenuState:{shouldShow:!1,pos:{x:0,y:0},data:{contextType:$.InferFromPointer,pointerInViewportCoords:{x:0,y:0}}}})}}}(s,m)}),[s,m]),g=(0,r.useMemo)((function(){return function(e){console.log("core/store/reducer: Loading app state");var t=e.getSettings(),n=e.getConcept(t.viewingConceptId),r=Bt(n,e);return{debugging:t.debugging,homeConceptId:t.homeConceptId,viewingConcept:n,expandHistory:new Array(99).concat(n.id),camera:n.camera,shouldAnimateCamera:!1,selecting:!1,selectionBoxStart:{x:0,y:0},selectionBoxEnd:{x:0,y:0},selectionBox:{x:0,y:0,w:0,h:0},pointerOffsetInCursorBox:{x:0,y:0},selectedBlockIds:[],blocks:r,blocksRendered:!1,relations:Tt(n.relations.filter((function(e){return"block-to-block-in-canvas"===(t=e).type&&t.fromEntity===_.Block&&t.toEntity===_.Block;var t})),r),drawingRelation:!1,drawingRelationFromBlockId:"",drawingRelationToPoint:{x:0,y:0},contextMenuState:{shouldShow:!1,pos:{x:0,y:0},data:{contextType:$.InferFromPointer,pointerInViewportCoords:{x:0,y:0}}}}}(s)}),[s]),w=(c=(0,r.useState)(g),l=2,function(e){if(Array.isArray(e))return e}(c)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(c,l)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=w[0],k=w[1],E=(0,r.useRef)(g),O=(0,r.useCallback)((function(e){E.current=b(E.current,e)}),[b]);t=function(){k(E.current)},n=(0,r.useRef)(),a=(0,r.useRef)(),i=function e(r){if(null!=a.current){a.current;t()}a.current=r,n.current=requestAnimationFrame(e)},(0,r.useEffect)((function(){return n.current=requestAnimationFrame(i),function(){return cancelAnimationFrame(n.current)}}),[]);var T=(0,r.useRef)(null),C=(0,r.useCallback)((function(e){return o.createPortal(e,T.current)}),[]),S=(0,r.useMemo)((function(){return{db:s,factoryRegistry:m,dispatchAction:O,createOverlay:C,openExternal:y}}),[s,m,O,C,y]);return r.createElement(r.Fragment,null,r.createElement(ge.Provider,{value:S},r.createElement(pt.Provider,{value:x},r.createElement(Ht,null))),r.createElement(Pe,{ref:T}))}function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(l,e);var t,n,o,a,i,c=(a=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wt(a);if(i){var n=Wt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ut(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={hasError:!1},t}return t=l,o=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?r.createElement("p",null,"Something went wrong."):this.props.children}}])&&_t(t.prototype,n),o&&_t(t,o),l}(r.Component),Jt=n(922),Gt=n(780),Yt=n(638),qt=n(189),Xt=n(327),Zt=(0,a.zE)({EditorContainer:{position:"relative",$nest:{"& .ProseMirror":{whiteSpace:"pre-wrap",overflowWrap:"break-word",wordBreak:"break-word"},"& .ProseMirror:focus":{outline:"none"},'&[data-view-mode="Block"] > .ProseMirror':{padding:i.paddings.blockComfort},'&[data-view-mode="NavItem"] > .ProseMirror':{padding:i.paddings.navComfort},'&[data-view-mode="CardTitle"] > .ProseMirror':{padding:0}}},Placeholder:{position:"absolute",top:0,right:0,bottom:0,left:0,opacity:.6,pointerEvents:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",$nest:{'&[data-view-mode="Block"]':{padding:i.paddings.blockComfort},'&[data-view-mode="NavItem"]':{padding:i.paddings.navComfort},'&[data-view-mode="CardTitle"]':{padding:0}}},PMTextNavItem:{fontSize:".8rem",maxHeight:"100%"},PMTextCardTitle:{margin:"auto",width:"100%"},Code:{borderRadius:5,backgroundColor:"rgba(27, 31, 35, 0.05)",fontSize:"0.9em",padding:"0.2em 0.4em",wordBreak:"break-word",fontFamily:i.fonts.monospace},Underline:{borderBottom:"0.05em solid"}});function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){tn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nn,rn,on={padding:"".concat(.3,"rem"),zIndex:1e4,background:i.colors.bgBlock,boxShadow:i.shadows.float,borderRadius:i.borders.smallRadius,animation:"".concat(i.animations.fadeIn," 200ms ").concat(i.easings.easeInOutCubic)},an={height:"".concat(1.75,"rem"),fontSize:"0.9rem",outline:"none",border:"none",borderRadius:i.borders.smallRadius,color:i.colors.contentText,background:i.colors.bgBlock,cursor:"pointer",transition:"background 30ms ".concat(i.easings.easeInOutCubic),$nest:{"&:hover":{background:i.colors.bgHover},"&:active":{background:i.colors.bgActive}}},cn=(0,a.zE)({Button:en(en({},an),{},{padding:0,width:"".concat(1.75,"rem")}),TextButton:en(en({},an),{},{padding:"0 .4rem"}),Glow:{color:i.colors.uiPrimary},TextActionMenu:en(en({},on),{},{display:"flex"}),HighlightPicker:en(en({},on),{},{position:"absolute",top:"-9rem",left:"".concat(4.375000000000001,"rem"),width:"".concat(11.1,"rem")}),LinkDialog:en(en({},on),{},{position:"absolute",top:"-2.7rem",left:"-1.5rem",right:"-1.5rem",display:"flex",$nest:{"& > input":en(en({},Ue),{},{flex:"1 1 0",fontSize:".9rem",marginRight:".3rem"}),"& > button":en(en({},Ve),{},{flex:"0 0 3rem",padding:"0 .5rem"})}}),Title:en(en({},Ge),{},{padding:"0.3rem 0.3rem 0"})});function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.BackgroundRed="background-red",e.BackgroundOrange="background-orange",e.BackgroundYellow="background-yellow",e.BackgroundGreen="background-green",e.BackgroundBlue="background-blue",e.BackgroundPurple="background-purple",e.BackgroundPink="background-pink",e.BluePurpleGradient="blue-purple-gradient",e.OrangePinkGradient="orange-pink-gradient"}(rn||(rn={}));var un={"-webkit-background-clip":"text","-webkit-text-fill-color":"transparent","-webkit-box-decoration-break":"clone",backgroundClip:"text"},fn=(0,a.zE)({Highlight:{color:i.colors.contentText,background:"transparent",borderRadius:i.borders.smallRadius,$nest:(nn={},dn(nn,'&[data-color="'.concat(rn.BackgroundRed,'"]'),{background:"rgb(255, 214, 214)"}),dn(nn,'&[data-color="'.concat(rn.BackgroundOrange,'"]'),{background:"rgb(255, 235, 214)"}),dn(nn,'&[data-color="'.concat(rn.BackgroundYellow,'"]'),{background:"rgb(255, 249, 153)"}),dn(nn,'&[data-color="'.concat(rn.BackgroundGreen,'"]'),{background:"rgb(176, 255, 211)"}),dn(nn,'&[data-color="'.concat(rn.BackgroundBlue,'"]'),{background:"rgb(199, 231, 255)"}),dn(nn,'&[data-color="'.concat(rn.BackgroundPurple,'"]'),{background:"rgb(231, 215, 255)"}),dn(nn,'&[data-color="'.concat(rn.BackgroundPink,'"]'),{background:"rgb(255, 213, 249)"}),dn(nn,'&[data-color="'.concat(rn.BluePurpleGradient,'"]'),sn(sn({},un),{},{backgroundImage:"linear-gradient(90deg, rgb(40, 188, 190) 0%, rgb(57, 53, 221) 100%)"})),dn(nn,'&[data-color="'.concat(rn.OrangePinkGradient,'"]'),sn(sn({},un),{},{backgroundImage:"linear-gradient(90deg, rgb(255, 107, 0) 0%, rgb(255, 0, 162) 100%)"})),nn)}}),mn="highlight",pn={attrs:{color:{default:rn.BackgroundYellow}},toDOM:function(e){var t=e.attrs.color;return["mark",{class:fn.Highlight,"data-color":t},0]},parseDOM:[{tag:"mark",getAttrs:function(e){return{color:e.getAttribute("data-color")}}}]};function yn(e){return e.startsWith("background")}function bn(e){return!e.startsWith("background")}function gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vn,wn=r.createElement("span",{style:{fontWeight:600}},"B"),xn=r.createElement("span",{style:{fontStyle:"italic"}},"I"),kn=r.createElement("s",null,"S"),En=r.createElement("span",{style:{textDecoration:"underline"}},"U"),On=r.createElement("span",{style:{fontSize:".8rem"}},"</>"),Tn=r.createElement("div",{style:{fontFamily:"serif",fontSize:".7rem",position:"relative",width:"100%",height:"100%"}},r.createElement("span",{style:{position:"absolute",top:".35rem",left:".3rem"}},"T"),r.createElement("span",{style:{position:"absolute",bottom:".35rem",left:".6rem"}},"E"),r.createElement("span",{style:{position:"absolute",top:".35rem",right:".3rem"}},"X")),Cn=r.createElement("span",{style:{padding:"0 .3rem"}},"A");function Sn(e){return r.createElement("button",{className:(0,a.Sh)(cn.Button,e.glow&&cn.Glow),onClick:e.onClick},e.children)}function jn(e){return r.createElement("button",{className:(0,a.Sh)(cn.TextButton,e.glow&&cn.Glow),onClick:e.onClick},e.children)}function In(e){return r.createElement("div",{className:cn.HighlightPicker},r.createElement("div",null,r.createElement("div",{className:cn.Title},"COLOR"),r.createElement("div",null,Object.values(rn).filter(bn).map((function(t){return r.createElement(Sn,{key:t,onClick:function(){return e.setHighlight(t)}},r.createElement("mark",{className:fn.Highlight,"data-color":t},Cn))})).concat(r.createElement(Sn,{key:"no-color",onClick:function(){return e.setHighlight(void 0)}},r.createElement("mark",{className:fn.Highlight},Cn))))),r.createElement("div",null,r.createElement("div",{className:cn.Title},"BACKGROUND"),r.createElement("div",null,Object.values(rn).filter(yn).map((function(t){return r.createElement(Sn,{key:t,onClick:function(){return e.setHighlight(t)}},r.createElement("mark",{className:fn.Highlight,"data-color":t},Cn))})).concat(r.createElement(Sn,{key:"no-color",onClick:function(){return e.setHighlight(void 0)}},r.createElement("mark",{className:fn.Highlight},Cn))))))}function Pn(e){var t=gn((0,r.useState)(e.activeLink),2),n=t[0],o=t[1];return r.createElement("div",{className:cn.LinkDialog},r.createElement("input",{value:n,autoFocus:!0,onChange:function(e){return o(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&(t.preventDefault(),e.setLink(n))},placeholder:"Paste an URL..."}),r.createElement("button",{onClick:function(){return e.setLink(n)}},"Set"))}!function(e){e.Main="main",e.HighlighPicker="highlightPicker",e.LinkDialog="linkDialog"}(vn||(vn={}));var Bn,An=r.forwardRef((function(e,t){var n=e.setHighlight,o=e.setLink,a=gn((0,r.useState)(vn.Main),2),i=a[0],c=a[1],l=(0,r.useCallback)((function(){c((function(e){return e===vn.HighlighPicker?vn.Main:vn.HighlighPicker}))}),[]),s=(0,r.useCallback)((function(){c((function(e){return e===vn.LinkDialog?vn.Main:vn.LinkDialog}))}),[]);(0,r.useEffect)((function(){return function(){c(vn.Main)}}),[]);var d=(0,r.useCallback)((function(e){c(vn.Main),n(e)}),[n]),u=(0,r.useCallback)((function(e){c(vn.Main),o(e)}),[o]);return r.createElement("div",{className:cn.TextActionMenu,ref:t},r.createElement(Sn,{glow:e.boldActive,onClick:e.toggleBold},wn),r.createElement(Sn,{glow:e.italicActive,onClick:e.toggleItalic},xn),r.createElement(Sn,{glow:e.strikeActive,onClick:e.toggleStrike},kn),r.createElement(Sn,{glow:e.underlineActive,onClick:e.toggleUnderline},En),r.createElement(Sn,{glow:e.codeActive,onClick:e.toggleCode},On),r.createElement(Sn,{onClick:l},r.createElement("mark",{className:fn.Highlight,"data-color":e.activeHighlightColor||null},Cn)),r.createElement(jn,{glow:!!e.activeLink,onClick:s},"Link"),r.createElement(Sn,{onClick:e.turnIntoLatex},Tn),i===vn.HighlighPicker&&r.createElement(In,{setHighlight:d}),i===vn.LinkDialog&&r.createElement(Pn,{activeLink:e.activeLink,setLink:u}))})),zn=(0,a.zE)({Link:{color:"inherit",opacity:.75,cursor:"pointer",textDecoration:"none",borderBottom:"0.05em solid ".concat(i.colors.uiSecondaryDumb),$nest:{"&:hover":{borderBottom:"0.05em solid ".concat(i.colors.uiPrimary)}}}}),Rn="link",Mn={attrs:{href:{default:"#"},title:{default:null}},inclusive:!1,toDOM:function(e){var t=e.attrs,n=t.href,r=t.title;return["a",{class:zn.Link,href:n,title:r},0]},parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}]};function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nn=new Yt.V_({nodes:{doc:{content:"inline*"},text:{group:"inline"},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},math_inline:{group:"inline",content:"text*",inline:!0,atom:!0,toDOM:function(){return["math-inline",{class:"math-node"},0]},parseDOM:[{tag:"math-inline"}]}},marks:(Bn={bold:{toDOM:function(){return["strong",0]},parseDOM:[{tag:"strong"}]},italic:{toDOM:function(){return["em",0]},parseDOM:[{tag:"em"},{tag:"i"},{style:"font-style=italic"}]},underline:{toDOM:function(){return["span",{class:Zt.Underline},0]},parseDOM:[{style:"text-decoration=underline"}]},strike:{toDOM:function(){return["s",0]},parseDOM:[{tag:"strike"},{tag:"s"},{style:"text-decoration=line-through"}]},code:{toDOM:function(){return["code",{class:Zt.Code},0]},parseDOM:[{tag:"code"}]}},Dn(Bn,Rn,Mn),Dn(Bn,mn,pn),Bn)});function Ln(e){var t=[];return e.content.descendants((function(e){e.isText&&t.push(e)})),t}function Hn(e){return Ln(e.content())}function Fn(e){var t=new Map;if(!e)return t;var n=new Map;return e.forEach((function(e){e.marks.forEach((function(e){n.set(e.type,(n.get(e.type)||0)+1)}))})),n.forEach((function(n,r){t.set(r,n===e.length)})),t}var $n=function(e,t,n){if(t[0]){var r=t[0].marks.find((function(t){return t.type.name===e}));if(r){for(var o=1;o<t.length;o++){var a=t[o].marks.find((function(t){return t.type.name===e}));if(!a)return;if(!n(r.attrs,a.attrs))return}return r}}},_n=function(e,t,n){var r=Hn(t);return $n(e,r,n)},Vn=function(e,t){return e.color===t.color};function Un(e){var t=function(e,t,n){var r=Ln(t);return $n("highlight",r,n)}(0,e,Vn);return t&&t.attrs.color}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qn=(0,a.zE)({SuggestionMenu:Gn({},Je),OptionGroupTitle:Gn({},Ge),Option:{padding:".3rem .5rem",fontSize:".875rem",borderRadius:i.borders.smallRadius,cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",$nest:{"&:active":{background:i.colors.bgActive}}},Selected:{background:i.colors.bgHover}});function Xn(e){return"pmtext"===e.summary.type}function Zn(e){return function(t){return{id:t.id,title:e.getConceptString(t)}}}function Qn(e,t){return U(e)===U(t)?t.lastEditedTime-e.lastEditedTime:U(e)?-1:1}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){nr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rr,or,ar=new Jt.H$("observeKeyword");function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rules:[],debug:!1},t=e.rules,n=e.debug;return new Jt.Sy({key:ar,view:function(){var e=this;return{update:function(t,n){var r=e.key.getState(n),o=e.key.getState(t.state),a=r.active&&o.active&&r.keywordRange.from!==o.keywordRange.from,i=!r.active&&o.active,c=r.active&&!o.active,l=!i&&!c&&r.keyword!==o.keyword;if(c||a){var s=r.activeRule.onKeywordStop;s&&s({keyword:r.keyword,keywordRange:r.keywordRange,triggerString:r.triggerString})}if(l&&!a){var d=o.activeRule.onKeywordChange;d&&d({keyword:o.keyword,keywordRange:o.keywordRange,keywordCoords:{from:t.coordsAtPos(o.keywordRange.from),to:t.coordsAtPos(o.keywordRange.to)},triggerString:o.triggerString})}if(i||a){var u=o.activeRule.onTrigger;u&&u({keyword:o.keyword,keywordRange:o.keywordRange,keywordCoords:{from:t.coordsAtPos(o.keywordRange.from),to:t.coordsAtPos(o.keywordRange.to)},triggerString:o.triggerString})}}}},state:{init:function(){return{active:!1,keywordRange:{from:-1,to:-1},keyword:"",triggerPos:-1,triggerString:"",activeRule:void 0}},apply:function(e,n){var r=e.selection;if(n.active){if(e.getMeta("pointer"))return{active:!1,keywordRange:{from:-1,to:-1},keyword:"",triggerPos:-1,triggerString:"",activeRule:void 0};if(r.from===r.to&&r.from<n.triggerPos)return{active:!1,keywordRange:{from:-1,to:-1},keyword:"",triggerPos:-1,triggerString:"",activeRule:void 0};var o=e.getMeta(ar);if(o&&o.stopReporting)return{active:!1,keywordRange:{from:-1,to:-1},keyword:"",triggerPos:-1,triggerString:"",activeRule:void 0};var a=r.from,i=r.$from.doc.textBetween(n.triggerPos,a,"\0","\0");return tr(tr({},n),{},{keywordRange:{from:n.triggerPos,to:a},keyword:i})}if(e.getMeta("pointer")||e.getMeta("uiEvent")||!e.docChanged)return tr({},n);if(r.from!==r.to)return tr({},n);var c=r.from,l=r.$from,s=l.start(),d=l.end();if(e.steps&&e.steps[0]){var u=e.steps[0].getMap(),f=!1;if(u.forEach((function(e,t,n,r){n>=s&&r<=d&&t-e!=0&&r===n&&(f=!0)})),f)return tr({},n)}for(var m=l.doc.textBetween(s,c,"\0","\0"),p=0;p<t.length;p++){var y=t[p],b=y.trigger.exec(m);if(b)return{active:!0,keywordRange:{from:c,to:c},keyword:"",triggerPos:c,triggerString:b[0],activeRule:y}}return tr({},n)}},props:{decorations:function(e){var t=this.getState(e),r=t.active,o=t.activeRule,a=t.keywordRange;return r&&o?Gt.EH.create(e.doc,[Gt.p.inline(a.from,a.to,{nodeName:"span",class:o.keywordDecorationClass||"ProseMirrorKeyword",style:n?"background: rgba(5, 12, 156, 0.05);\n                 color: #050c9c;\n                 border: 2px solid #050c9c;":null})]):null}}})}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sr(e){return e.reduce((function(e,t,n){return e.concat(t.items.map((function(e,t){return{key:[n,t],item:e}})))}),[])}function dr(e,t,n){var r=sr(n)[e];return!!r&&r.key[0]==t[0]&&r.key[1]===t[1]}!function(e){e.SlashCommands="slashCommands",e.Mention="mention"}(rr||(rr={})),function(e){e.TurnInto="turnInto",e.LinkTo="linkTo",e.CreateAndLinkTo="createAndLinkTo"}(or||(or={}));var ur=r.forwardRef((function(e,t){var n=e.optionGroups,o=e.selectedOptionIndex,i=e.width,c=e.onCloseMenu,l=e.onConfirmOption,s=e.onSelectOption,d=e.onSelectPrevOption,u=e.onSelectNextOption,f=(0,r.useCallback)((function(e){switch(e.key){case"ArrowUp":d&&d();break;case"ArrowDown":u&&u();break;case"Enter":l&&l();break;case"Escape":c&&c()}}),[c,l,d,u]);return(0,r.useEffect)((function(){return window.addEventListener("keydown",f),function(){return window.removeEventListener("keydown",f)}}),[f]),r.createElement("div",{ref:t,className:qn.SuggestionMenu,style:{width:i||150}},n.map((function(e,t){return r.createElement("div",{key:e.id},r.createElement("div",{className:qn.OptionGroupTitle},e.title),e.items.map((function(e,i){return r.createElement("div",{key:e.id,className:(0,a.Sh)(qn.Option,dr(o,[t,i],n)&&qn.Selected),onMouseEnter:function(){return s&&s(t,i)},onClick:function(){return l&&l()}},e.title)})),!e.items.length&&r.createElement("div",{className:qn.Option},"No result"))})))})),fr=n(778),mr=n(629),pr=n(896);function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function br(e,t){return new pr.VK(e,(function(e,n,r,o){var a=[];a=Array.isArray(t)?t.map((function(e){return e.create()})):[t.create()];var i,c,l=(i=n[0].split(n[1]),c=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(i,c)||function(e,t){if(e){if("string"==typeof e)return yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yr(e,t):void 0}}(i,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=l[0],d=l[1],u=e.tr;return a.forEach((function(e){u=u.addMark(r,o,e)})),u=(u=(u=u.delete(r,r+s.length)).delete(u.mapping.map(o-(d.length-1)),u.mapping.map(o))).setStoredMarks([])}))}function gr(e){return e&&0===e.content.size}function hr(e,t){return e?Yt.NB.fromJSON(t,e):void 0}var vr=(0,mr.h)({"Mod-b":(0,fr.w9)(Nn.marks.bold),"Mod-i":(0,fr.w9)(Nn.marks.italic),"Mod-u":(0,fr.w9)(Nn.marks.underline),"Mod-Shift-s":(0,fr.w9)(Nn.marks.strike),"Mod-e":(0,fr.w9)(Nn.marks.code),"Shift-Enter":function(e,t){var n=Nn.nodes.hard_break,r=e.selection.$from;return!!r.parent.canReplaceWith(r.index(),r.index(),n)&&(t(e.tr.replaceSelectionWith(n.create())),!0)},"Mod-z":xr((0,fr.QF)(pr.dU,qt.Yw)),"Shift-Mod-z":xr(qt.KX)}),wr=(0,pr.Hw)({rules:[br(/(?<=[^*\n]|^)\*\*\*([^*\n]+)\*\*\*$/,[Nn.marks.bold,Nn.marks.italic]),br(/(?<=[^*\n]|^)\*\*([^*\n]+)\*\*$/,Nn.marks.bold),br(/(?<=[^_\n]|^)__([^_\n]+)__$/,Nn.marks.bold),br(/`(.+)`$/,Nn.marks.code),br(/(?<=[^*\n]|^)\*([^*\n]+)\*$/,Nn.marks.italic),br(/(?<=[^_\n]|^)_([^_\n]+)_$/,Nn.marks.italic),br(/~~(.+)~~$/,Nn.marks.strike),new pr.VK(/->$/,"→"),new pr.VK(/=>$/,"⇒"),new pr.VK(/!=$/,"≠"),new pr.VK(/--$/,"—"),(0,Xt.Oi)(Xt._V,Nn.nodes.math_inline)]});function xr(e){return function(t,n,r){return!!r.hasFocus()&&e(t,n,r)}}function kr(){var e=!1,t=!1;function n(e){t=1===e.button}return new Jt.Sy({view:function(){return{update:function(){e||(window.addEventListener("mousedown",n),e=!0)},destroy:function(){window.removeEventListener("mousedown",n)}}},props:{handleDOMEvents:{paste:function(e,n){return t&&(n.preventDefault(),t=!1),!1}}}})}var Er="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function Or(){}function Tr(e){return!!e.$from.sameParent(e.$to)&&e.$from.parent.isTextblock}function Cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSelectionCreate,n=void 0===t?Or:t,r=e.onSelectionRemove,o=void 0===r?Or:r;function a(e){if(e){var t=e.state;if(!t.selection.empty&&Tr(t.selection)){var r=e.coordsAtPos(t.selection.from),o=e.coordsAtPos(t.selection.to),a=window.getSelection();if(0===a.rangeCount)return;var i=a.getRangeAt(0).getBoundingClientRect();n({from:t.selection.from,to:t.selection.to,fromRect:r,toRect:o,selectionBoundingRect:i})}}}return new Jt.Sy({props:{handleDOMEvents:{mouseup:function(e){return a(e),!1},keydown:Er?function(e,t){return t.metaKey&&"a"===t.key&&setTimeout((function(){return a(e)})),!1}:function(e,t){return t.ctrlKey&&"a"===t.key&&setTimeout((function(){return a(e)})),!1}}},view:function(){return{update:function(e,t){t&&!t.selection.empty&&e.state.selection.empty&&o()}}}})}function Sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jr=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Sr(this,"markName",void 0),Sr(this,"handler",void 0),this.markName=t,this.handler=n},Ir=n(854);function Pr(e){return Nn.mark(Nn.marks.link,{href:e})}function Br(e){if("function"!=typeof e&&null!=e)throw console.log(e),new Error("It is now allowed to pass in a thing that is not a function, undefined, or null to useFunctionRef")}function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){Rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(0,Ir.zR)("jade");var Nr={id:"pmtext",name:"PMText",component:function(e){var t,n,o,a=e.database,i=e.factoryRegistry,c=e.concept,l=e.blockId,s=e.viewMode,d=e.readOnly,u=e.onChange,f=e.onReplace,m=e.onInteractionStart,p=e.onInteractionEnd,y=e.dispatchAction,g=(0,r.useContext)(ge).openExternal,h=Mr((0,r.useState)(!1),2),v=h[0],w=h[1],x=Mr((0,r.useState)(!1),2),k=x[0],E=x[1],O=Mr((0,r.useState)(!1),2),T=O[0],C=O[1],S=(0,r.useRef)(null),j=(0,r.useRef)(null),I=function(e){var t=(0,r.useRef)(null),n=Wn((0,r.useState)(!1),2),o=n[0],a=n[1],i=Wn((0,r.useState)({top:0,left:0}),2),c=i[0],l=i[1],s=Wn((0,r.useState)(new Map),2),d=s[0],u=s[1],f=function(e){return!!e.get(Nn.marks.bold)}(d),m=function(e){return!!e.get(Nn.marks.italic)}(d),p=function(e){return!!e.get(Nn.marks.strike)}(d),y=function(e){return!!e.get(Nn.marks.underline)}(d),b=function(e){return!!e.get(Nn.marks.code)}(d),g=function(t){return function(){e.focus(),function(e,t,n,r){var o=t.from,a=t.to;n.get(r)?e.dispatch(e.state.tr.removeMark(o,a,r)):e.dispatch(e.state.tr.addMark(o,a,e.state.schema.mark(r)))}(e,e.state.selection,d,t)}},h=g(Nn.marks.bold),v=g(Nn.marks.italic),w=g(Nn.marks.strike),x=g(Nn.marks.underline),k=g(Nn.marks.code),E=Wn((0,r.useState)(void 0),2),O=E[0],T=E[1],C=Wn((0,r.useState)(""),2),S=C[0],j=C[1],I=(0,r.useCallback)((function(e){u(function(e){return Fn(Hn(e))}(e)),T(function(e){var t=_n(mn,e,Vn);return t&&t.attrs.color}(e)),j(function(e){var t=_n(Rn,e,(function(e,t){return e.href===t.href}));return t&&t.attrs?t.attrs.href:""}(e))}),[]);return{textActionMenuRef:t,showTextActionMenu:o,setShowTextActionMenu:a,textActionMenuPos:c,setTextActionMenuPos:l,boldActive:f,italicActive:m,strikeActive:p,underlineActive:y,codeActive:b,activeHighlightColor:O,activeLink:S,toggleBold:h,toggleItalic:v,toggleStrike:w,toggleUnderline:x,toggleCode:k,setHighlight:function(t){e.focus(),function(e,t,n){var r=Nn.mark(mn,{color:n});n?e.dispatch(e.state.tr.addMark(t.from,t.to,r)):e.dispatch(e.state.tr.removeMark(t.from,t.to,Nn.marks.highlight))}(e,e.state.selection,t)},setLink:function(t){var n,r,o,a;e.focus(),n=e,r=e.state.selection,o=t,a=Nn.mark(Rn,{href:o}),o?n.dispatch(n.state.tr.addMark(r.from,r.to,a)):n.dispatch(n.state.tr.removeMark(r.from,r.to,Nn.marks.link))},turnIntoLatex:function(){var t,n,r,o,i,c;e.focus(),t=e,n=e.state.selection,r=t.state.doc.textBetween(n.from,n.to),o=Nn.node("math_inline",void 0,Nn.text(r)),i=Yt.HY.from(o),c=new Yt.p2(i,0,0),t.dispatch(t.state.tr.replaceRange(n.from,n.to,c)),a(!1)},updateMenuState:I}}(j.current),P=I.textActionMenuRef,B=I.showTextActionMenu,A=I.setShowTextActionMenu,z=I.textActionMenuPos,R=I.setTextActionMenuPos,M=I.boldActive,D=I.italicActive,L=I.strikeActive,H=I.underlineActive,F=I.codeActive,$=I.activeHighlightColor,_=I.activeLink,V=I.toggleBold,U=I.toggleItalic,W=I.toggleStrike,K=I.toggleUnderline,J=I.toggleCode,G=I.setHighlight,Y=I.setLink,q=I.turnIntoLatex,X=I.updateMenuState,Z=(0,r.useRef)(null),Q=function(e,t,n,o,a){var i=cr((0,r.useState)(!1),2),c=i[0],l=i[1],s=cr((0,r.useState)(""),2),d=s[0],u=s[1],f=cr((0,r.useState)({from:0,to:0}),2),m=f[0],p=f[1],y=cr((0,r.useState)(rr.SlashCommands),2),b=y[0],g=y[1],h=cr((0,r.useState)(0),2),v=h[0],w=h[1],x=(0,r.useMemo)((function(){return t.getContentFactories().map((function(e){return{id:e.id,title:e.name}}))}),[t]),k=(0,r.useCallback)((function(e){l(!0),g(e)}),[]),E=(0,r.useCallback)((function(){l(!1),u(""),p({from:0,to:0})}),[]),O=(0,r.useMemo)((function(){if(b===rr.SlashCommands){var n=x.filter((function(e){return e.title.toLocaleLowerCase().includes(d.toLocaleLowerCase())}));return[{id:or.TurnInto,title:"Turn into",items:d?n:x}]}var r={id:or.LinkTo,title:"Insert link to",items:d?e.searchConceptByText(d,{limit:6}).map((function(e){return Zn(t)(e.item)})).filter((function(e){return!!e.title})):e.getAllConcepts().filter(Xn).sort(Qn).slice(0,6).map(Zn(t))},o={id:or.CreateAndLinkTo,title:"Create and link to",items:[{id:"create_and_link_to",title:'Create "'.concat(d,'"')}]};return d?[r,o]:[r]}),[d,b,x,e,t]),T=(0,r.useCallback)((function(e,t){u(e),p(t)}),[]),C=(0,r.useCallback)((function(e){var n=m.from,r=m.to,o=a.state.doc.slice(n,r),i=function(e){return Fn(Ln(e))}(o),c=t.getConceptString(e),l=Nn.text(c,Array.from(i.keys()).filter((function(e){return e.name!==Rn})).map((function(e){return e.name===mn?Nn.mark(e,{color:Un(o)}):Nn.mark(e)})).concat([Nn.mark(Nn.marks.link,{href:ct(e)})])),s=Yt.HY.from(l),d=new Yt.p2(s,0,0);a.dispatch(a.state.tr.replaceRange(n,r,d))}),[a,t,m]),S=(0,r.useCallback)((function(){var t=sr(O),r=cr(t[v]&&t[v].key,2),a=r[0],i=r[1],c=O[a],l=c&&c.items[i];if(E(),l)if(b===rr.SlashCommands)n(),o(l.id);else if(c.id===or.LinkTo){var s=e.getConcept(l.id);C(s)}else if(c.id===or.CreateAndLinkTo){var u=wt("pmtext",{summary:{type:"pmtext",data:{initialized:!0,data:{type:"doc",content:[{type:"text",text:d}]}}}});C(u),e.createConcept(u)}}),[e,E,n,o,C,d,O,b,v]),j=(0,r.useCallback)((function(e,t){var n=sr(O).findIndex((function(n){return n.key[0]===e&&n.key[1]===t}));-1!==n&&w(n)}),[O]),I=(0,r.useCallback)((function(){w((function(e){return function(e,t){var n=sr(t);return e>0?e-1:n.length-1}(e,O)}))}),[O]),P=(0,r.useCallback)((function(){w((function(e){return function(e,t){return e<sr(t).length-1?e+1:0}(e,O)}))}),[O]);return(0,r.useEffect)((function(){var e,t,n;!c&&a&&(e=a.state,t=a.dispatch.bind(null),(n=ar.getState(e))&&n.active&&t&&t(e.tr.setMeta(ar,{stopReporting:!0})))}),[c,a]),(0,r.useEffect)((function(){sr(O)[v]||w(0)}),[O,v]),{models:{showSuggestionMenu:c,optionGroups:O,suggestFor:b,selectedOptionIndex:v},operations:{openSuggestionMenu:k,closeSuggestionMenu:E,updateKeyword:T,confirmOption:S,selectOption:j,selectPrevOption:I,selectNextOption:P}}}(a,i,p,f,j.current),ee=Q.models,te=Q.operations,ne=ee.showSuggestionMenu,re=ee.optionGroups,oe=ee.suggestFor,ae=ee.selectedOptionIndex,ie=te.openSuggestionMenu,ce=te.closeSuggestionMenu,de=te.updateKeyword,ue=te.confirmOption,fe=te.selectOption,pe=te.selectPrevOption,ye=te.selectNextOption,be=Mr((0,r.useState)({top:0,right:0,bottom:0,left:0}),2),he=be[0],ve=be[1],we=(Br(t),(0,r.useRef)((n=function(){},o=n,{get current(){return o},set current(e){Br(e),o=e||n}})).current);(0,r.useEffect)((function(){we.current=function(e,t){return e.composing||(!ne||"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Enter"!==t.key||t.preventDefault(),"Block"!==s||ne||t.shiftKey||"Enter"!==t.key||(y({type:le.ConceptCreate,data:{posType:N.Normal,intent:se.Below,blockId:l}}),p(),C(!1))),!1}}),[l,y,ne,p,s]),(0,r.useEffect)((function(){var e=!!j.current&&j.current.dom;function t(t){var n=P.current,r=Z.current,o=!!e&&e.contains(t.target),a=!!n&&n.contains(t.target),i=!!r&&r.contains(t.target);o||a||i||(console.log("PMText: interaction end via mousedown"),A(!1),ce(),window.getSelection().removeAllRanges(),p(),C(!1))}if(T)return window.addEventListener("mousedown",t),function(){return window.removeEventListener("mousedown",t)}}),[ce,p,A,T,P]),(0,r.useEffect)((function(){var e,t,n,r=c.summary.data.data,o=Jt.yy.create({schema:Nn,doc:hr(r,Nn),plugins:[vr,wr,(0,qt.m8)(),kr(),Cr({onSelectionCreate:function(e){R({top:e.selectionBoundingRect.top-50,left:e.selectionBoundingRect.left-40}),A(!0)},onSelectionRemove:function(){A(!1)}}),ir({debug:!1,rules:[{trigger:/\/$/,onTrigger:function(e){ie(rr.SlashCommands),ve(e.keywordCoords.from),de(e.keyword,{from:e.keywordRange.from-e.triggerString.length,to:e.keywordRange.to})},onKeywordChange:function(e){de(e.keyword,{from:e.keywordRange.from-e.triggerString.length,to:e.keywordRange.to})},onKeywordStop:ce},{trigger:/(\[\[|@)$/,onTrigger:function(e){ie(rr.Mention),ve(e.keywordCoords.from),de(e.keyword,{from:e.keywordRange.from-e.triggerString.length,to:e.keywordRange.to})},onKeywordChange:function(e){de(e.keyword,{from:e.keywordRange.from-e.triggerString.length,to:e.keywordRange.to})},onKeywordStop:ce}]}),(e={rules:[new jr(Rn,(function(e){if(st(e.href)){var t=lt(e.href);y({type:le.BlockOpenAsCanvas,data:{id:t.conceptId,focusBlockId:t.blockId}})}else g(e.href)}))]},t=e.rules,n=void 0===t?[]:t,new Jt.Sy({props:{handleDOMEvents:{mousedown:function(e,t){return 0!==t.button||window.addEventListener("mouseup",(function r(o){window.removeEventListener("mouseup",r);var a=me(t),i=me(o);if(!(b(a,i)>3)){var c=e.posAtCoords({left:i.x,top:i.y});if(c){var l=e.state.doc.nodeAt(c.pos);l&&l.marks.forEach((function(e){var t=n.find((function(t){return t.markName===e.type.name}));t&&t.handler(e.attrs,o)}))}}})),!1},click:function(e,t){return t.preventDefault(),!1},dragstart:function(e,t){return t.preventDefault(),!1}}}})),Xt.c1,new Jt.Sy({props:{handlePaste:function(e,t){var n=Array.from(t.clipboardData.items);if(n.length>1)return!1;var r=n[0].type;if("text/plain"!==r)return!1;var o=t.clipboardData.getData(r);if(!(0,Ir.Bu)(o))return!1;var a=o,i=e.state.selection;if(i.from===i.to){var c=Nn.text(a,[Pr(a)]),l=e.state.tr.insert(i.from,c);return e.dispatch(l),!0}var s=i.content(),d=!0;if(s.content.forEach((function(e){e.isText||(d=!1)})),!d)return!1;var u=Pr(a),f=e.state.tr.addMark(i.from,i.to,u);return e.dispatch(f),!0}}})]}),a=function(e,t){var n=new Gt.tk(e,{state:t,dispatchTransaction:function(e){var t=n.state.apply(e);n.updateState(t),w(gr(t.doc)),X(n.state.selection),e.steps.length>0&&!e.getMeta("from_upstream")&&u({initialized:!0,data:t.doc.toJSON()})},handleDOMEvents:{focusin:function(){return console.log("PMText: interaction start via focusin"),m(),C(!0),!1},keydown:function(e,t){return we.current(e,t)}},editable:function(){return!d},handleScrollToSelection:function(){return!0}});return n}(S.current,o);return c.summary.data.initialized||(a.focus(),u({initialized:!0})),j.current=a,w(gr(o.doc)),E(!0),function(){a.destroy()}}),[]),(0,r.useEffect)((function(){if(k){var e=j.current,t=e.state;if(!e.dom.contains(document.activeElement)){var n=hr(c.summary.data.data,Nn),r=new Jt.C1(t.doc),o=r.from,a=r.to;n&&(o||a||!gr(n))&&e.dispatch(t.tr.replaceRangeWith(o,a,n).setMeta("from_upstream",!0))}}}),[c.summary.data.data,k]),(0,r.useEffect)((function(){k&&j.current.setProps({editable:function(){return!d}})}),[d,k]);var xe=r.createElement("div",{ref:S,className:Zt.EditorContainer,"data-view-mode":e.viewMode},v&&r.createElement("div",{className:Zt.Placeholder,"data-view-mode":e.viewMode},T?"Type '/' for commands":"Wanna capture something"));switch(e.viewMode){case"NavItem":return r.createElement("div",{className:Zt.PMTextNavItem},xe);case"Block":return r.createElement(r.Fragment,null,xe,ne?e.createOverlay(r.createElement(De,{near:he},r.createElement(ur,{ref:Z,optionGroups:re,selectedOptionIndex:ae,width:oe===rr.SlashCommands?150:350,onConfirmOption:ue,onCloseMenu:ce,onSelectOption:fe,onSelectPrevOption:pe,onSelectNextOption:ye}))):r.createElement(r.Fragment,null),B&&e.createOverlay(r.createElement("div",{style:zr({position:"absolute"},z)},r.createElement(An,{ref:P,boldActive:M,italicActive:D,strikeActive:L,underlineActive:H,codeActive:F,activeHighlightColor:$,activeLink:_,toggleBold:V,toggleItalic:U,toggleStrike:W,toggleUnderline:K,toggleCode:J,turnIntoLatex:q,setHighlight:G,setLink:Y}))));case"CardTitle":return r.createElement("div",{className:Zt.PMTextCardTitle},xe);default:return r.createElement("span",null,"Unknown ",r.createElement("code",null,"viewMode"),": ",e.viewMode)}},toText:function(e){var t,n=null===(t=e.summary.data)||void 0===t?void 0:t.data;return n?Yt.NB.fromJSON(Nn,n).textContent:""}},Lr=(0,a.zE)({NavItem:{fontSize:".8rem",padding:i.paddings.navComfort,maxHeight:"100%"},Block:{padding:i.paddings.blockComfort},CardTitle:{margin:"auto",width:"100%"}}),Hr=n(643),Fr=n(872),$r=n(688);function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ur=function(e,t){!function(e,t){var n=Hr.ML.marks(e);return!!n&&!0===n[t]}(e,t)?Hr.ML.addMark(e,t,!0):Hr.ML.removeMark(e,t)},Wr=function(e){return e.children},Kr=function(e){return r.createElement("pre",e.attributes,r.createElement("code",null,e.children))},Jr=function(e){var t=e.attributes,n=e.leaf,o=e.children;return n.bold&&(o=r.createElement("strong",null,o)),n.code&&(o=r.createElement("code",null,r.createElement("style",{jsx:!0},"\n          code {\n            border-radius: 5px;\n            background-color: rgba(135, 131, 120, 0.15);\n            color: #ff4081;\n            font-size: 0.9em;\n            padding: 0em 0.4em;\n            word-break: break-word;\n          }\n        "),o)),n.italic&&(o=r.createElement("em",null,o)),n.underline&&(o=r.createElement("u",null,o)),r.createElement("span",t,o)},Gr=function(e){var t=(0,r.useMemo)((function(){return(0,Fr.BU)((0,$r.VC)((0,Hr.Jh)()))}),[]),n=_r((0,r.useState)(e.content),2),o=n[0],a=n[1],i=(0,r.useCallback)((function(e){switch(e.element.type){case"code":return r.createElement(Kr,e);default:return r.createElement(Wr,e)}}),[]),c=(0,r.useCallback)((function(e){return r.createElement(Jr,e)}),[]);(0,r.useEffect)((function(){a(e.content)}),[e.content]),(0,r.useEffect)((function(){e.forceFocus&&(console.log("Focus Slate programmatically"),t.selection={anchor:{path:[0,0],offset:0},focus:{path:[0,0],offset:0}},Fr.F3.focus(t))}),[t,e.forceFocus]);var l=_r((0,r.useState)(void 0),2),s=l[0],d=l[1];return r.createElement(Fr.mH,{editor:t,value:o,onChange:function(t){a(t),e.onChange(t)}},r.createElement(Fr.CX,{readOnly:e.readOnly,renderElement:i,renderLeaf:c,onKeyDown:function(e){"["===e.key?(e.preventDefault(),t.insertText("[]"),Hr.YR.move(t,{distance:1,unit:"character",reverse:!0})):"`"===e.key&&e.ctrlKey?(e.preventDefault(),Ur(t,"code")):"b"===e.key&&e.ctrlKey?(e.preventDefault(),Ur(t,"bold")):"i"===e.key&&e.ctrlKey?(e.preventDefault(),Ur(t,"italic")):"Enter"===e.key&&(e.preventDefault(),e.shiftKey&&t.insertText("\n"))},onFocus:e.onFocus,onBlur:function(n){n.target!==document.activeElement&&(Fr.F3.deselect(t),e.onBlur())},onDOMBeforeInput:function(e){console.log(e),d({data:e.data,isComposing:e.isComposing}),s&&s.isComposing&&e.isComposing&&s.data===e.data&&console.log("Slate is ready to crash.")},placeholder:"Type here..."}))};function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qr={id:"text",name:"SlateText",component:function(e){var t,n,o,a=e.readOnly,i=e.viewMode,c=e.concept,l=e.onChange,s=e.onInteractionStart,d=e.onInteractionEnd,u=(n=(0,r.useState)({slateData:(t=c.summary.data,t.initialized?t.data:[{type:"paragraph",children:[{text:""}]}]),isNewText:!c.summary.data.initialized}),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(n,o)||function(e,t){if(e){if("string"==typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yr(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=u[0],m=u[1],p=(0,r.useCallback)((function(e){m({slateData:e,isNewText:!1}),l({initialized:!0,data:e})}),[l]),y=r.createElement(Gr,{readOnly:a,forceFocus:f.isNewText,content:f.slateData,onChange:p,onFocus:s,onBlur:d});switch(i){case"NavItem":return r.createElement("div",{className:Lr.NavItem},y);case"Block":return r.createElement("div",{className:Lr.Block},y);case"CardTitle":return r.createElement("div",{className:Lr.CardTitle},y);default:return r.createElement("span",null,"Unknown ",r.createElement("code",null,"viewMode"),": ",i)}},toText:function(e){return"slatetext "+JSON.stringify(e.summary.data)}},Xr={fontSize:".8rem",padding:i.paddings.navComfort,maxHeight:"100%",color:i.colors.neutral50};function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(n),!0).forEach((function(t){eo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var to=(0,a.zE)({ImageNavItem:{height:"100%",maxHeight:"inherit",overflow:"hidden",$nest:{"&>img":{width:"100%",height:"100%",maxHeight:"inherit",objectFit:"contain"}}},ImageErrorMsg:Qr({},Xr),ImageBlockViewer:{display:"flex",height:"100%",overflow:"hidden",$nest:{"&>img":{width:"100%"},"&>img[data-view-mode='CardTitle']":{height:"100%",objectFit:"contain",objectPosition:"left center"},"& > button":Qr(Qr({},_e),{},{position:"absolute",top:12,right:20,opacity:0,transition:"background 0.1s ease-in-out, opacity 0.15s ".concat(i.easings.easeInOutCubic)}),"&:hover > button":{opacity:1}}},ImageBlockChooser:{padding:i.paddings.blockComfort,paddingBottom:".7rem",$nest:{"&>input":{width:"100%"}}},Title:{fontWeight:600,marginBottom:".3rem"},ImgLinkInput:Qr(Qr({},Ue),{},{marginBottom:".5rem"}),ImgLinkButton:Qr(Qr({},Ve),{},{marginBottom:".7rem"}),ChooseImgBtn:Qr(Qr({},Ve),{},{$nest:Qr(Qr({},Ve.$nest),{},{"& > input":{display:"none"}})}),sizeWarning:{color:i.colors.neutral40,fontSize:"0.7rem",marginBottom:"0.5rem"}});function no(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ro(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oo={NOT_LOADED:Symbol("notloaded"),LOADED:Symbol("loaded"),ERROR:Symbol("error")},ao={id:"image",name:"Image",component:function(e){var t=e.viewMode,n=e.concept,o=e.onInteractionStart,a=e.onInteractionEnd,i=e.onChange,c=n.summary.data;c.imgData&&i({imgSrc:c.imgData});var l=no((0,r.useState)(c.imgSrc?oo.LOADED:oo.NOT_LOADED),2),s=l[0],d=l[1],u=no((0,r.useState)(c.imgSrc),2),f=u[0],m=u[1],p=no((0,r.useState)(""),2),y=p[0],b=p[1],g=(0,r.useRef)(null);switch((0,r.useEffect)((function(){d(c.imgSrc?oo.LOADED:oo.NOT_LOADED),m(c.imgSrc)}),[c]),t){case"NavItem":return s===oo.LOADED?r.createElement("div",{className:to.ImageNavItem},r.createElement("img",{src:f,draggable:!1})):y?r.createElement("div",{className:to.ImageErrorMsg},y):r.createElement("div",{className:to.ImageErrorMsg},"An empty image");default:switch(s){case oo.LOADED:return r.createElement("div",{className:to.ImageBlockViewer},r.createElement("img",{src:f,draggable:!1,"data-view-mode":t}),r.createElement("button",{onClick:function(){return i({imgSrc:""})}},"Replace"));case oo.NOT_LOADED:return r.createElement("div",{className:to.ImageBlockChooser},r.createElement("div",{className:to.Title},"From the Web"),r.createElement("input",{ref:g,className:to.ImgLinkInput,placeholder:"Paste the image link...",type:"url",onFocus:o,onBlur:a}),r.createElement("button",{className:to.ImgLinkButton,onClick:function(){i({imgSrc:g.current.value})}},"Embed image"),r.createElement("div",{className:to.Title},"From your computer"),r.createElement("div",{className:to.sizeWarning},"Don't upload large images, currently the database (window.localStorage) only have 5MB quota for everything."),r.createElement("label",{className:to.ChooseImgBtn},r.createElement("input",{type:"file",accept:".apng, .avif, .gif,image/jpeg, .png, .svg, .webp, .bmp",onChange:function(e){var t=e.target.files;if(t){var n=t[0];n.type&&-1===n.type.indexOf("image")?console.log("File is not an image.",n.type,n):function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(e){var n=e.target.result.toString();t(n)})),r.addEventListener("error",(function(e){n(e)})),r.readAsDataURL(e)}))}(n).then((function(e){i({imgSrc:e})})).catch((function(e){b(e),d(oo.ERROR)}))}else console.log('"e.target.files" is null.')}}),r.createElement("span",null,"Choose an image")));default:return r.createElement("div",{className:to.ImageErrorMsg},y)}}},toText:function(e){var t=e.summary.data.imgSrc;return"image ".concat((null==t?void 0:t.slice(0,1024))||"")}};function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?io(Object(n),!0).forEach((function(t){lo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var so=(0,a.zE)({LinkInput:co(co({},Ue),{},{width:"100%"}),LinkConfirmButton:co({},Ve),ControlButton:co(co({},_e),{},{borderRadius:0,$nest:co(co({},_e.$nest),{},{"&:not(:last-child)":{borderRight:"1px solid ".concat(i.colors.neutral40)},"&:first-child":{borderTopLeftRadius:i.borders.smallRadius,borderBottomLeftRadius:i.borders.smallRadius},"&:last-child":{borderTopRightRadius:i.borders.smallRadius,borderBottomRightRadius:i.borders.smallRadius}})}),FrameWrapperAutoHeight:{position:"relative",paddingBottom:"56.25%",paddingTop:25,height:0},FrameWrapperFixedHeight:{height:"100%"},fillParentHeight:{height:"100%"}}),uo=(0,a.zE)({ControlButtonGroup:{position:"absolute",top:12,right:20,opacity:0,transition:"opacity 0.15s ".concat(i.easings.easeInOutCubic),boxShadow:"".concat(i.colors.neutral90," 0px 0px 2px"),borderRadius:i.borders.smallRadius}}),fo=(0,a.zE)({EmbedBlockDisplay:{position:"relative",$nest:lo({},"&:hover > .".concat(uo.ControlButtonGroup),{opacity:1})},EmbedBlockEmpty:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:i.paddings.blockComfort,height:"100%",$nest:{"& > *":{display:"block"},"& > input":{marginBottom:".7rem",maxWidth:400},"& > button":{width:180,maxWidth:"100%"}}},emptyNavItem:co({},Xr)}),mo=co(co(co({},so),uo),fo);function po(e){var t=e.searchParams.get("t");if(t){var n=/\d+/.exec(t);return n&&n[0]}}function yo(e){if(e.startsWith("https://www.youtube.com/watch?v=")){var t=new URL(e),n=t.searchParams.get("v"),r=po(t);return"https://www.youtube.com/embed/".concat(n).concat(r?"?start=".concat(r):"")}if(e.startsWith("https://youtu.be/")){var o=new URL(e),a=o.pathname.split("/").pop(),i=po(o);return"https://www.youtube.com/embed/".concat(a).concat(i?"?start=".concat(i):"")}return e}function bo(e){return e.startsWith("https://twitter.com/")}function go(e){if(bo(e))return new URL(e).pathname.split("/").pop()}var ho=(0,a.zE)({iframe:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},noInteraction:{pointerEvents:"none"}}),vo=r.forwardRef((function(e,t){var n=e.url,o=e.noInteraction,i=e.scale,c=void 0===i?1:i,l="".concat(100/c,"%");return r.createElement("iframe",{ref:t,className:(0,a.Sh)(ho.iframe,o&&ho.noInteraction),style:{width:l,height:l,transform:"scale(".concat(c,")"),transformOrigin:"top left"},width:l,height:l,src:yo(n),frameBorder:"0",loading:"lazy",scrolling:o?"no":"auto",allow:"clipboard-write; encrypted-media; picture-in-picture",allowFullScreen:!0})})),wo=r.memo(vo);function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ko=[];function Eo(e){var t,n,o=e.id,a=e.options,i=e.placeholder,c=e.className,l=e.protocol,s=e.onTweetLoadSuccess,d=e.onTweetLoadError,u=(t=(0,r.useState)(!0),n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return xo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xo(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],f=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=function(){window.twttr.ready().then((function(e){var t=e.widgets;f.current&&(console.log("clear"),f.current.innerHTML=""),t.createTweetEmbed(o,f.current,a).then((function(e){e.style.marginTop="0px",e.style.marginBottom="0px",s&&s(e)})).catch(d)})).catch(d)},t=window.twttr;if(t&&t.ready)e();else{var n=window.location.protocol.indexOf("file")>=0;!function(e,t){if(0===ko.length){ko.push(t);var n=document.createElement("script");n.setAttribute("src",e),n.onload=function(){return ko.forEach((function(e){return e()}))},document.body.appendChild(n)}else ko.push(t)}("".concat(n?l:"","//platform.twitter.com/widgets.js"),e)}}),[o]),r.createElement("div",{ref:f,className:c},u&&i)}function Oo(){return(Oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var To=(0,a.zE)({container:{height:"100%"},overflowAuto:{overflow:"auto"},overflowHidden:{overflow:"hidden"},disableIframeInteraction:{$nest:{"& iframe":{pointerEvents:"none"}}}});function Co(e){return r.createElement("div",{className:(0,a.Sh)(To.container,e.noInteraction?To.overflowHidden:To.overflowAuto)},r.createElement(Eo,Oo({},e,{placeholder:"loading",protocol:"https:",className:(0,a.Sh)(e.noInteraction&&To.disableIframeInteraction,e.className)})))}function So(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jo(e){var t,n,o=e.blockId,i=e.concept,c=e.onChange,l=e.onInteractionStart,s=e.onInteractionEnd,d=Q((0,r.useContext)(pt).blocks,o),u=d&&d.mode===L.Resizing,f=d&&d.mode===L.Focusing,m=(0,r.useContext)(ge),p=m.openExternal,y=m.dispatchAction,g=i.summary.data,h=g&&g.url?g.url:"",v=(0,r.useRef)(),w=(t=(0,r.useState)(!0),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return So(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?So(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=w[0],k=w[1],E=!x||u||!f,O=function(e){var t=e.onFocus,n=e.onBlur,o=(0,r.useRef)(null),a=(0,r.useCallback)((function(e){o.current=e}),[]),i=(0,r.useRef)({x:0,y:0}),c=(0,r.useRef)(!1);return(0,r.useEffect)((function(){function e(e){return o.current&&o.current.contains(e)}function r(t){i.current=me(t),c.current=!1,!e(t.target)&&n()}function a(e){var t=me(e);b(i.current,t)>3&&(c.current=!0)}function l(n){var r=e(n.target);!c.current&&r&&t()}return window.addEventListener("mousedown",r),window.addEventListener("touchstart",r),window.addEventListener("mouseup",l),window.addEventListener("touchend",l),window.addEventListener("touchcancel",l),window.addEventListener("mousemove",a),window.addEventListener("touchmove",a),function(){window.removeEventListener("mousedown",r),window.removeEventListener("touchstart",r),window.removeEventListener("mouseup",l),window.removeEventListener("touchend",l),window.removeEventListener("touchcancel",l),window.removeEventListener("mousemove",a),window.removeEventListener("touchmove",a)}}),[t,n]),{setNodeRef:a}}({onFocus:l,onBlur:s}).setNodeRef,T=(0,r.useCallback)((function(){window.removeEventListener("mouseup",T),window.removeEventListener("touchend",T),k(!0)}),[]),C=(0,r.useCallback)((function(){k(!1),window.addEventListener("mouseup",T),window.addEventListener("touchend",T)}),[T]),S=(0,r.useCallback)((function(){c({initialized:!0,url:void 0}),y({type:le.BlockSetSize,data:{id:o,size:{w:300,h:"auto"}}})}),[o,c,y]),j=(0,r.useCallback)((function(){c({initialized:!0,url:v.current.value}),y({type:le.BlockSetSize,data:{id:o,size:{w:400,h:225}}})}),[o,c,y]);return h?r.createElement("div",{className:(0,a.Sh)(mo.EmbedBlockDisplay,"auto"!==d.size.h&&mo.fillParentHeight)},r.createElement("div",{ref:O,className:"auto"===d.size.h?mo.FrameWrapperAutoHeight:mo.FrameWrapperFixedHeight},bo(h)?r.createElement(Co,{id:go(h),noInteraction:E}):r.createElement(wo,{url:h,noInteraction:E})),!f&&r.createElement("div",{className:mo.ControlButtonGroup},r.createElement("button",{className:mo.ControlButton,style:{cursor:"move"},onMouseDown:C,onTouchStart:C},"Move"),r.createElement("button",{className:mo.ControlButton,onClick:S},"Replace"),r.createElement("button",{className:mo.ControlButton,onClick:function(){return p(h)}},"Original"),r.createElement("button",{className:mo.ControlButton,onClick:function(){return it(h)}},"Copy link"))):r.createElement("div",{className:mo.EmbedBlockEmpty},r.createElement("input",{ref:v,className:mo.LinkInput,placeholder:"Paste in https://...",type:"url",onFocus:l,onBlur:s,onKeyDown:function(e){return"Enter"===e.key&&j()}}),r.createElement("button",{className:mo.LinkConfirmButton,onClick:j},"Embed link"))}function Io(e){var t=e.concept,n=e.blockId,o=e.viewMode,i=t.summary.data,c=i&&i.url?i.url:"",l=Q((0,r.useContext)(pt).blocks,n);return c?r.createElement("div",{className:(0,a.Sh)(mo.EmbedBlockDisplay,"auto"!==l.size.h&&mo.fillParentHeight)},r.createElement("div",{className:"auto"===l.size.h?mo.FrameWrapperAutoHeight:mo.FrameWrapperFixedHeight},bo(c)?r.createElement(Co,{id:go(c),noInteraction:!0}):r.createElement(wo,{url:c,noInteraction:!0,scale:"NavItem"===o?.3:1}))):r.createElement("div",{className:mo.emptyNavItem},"An empty embed")}function Po(e){switch(e.viewMode){case"NavItem":return r.createElement(Io,e);default:return r.createElement(jo,e)}}var Bo={id:"embed",name:"Embed",component:r.memo(Po),toText:function(e){var t=e.summary.data.url;return"embed ".concat(t||"")}},Ao=n(982);const zo={JADE_VER:"0.3.6",JADE_LAST_UPDATED:"2021.12.26",JADE_DB_VER:5};var Ro=(0,a.zE)({header:{$nest:{"& > *":{margin:0},"& > h1, & > h3":{fontWeight:500}}},appName:{display:"flex",alignItems:"center",$nest:{"& > img":{height:"1.3em",marginRight:"0.5rem"},"& > span":{transform:"translateY(-0.2rem)"}}},buildInfo:{opacity:.7,fontSize:"1rem",paddingLeft:"0.25rem"}});function Mo(){return r.createElement("header",{className:Ro.header},r.createElement("h1",{className:Ro.appName},r.createElement("img",{src:Ao}),r.createElement("span",null,"Jade")),r.createElement("h3",{className:Ro.buildInfo},"v",zo.JADE_VER," (",zo.JADE_LAST_UPDATED,")"))}var Do=(0,a.zE)({blockCounter:{display:"flex",alignItems:"flex-end",margin:0,lineHeight:1},count:{fontSize:"1.6rem",color:i.colors.uiPrimary},text:{display:"flex",flexDirection:"column",marginLeft:"0.5rem"},firstLine:{fontSize:"0.9rem"},secondLine:{fontSize:"0.7rem"}});function No(e){var t=e.value;return r.createElement("div",{className:Do.blockCounter},r.createElement("div",{className:Do.count},t),r.createElement("div",{className:Do.text},r.createElement("div",null,"block",t>1?"s":""),r.createElement("div",{className:Do.secondLine},"on this canvas")))}var Lo=(0,a.zE)({canvasMonitor:{$nest:{"& code":{color:i.colors.neutral10,background:i.colors.neutral90,fontSize:".9em",padding:".1rem .3rem",borderRadius:".3rem",transitionProperty:"color, background",transitionDuration:"0.2s",transitionTimingFunction:"".concat(i.easings.easeInOutCubic)},"& p":{marginTop:0,marginBottom:"0.3em"},"& p:last-child":{marginBottom:0}}},glowCode:{$nest:{"& code":{color:i.colors.uiText,background:i.colors.uiPrimaryAttractive}}}});function Ho(e){var t=e.focus,n=e.scale,o=e.selecting,a=e.selectedCount;return r.createElement("div",{className:Lo.canvasMonitor},r.createElement("p",null,"Focusing"," ",r.createElement("code",null,"(",t.x.toFixed(1),", ",t.y.toFixed(1),")")," ","with scale ",r.createElement("code",null,(100*n).toFixed(1),"%")),r.createElement("p",{className:o?Lo.glowCode:void 0},r.createElement("code",null,o?"✓":"✗"," Selecting ",a)))}function Fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(n),!0).forEach((function(t){_o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vo=(0,a.zE)({statusCardTitle:{width:"100%"},status:{userSelect:"none",padding:i.paddings.blockComfort,$nest:{"& button":$o({},Ve)}},blockCounter:{padding:"0.5rem 0.3rem"},canvasMonitor:{padding:"0.5rem 0.3rem"},buttons:{padding:"0.5rem 0.3rem",$nest:{"& > button:not(:last-child)":{margin:"0 0.3rem 0.3rem 0"}}},chooseFileButton:$o($o({},Ve),{},{display:"inline-block",textAlign:"center",$nest:$o($o({},Ve.$nest),{},{"& > input":{display:"none"}})})}),Uo={id:"status",name:"Status",component:function(e){var t=e.dispatchAction,n=e.database,o=(0,r.useContext)(pt),a=(0,r.useCallback)((function(){function e(e,t){return e+Math.floor(Math.random()*Math.floor(t-e+1))}for(var n=0;n<100;n++){var r={x:e(-1e3,1e3),y:e(-1e3,1e3)};t({type:le.ConceptCreate,data:{posType:N.Normal,intent:se.ExactAt,pointerInViewportCoords:r}})}}),[t]),i=(0,r.useCallback)((function(){var e,t=function(e){return"data:".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/plain",";charset=utf-8,")+encodeURIComponent(e)}(JSON.stringify(n.getAllConcepts()),"application/json"),r="".concat(("all-concepts",e=new Date,"".concat("all-concepts","-").concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())),".json"),o=function(){var e="rtl"===document.documentElement.getAttribute("dir"),t=document.createElement("a");t.style.fontSize="12pt",t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;return t.style.top="".concat(n,"px"),t}();o.href=t,o.download=r,o.click()}),[n]),c=(0,r.useCallback)((function(e){e.forEach((function(e){return n.createConcept(e)}))}),[n]),l=(0,r.useCallback)((function(e){var t=e.target.files;if(t){var n=t[0];n.type&&-1===n.type.indexOf("json")?console.log("File is not an json.",n.type,n):function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(e){var r=e.target.result.toString();try{var o=JSON.parse(r);t(o)}catch(e){n(e)}})),r.addEventListener("error",(function(e){n(e)})),r.readAsText(e)}))}(n).then((function(e){c(e)})).catch((function(e){console.error(e)}))}else console.log('"e.target.files" is null.')}),[c]);switch(e.viewMode){case"NavItem":case"Block":return r.createElement("div",{className:Vo.status},r.createElement(Mo,null),r.createElement("div",{className:Vo.blockCounter},r.createElement(No,{value:o.blocks.length})),r.createElement("div",{className:Vo.canvasMonitor},r.createElement(Ho,{focus:o.camera.focus,scale:o.camera.scale,selecting:o.selecting,selectedCount:o.selectedBlockIds.length})),r.createElement("div",{className:Vo.buttons},r.createElement("button",{onClick:function(){return t({type:le.DebuggingToggle})}},"Turn ",o.debugging?"ON ":"OFF "," efficient rendering"),r.createElement("button",{onClick:a},"Create 100 blocks"),r.createElement("button",{onClick:i},"Export all concepts"),r.createElement("label",{className:Vo.chooseFileButton},r.createElement("input",{type:"file",accept:".json",onChange:l}),r.createElement("span",null,"Import concepts"))));default:return r.createElement("div",{className:Vo.statusCardTitle},"About Jade & nerd info")}},toText:function(){return"status, About Jade & nerd info"}};function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){Jo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go=(0,a.zE)({"Search--Linking":{cursor:"grabbing"},SearchBar:{display:"flex",alignItems:"center",padding:i.paddings.blockCompact},SearchIcon:{flex:"0 0 1.5rem",width:"1.5rem",height:"1.5rem",padding:".2rem",marginRight:".3rem",fill:i.colors.neutral50},SearchInput:Ko(Ko({},We),{},{flex:"1 1 0",padding:".1rem",fontSize:".8rem",width:"100%",color:i.colors.contentText,$nest:{"&::placeholder":{color:i.colors.neutral50,fontSize:".8rem"}}}),SearchShortcutHint:{flex:"0 0 4rem",height:"1.5rem",marginLeft:".3rem",fontSize:".6rem",color:i.colors.neutral50,display:"flex",justifyContent:"center",alignItems:"center"},ScrollList:{height:"100%",maxHeight:500,overflow:"auto",paddingLeft:"1.25rem",paddingRight:"1.25rem"},ScrollListItem:{position:"relative",maxHeight:150,overflow:"hidden",marginLeft:"-.5rem",marginRight:"-.5rem",borderRadius:i.borders.smallRadius,$nest:{"&:last-of-type":{marginBottom:".5rem"}}},ScrollListItemOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"background 50ms ".concat(i.easings.easeInOutCubic),$nest:{"&:hover":{background:i.colors.bgHover},"&:active":{background:i.colors.bgActive}}},Divider:{border:"none",borderBottom:"1px solid ".concat(i.colors.neutral90),$nest:{"&:last-of-type":{display:"none"}}},VisualCopy:{width:300,maxHeight:200,overflow:"hidden",zIndex:99999},pageControl:{display:"flex",alignItems:"center",padding:i.paddings.blockComfort,fontSize:".8rem",textAlign:"center",color:i.colors.neutral50},pageButton:{flex:"0 0 50px",padding:".2rem .6rem",borderRadius:i.borders.smallRadius,transition:"background 0.1s ease-in-out",cursor:"pointer",$nest:{"&:hover":{background:i.colors.bgHover},"&:active":{background:i.colors.bgActive}}},pageInfo:{flex:"1 1 0px"},tabs:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0 .75rem .5rem"},tabButton:Ko(Ko({},$e),{},{flex:"1 1 0",color:i.colors.neutral60,fontSize:".8rem",lineHeight:1.25,padding:".2rem .6rem",marginRight:".3rem",$nest:Ko({"&:last-of-type":{marginRight:0}},$e.$nest)}),Selected:{backgroundColor:i.colors.bgHover},ContentPreview:{maxHeight:"inherit",pointerEvents:"none"},tabDescription:{margin:0,padding:"0 .75rem .75rem",color:i.colors.neutral40,fontSize:".8rem",textAlign:"center"}});function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qo(e,t){var n,o,a=(n=(0,r.useState)(0),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(n,o)||function(e,t){if(e){if("string"==typeof e)return Yo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yo(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],c=a[1],l=(i+1)*t;return{page:i,start:i*t,nextStart:l,goPrevPage:function(){0!==i&&c(i-1)},goNextPage:function(){l>e.length-1||c(i+1)},resetPage:function(){c(0)}}}function Xo(e,t){var n=e.lastEditedTime||0;return(t.lastEditedTime||0)-n}function Zo(){}var Qo=(0,a.zE)({conceptPreview:{maxHeight:"inherit",pointerEvents:"none"}});function ea(e){var t=e.viewMode,n=e.concept,o=e.database,a=e.dispatchAction,i=e.blockId;return r.createElement("div",{className:Qo.conceptPreview},Da.createConceptDisplay(n.summary.type,{viewMode:t,blockId:i,readOnly:!0,concept:n,dispatchAction:a,factoryRegistry:Da,database:o,onChange:Zo,onReplace:Zo,onInteractionStart:Zo,onInteractionEnd:Zo}))}var ta=r.memo((function(){return r.createElement("svg",{className:A,viewBox:"0 0 24 24",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.createElement("path",{d:"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}))}));function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ra(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oa={Idle:Symbol("idle"),Linking:Symbol("linking")},aa=function(e){var t=e.dispatchAction,n=e.database,o=e.blockId,i=(0,r.useContext)(pt),c=(0,r.useRef)(null),l=(0,r.useRef)(null),s=na((0,r.useState)(""),2),d=s[0],f=s[1],m=na((0,r.useState)(!0),2),p=m[0],y=m[1],g=na((0,r.useState)("canvas"),2),h=g[0],w=g[1],x=na((0,r.useState)({canvases:[],blocks:[],orphans:[]}),2),k=x[0],E=x[1],O=(0,r.useRef)(null);(0,r.useEffect)((function(){O.current&&(clearTimeout(O.current),O.current=null),p?E({canvases:[],blocks:[],orphans:[]}):O.current=setTimeout((function(){var e=n.getAllConcepts(),t=function(e,t,n){var r={},o={},a={},i=n.searchConceptByText(e);e?i.forEach((function(e){return a[e.item.id]=e.item})):t.forEach((function(e){return a[e.id]=e}));for(var c=function(e){var n=t[e];r[n.id]=n,n.references.forEach((function(e){o[e.to]?o[e.to].push(n.id):o[e.to]=[n.id]}))},l=0;l<t.length;++l)c(l);var s={canvases:[],blocks:[],orphans:[]};return t.forEach((function(e){if(a[e.id]){U(e)&&s.canvases.push({type:"canvas",canvasId:e.id,concept:e});var t=o[e.id];t&&t.forEach((function(t){var n=r[t].references.find((function(t){return t.to===e.id}));n&&s.blocks.push({type:"block",canvasId:t,blockId:n.id,concept:e})})),U(e)||t||s.orphans.push({type:"orphan",canvasId:e.id,concept:e})}})),{canvases:s.canvases.sort((function(e,t){return Xo(e.concept,t.concept)})),blocks:s.blocks.sort((function(e,t){return Xo(e.concept,t.concept)})),orphans:s.orphans.sort((function(e,t){return Xo(e.concept,t.concept)}))}}(d,e,n);E(t)}),50)}),[d,n,p]);var T="canvas"===h?k.canvases:"block"===h?k.blocks:k.orphans,C=na((0,r.useState)(oa.Idle),2),S=C[0],j=C[1],I=na((0,r.useState)({valid:!1}),2),P=I[0],B=I[1],A=na((0,r.useState)({x:0,y:0}),2),z=A[0],R=A[1],M=na((0,r.useState)({x:0,y:0}),2),D=M[0],N=M[1],L=(0,r.useRef)(null),H=(0,r.useRef)(null),F=(0,r.useRef)(null),$=(0,r.useRef)(null),_=function(e){e.target instanceof Node&&(c.current.contains(e.target)||y(!0))};(0,r.useEffect)((function(){L.current=P}),[P]),(0,r.useEffect)((function(){H.current=z}),[z]),(0,r.useEffect)((function(){F.current=D}),[D]),(0,r.useEffect)((function(){$.current=i}),[i]),(0,r.useEffect)((function(){var e=function(){var e="idle",n={x:0,y:0},r=function(t){var r=me(t);if("ready"===e&&b(r,n)>3&&L.current.valid)y(!0),j(oa.Linking),R(u(r,L.current.rect)),e="linking";else if("linking"===e){if(!L.current.valid)return;N(u(r,L.current.rect))}n=r},o=function o(a){if(window.removeEventListener("mousemove",r),window.removeEventListener("touchmove",r),window.removeEventListener("mouseup",o),window.removeEventListener("touchend",o),"ready"===e){var i=L.current;i.valid&&t({type:le.BlockOpenAsCanvas,data:"canvas"===i.item.type||"orphan"===i.item.type?{id:i.item.canvasId}:{id:i.item.canvasId,focusBlockId:i.item.blockId}})}else if("linking"===e){var c=L.current,l=H.current,s=F.current,d=$.current.camera.scale;c.valid?t({type:le.BlockCreate,data:{id:c.item.concept.id,position:v({x:c.rect.left+s.x-l.x*d,y:c.rect.top+s.y-l.y*d},$.current.camera)}}):console.log("s2lBlock is invalid"),B({valid:!1}),R({x:0,y:0}),N({x:0,y:0}),j(oa.Idle)}e="idle",n={x:0,y:0}};return{handlePointerDown:function(t){t.target instanceof Element&&Array.from(c.current.querySelectorAll(".ScrollListItem")).find((function(e){return e.contains(t.target)}))&&t.stopPropagation(),e="ready";var a=me(t);n=a,window.addEventListener("mousemove",r),window.addEventListener("touchmove",r),window.addEventListener("mouseup",o),window.addEventListener("touchend",o)},handleKeyDown:function(t){"idle"===e&&((t.ctrlKey||t.metaKey)&&"p"===t.key?(l.current&&(l.current.value="",l.current.focus(),f("")),t.preventDefault()):"Escape"===t.key&&document.activeElement===l.current&&(l.current&&l.current.blur(),y(!0)))}}}(),n=c.current;return n.addEventListener("mousedown",e.handlePointerDown),n.addEventListener("touchstart",e.handlePointerDown),window.addEventListener("mousedown",_),window.addEventListener("touchstart",_),window.addEventListener("keydown",e.handleKeyDown),function(){n.removeEventListener("mousedown",e.handlePointerDown),n.removeEventListener("touchstart",e.handlePointerDown),window.removeEventListener("mousedown",_),window.removeEventListener("touchstart",_),window.removeEventListener("keydown",e.handleKeyDown)}}),[t]);var V,W,K,J=qo(k.canvases,20),G=qo(k.blocks,20),Y=qo(k.orphans,20),q="canvas"===h?J:"block"===h?G:Y,X=q.page,Z=q.start,Q=q.nextStart,ee=q.goPrevPage,te=q.goNextPage,ne=q.resetPage,re=function(){switch(h){case"canvas":return"Topics, Boards, Playgrounds";case"block":return"Unit ideas, References of canvases";case"orphan":return"Concepts that you're about to forget"}}();return r.createElement("div",{className:(0,a.Sh)(S===oa.Linking&&Go["Search--Linking"]),ref:c},r.createElement("div",{className:Go.SearchBar},r.createElement("div",{className:Go.SearchIcon},r.createElement(ta,null)),r.createElement("input",{ref:l,className:Go.SearchInput,placeholder:"Search",onChange:function(e){f(e.target.value),ne()},onFocus:function(){y(!1)}}),p&&r.createElement("div",{className:Go.SearchShortcutHint},"Ctrl/Cmd+P")),!p&&r.createElement(r.Fragment,null,r.createElement("div",{className:Go.tabs},r.createElement("button",{className:(0,a.Sh)(Go.tabButton,"canvas"===h&&Go.Selected),onClick:function(){return w("canvas")}},"Canvas (",k.canvases.length,")"),r.createElement("button",{className:(0,a.Sh)(Go.tabButton,"block"===h&&Go.Selected),onClick:function(){return w("block")}},"Block (",k.blocks.length,")"),r.createElement("button",{className:(0,a.Sh)(Go.tabButton,"orphan"===h&&Go.Selected),onClick:function(){return w("orphan")}},"Orphan (",k.orphans.length,")")),r.createElement("p",{className:Go.tabDescription},re),r.createElement("div",{className:Go.ScrollList},r.createElement("div",{key:X},T.slice(Z,Q).map((function(e){return r.createElement(r.Fragment,{key:"canvas"===e.type||"orphan"===e.type?e.canvasId:e.blockId},function(){switch(S){case oa.Idle:return r.createElement("div",{className:"".concat(Go.ScrollListItem," ScrollListItem"),onMouseEnter:function(t){B({valid:!0,item:e,rect:t.currentTarget.getBoundingClientRect()})},onMouseLeave:function(){B({valid:!1})}},r.createElement(ea,{blockId:o,concept:e.concept,viewMode:"NavItem",dispatchAction:t,database:n}),r.createElement("div",{className:Go.ScrollListItemOverlay}));case oa.Linking:return r.createElement("div",{className:Go.ScrollListItem},r.createElement(ea,{blockId:o,concept:e.concept,viewMode:"NavItem",dispatchAction:t,database:n}));default:return'Unknown s2lState "'.concat(S.description,'"')}}(),r.createElement("hr",{className:Go.Divider}))})))),r.createElement("div",{className:Go.pageControl},r.createElement("div",{className:Go.pageButton,onClick:ee},"Prev"),r.createElement("div",{className:Go.pageInfo},Z+1," ~ ",Math.min(Z+20,T.length)," ","of ",T.length),r.createElement("div",{className:Go.pageButton,onClick:te},"Next"))),S===oa.Linking&&P.valid?(V=n.getConcept(P.item.concept.id),W=i.camera.scale,K={x:P.rect.left+D.x-z.x*W,y:P.rect.top+D.y-z.y*W},e.createOverlay(r.createElement("div",{className:fe.block,style:{transformOrigin:"top left",transform:"translate3d(".concat(K.x,"px, ").concat(K.y,"px, 0px) scale(").concat(W,")"),width:300,pointerEvents:"none"}},r.createElement(ea,{blockId:o,concept:V,database:n,dispatchAction:t,viewMode:"Block"})))):r.createElement(r.Fragment,null))},ia={id:"searchtool",name:"Search Tool",isTool:!0,component:function(e){return"Block"!==e.viewMode?r.createElement("span",null,"Search Tool"):r.createElement(aa,e)}};function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach((function(t){sa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var da=(0,a.zE)({HeaderToolNav:la({},Ke),HeaderToolBlock:{width:"100%",display:"flex",flexWrap:"nowrap",padding:i.paddings.blockComfort,paddingTop:".35rem",paddingBottom:".35rem",minHeight:"2.2rem",maxHeight:"2.2rem",transition:"max-height 0.2s ".concat(i.easings.easeInOutCubic),overflow:"hidden"},HeaderToolBlockNotCollapsed:{maxHeight:300},Button:la(la({},$e),{},{flex:"0 0 1.5rem",width:"1.5rem",height:"1.5rem",padding:".2rem",fill:i.colors.contentText,$nest:la(la({},$e.$nest),{},{"&:first-child":{marginRight:".3rem"}})}),TitleContainer:{flex:"1 1 0",padding:".1rem .5rem",margin:"auto 0",fontSize:".95rem"},TitleContainerNotCollapsed:{maxHeight:"calc(".concat(300,"px - 0.7rem)"),overflow:"auto"}}),ua=r.memo((function(){return r.createElement("svg",{className:A,viewBox:"0 0 24 24",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.createElement("path",{d:"M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42-.39-.39-1.02-.39-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1z"}))})),fa=r.memo((function(){return r.createElement("svg",{className:A,viewBox:"0 0 24 24",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",null,r.createElement("path",{d:"M12,3 L4,9v12h16v-2H6v-9l6-4.5l6,4.5v9h2V9L12,3z"})))})),ma=r.memo((function(){return r.createElement("svg",{className:A,width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M24 24H0V0h24v24z",fill:"none",opacity:".87"}),r.createElement("path",{d:"M15.88 9.29L12 13.17 8.12 9.29c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z"}))})),pa=function(){return r.createElement("svg",{className:A,width:"100%",height:"100%",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r.createElement("path",{d:"M11.29 8.71L6.7 13.3c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.38-.39-1.02-.39-1.41 0z"}))};function ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ba={id:"headertool",name:"Header Tool",isTool:!0,component:function(e){var t,n,o,i=e.viewMode,c=e.blockId,l=e.dispatchAction,s=e.createOverlay,d=e.onInteractionStart,u=e.onInteractionEnd,f=(0,r.useContext)(pt),m=(n=(0,r.useState)(!0),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(n,o)||function(e,t){if(e){if("string"==typeof e)return ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ya(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],y=m[1],b=(0,r.useCallback)((function(){return y((function(e){return!e}))}),[]);return"Block"!==i?r.createElement("div",{className:da.HeaderToolNav},"🔧 Header Tool"):r.createElement("div",{className:(0,a.Sh)(da.HeaderToolBlock,!p&&da.HeaderToolBlockNotCollapsed)},r.createElement("button",{className:da.Button,onClick:function(){y(!0),l({type:le.Undo})}},r.createElement(ua,null)),r.createElement("button",{className:da.Button,onClick:function(){y(!0),l({type:le.BlockOpenAsCanvas,data:{id:f.homeConceptId}})}},r.createElement(fa,null)),r.createElement("div",{className:(0,a.Sh)(da.TitleContainer,!p&&da.TitleContainerNotCollapsed)},(t={viewMode:"CardTitle",readOnly:!1,dispatchAction:l,factoryRegistry:e.factoryRegistry,database:e.database,concept:f.viewingConcept,blockId:c,createOverlay:s,onChange:function(e){return l({type:le.ConceptWriteData,data:{id:f.viewingConcept.id,type:f.viewingConcept.summary.type,content:e}})},onReplace:function(e){return l({type:le.ConceptWriteData,data:{id:f.viewingConcept.id,type:e,content:{initialized:!1}}})},onInteractionStart:d,onInteractionEnd:u,key:"CardTitle-"+f.viewingConcept.id},e.factoryRegistry.createConceptDisplay(f.viewingConcept.summary.type,t))),r.createElement("button",{className:da.Button,onClick:b},p?r.createElement(ma,null):r.createElement(pa,null)))}},ga=(0,a.zE)({Recent:{width:"100%",height:40,display:"flex",padding:"0px 20px",$nest:{"& button":{border:"none",background:"unset",lineHeight:1.3},"& button:focus":{outline:"none"}}},RecentBtn:{flex:"1 0 75px",maxWidth:300,height:"100%",overflow:"hidden",transition:"background 0.2s, flex-basis 0.3s",padding:"0 5px",borderRadius:i.borders.smallRadius,cursor:"pointer",color:i.colors.contentText,$nest:{"&:hover":{background:i.colors.bgHover,overflowY:"scroll",paddingRight:0},"&:active":{background:i.colors.bgActive},"&::-webkit-scrollbar":{width:5,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(0, 0, 0, 0.25)",$nest:{"&:active":{background:"rgba(0, 0, 0, 0.5)"}}}}},ContentPreview:{pointerEvents:"none",height:"100%"}}),ha={id:"recenttool",name:"Recent Tool",isTool:!0,component:function(e){var t=e.viewMode,n=e.blockId,o=e.dispatchAction,a=e.database,i=(0,r.useContext)(pt),c=(0,r.useRef)(null);return"Block"!==t?r.createElement("span",null,"Recent Tool"):r.createElement("div",{className:ga.Recent,ref:c},function(){for(var e,t=[],l=Math.floor((null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect().width)/100),s=function(e){var n=i.expandHistory[e];return n?!t.find((function(e){return e===n}))&&(t.push(n),t.length>=l)?"break":void 0:"continue"},d=i.expandHistory.length-2;d>=0;d--){var u=s(d);if("continue"!==u&&"break"===u)break}return t.map((function(e){var t=a.getConcept(e);return r.createElement("button",{className:ga.RecentBtn,onClick:function(){o({type:le.BlockOpenAsCanvas,data:{id:e}})},key:e},r.createElement(ea,{blockId:n,concept:t,database:a,dispatchAction:o,viewMode:"NavItem"}))}))}())}};function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){xa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ka=(0,a.zE)({Insight:{padding:i.paddings.blockComfort,maxHeight:500,overflow:"auto"},InsightItem:{position:"relative",maxHeight:150,overflow:"hidden",marginLeft:"-.5rem",marginRight:"-.5rem",borderRadius:i.borders.smallRadius,transition:"background 0.1s ease-in-out",$nest:{"&:hover":{background:i.colors.bgHover,opacity:.9},"&:active":{background:i.colors.bgActive,opacity:.8}}},Divider:{border:"none",borderBottom:"1px solid ".concat(i.colors.neutral90),$nest:{"&:last-of-type":{display:"none"}}},Header:{display:"flex",justifyContent:"center",alignItems:"center",color:i.colors.neutral50,$nest:{"&:not(:only-child)":{marginBottom:".5rem"},"& > div":{flex:"1 1 0"},"& > button":wa(wa({},$e),{},{flex:"0 0 1.4rem",width:"1.4rem",height:"1.4rem",padding:".15rem",$nest:wa(wa({},$e.$nest),{},{"& > svg":{fill:i.colors.neutral50}})})}},HeaderText:{color:i.colors.neutral50,fontSize:".8rem"}});function Ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ta={id:"insighttool",name:"Insight Tool",isTool:!0,component:function(e){var t=e.viewMode,n=e.blockId,o=e.dispatchAction,a=e.database,i=(0,r.useContext)(pt),c=Ea((0,r.useState)([]),2),l=c[0],s=c[1],d=Ea((0,r.useState)(!0),2),u=d[0],f=d[1];return(0,r.useEffect)((function(){!function(){var e,t,n,r,o=a.getAllConcepts(),c=(e=i.viewingConcept.id,n={},(t=o).forEach((function(e){return n[e.id]=e})),r=n,t.reduce((function(t,n){var o=n.references.filter((function(t){return t.to===e||function(e,t){if(!t||!t.summary||!t.summary.type)return!1;switch(t.summary.type){case"pmtext":return function(e,t){var n=hr(t.summary.data.data,Nn);if(!n)return!1;var r=!1;return n.descendants((function(t){if(t.text){var n=t.marks.find((function(e){return e.type.name===Rn}));if(!n)return;var o=n.attrs.href;st(o)&&lt(o).conceptId===e&&(r=!0)}})),r}(e,t);default:return!1}}(e,r[t.to])}));return t.concat(o.map((function(e){return{concept:n,blockId:e.id}})))}),[]));s(c)}()}),[a,i.viewingConcept.id]),"Block"!==t?r.createElement("span",null,"Insight Tool"):r.createElement("div",{className:ka.Insight},l.length?r.createElement(r.Fragment,null,r.createElement("div",{className:ka.Header},r.createElement("div",{className:ka.HeaderText},"Embedded at"," ",u&&"".concat(l.length," place").concat(l.length>1?"s":"")),r.createElement("button",{onClick:function(){return f(!u)}},u?r.createElement(pa,null):r.createElement(ma,null))),!u&&l.map((function(e){var t=e.concept,i=e.blockId;return r.createElement(r.Fragment,{key:"".concat(t.id,"/").concat(i)},r.createElement("div",{className:ka.InsightItem,onClick:function(){return o({type:le.BlockOpenAsCanvas,data:{id:t.id,focusBlockId:i}})}},r.createElement(ea,{blockId:n,concept:t,database:a,dispatchAction:o,viewMode:"NavItem"})),r.createElement("hr",{className:ka.Divider}))}))):r.createElement("div",{className:ka.HeaderText},"Not embedded anywhere"))}};function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){Ia(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pa=(0,a.zE)({cssBlock:{padding:i.paddings.blockComfort},cssNavItem:ja(ja({},Xr),{},{color:i.colors.contentText}),textarea:{display:"block",color:i.colors.contentText,background:"inherit",outlineColor:i.colors.contentText,fontFamily:i.fonts.monospace,lineHeight:1.4,width:"100%",height:300,padding:"0.5rem",border:"none",resize:"none",cursor:"inherit",$nest:{"&:focus-visible":{outline:"none"}}},noScrollAndPadding:{padding:0,overflow:"hidden"}});function Ba(e){var t,n,o=e.readOnly,a=e.concept,i=e.onChange,c=e.onInteractionStart,l=e.onInteractionEnd,s=a.summary.data.globalCss,d=(0,r.useRef)(),u=(0,r.useRef)(),f=(0,r.useRef)(),m=(t=(0,r.useState)(s),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ca(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],y=m[1];return(0,r.useEffect)((function(){var e=document.createElement("style"),t=document.createTextNode("");return e.appendChild(t),document.head.appendChild(e),d.current=e,u.current=t,function(){document.head.removeChild(e)}}),[]),(0,r.useEffect)((function(){u.current.textContent=p}),[p]),(0,r.useEffect)((function(){var e=f.current,t=function(e){e.ctrlKey||e.stopPropagation()};return e.addEventListener("wheel",t),function(){return e.removeEventListener("wheel",t)}}),[]),(0,r.useEffect)((function(){var e=f.current;o&&e&&(e.blur(),window.getSelection().removeAllRanges())}),[o]),r.createElement("div",{className:Pa.cssBlock},r.createElement("textarea",{ref:f,value:p,className:Pa.textarea,onFocus:c,onBlur:l,onChange:function(e){y(e.target.value),i({globalCss:e.target.value})},readOnly:o}))}function Aa(e){var t=e.concept.summary.data.globalCss;return r.createElement("div",{className:Pa.cssNavItem},r.createElement("textarea",{value:t,className:(0,a.Sh)(Pa.textarea,Pa.noScrollAndPadding),readOnly:!0}))}function za(e){switch(e.viewMode){case"NavItem":return r.createElement(Aa,e);default:return r.createElement(Ba,e)}}var Ra={id:"css",name:"CSS",component:r.memo(za),toText:function(e){return e.summary.data.globalCss||""}};function Ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Da=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ma(this,"factories",[Nr,qr,ao,Bo,Uo,ia,ba,ha,Ta,Ra]),Ma(this,"default",Nr),Ma(this,"getDefaultContentFactory",(function(){return t.default})),Ma(this,"getContentFactories",(function(){return t.factories.filter((function(e){return!e.isTool}))})),Ma(this,"getToolFactories",(function(){return t.factories.filter((function(e){return e.isTool}))})),Ma(this,"getFactory",(function(e){return t.factories.find((function(t){return t.id===e}))})),Ma(this,"getConceptString",(function(e){var n=e.summary.type,r=t.getFactory(n);return r&&r.toText?r.toText(e):""})),Ma(this,"createConceptDisplay",(function(e,n){var o=t.getFactory(e);return o?r.createElement(Kt,null,r.createElement(o.component,n)):r.createElement("span",null,'Factory "',e,'" does not exist in registry.')}))};function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){Ha(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fa=Date.now(),$a=n(4),_a=[wt("headertool"),wt("recenttool"),wt("insighttool"),wt("searchtool")],Va={id:"__tool_mask__",summary:{type:"toolmask",data:void 0},references:[G({to:_a[0].id,posType:N.PinnedTL,pos:{x:400,y:10},size:{w:450,h:"auto"}}),G({to:_a[1].id,posType:N.PinnedTR,pos:{x:10,y:10},size:{w:450,h:"auto"}}),G({to:_a[2].id,posType:N.PinnedBR,pos:{x:10,y:10},size:{w:250,h:"auto"}}),G({to:_a[3].id,posType:N.PinnedTL,pos:{x:10,y:10},size:{w:270,h:"auto"}})],relations:[],drawing:[],camera:{focus:{x:0,y:0},scale:1},createdTime:Fa,lastEditedTime:Fa},Ua=$a.map((function(e){return La(La({},e),{},{references:e.references.map((function(e){return La(La({},e),{},{posType:void 0===e.posType?N.Normal:e.posType})})),camera:e.camera||{focus:{x:0,y:0},scale:1},createdTime:e.createdTime||Fa,lastEditedTime:e.lastEditedTime||Fa})})).concat($a.find((function(e){return"__tool_mask__"===e.id}))?[]:_a.concat(Va)),Wa=n(221);function Ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(n),!0).forEach((function(t){Ga(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ya={threshold:.2,distance:15,keys:[{name:"summary.type",weight:.2},{name:"summary.text",weight:.8}],useExtendedSearch:!0,includeScore:!0,ignoreLocation:!0,ignoreFieldNorm:!0};function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach((function(t){Za(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ai=new(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qa(this,e),ti(this,"subscriberMap",void 0),ti(this,"lastEmitTime",void 0),ti(this,"auditChannel",void 0),ti(this,"publish",(function(e,n){var r=t.subscriberMap[e];if(r&&r.length>0)for(var o=0;o<r.length;o++)r[o].callback(n);var a=Date.now();a-t.lastEmitTime>16&&e!==t.auditChannel&&t.publishAuditMessage("publish",e),t.lastEmitTime=a})),ti(this,"subscribe",(function(e,n){var r=t.subscriberMap[e],o={user:"",callback:n};r&&r.length>0?r.push(o):t.subscriberMap[e]=[o],t.publishAuditMessage("subscribe",e)})),ti(this,"unsubscribe",(function(e,n){var r=t.subscriberMap[e];if(r&&r.length>0)for(var o=0;o<r.length;o++)if(r[o].callback===n){r.splice(o,1);break}t.publishAuditMessage("unsubscribe",e)})),this.subscriberMap={},this.lastEmitTime=0,this.auditChannel=n.auditChannel}var t,n;return t=e,(n=[{key:"publishAuditMessage",value:function(e,t){if(this.auditChannel){var n=Object.entries(this.subscriberMap).map((function(e){return{name:e[0],subNum:e[1].length}}));this.publish(this.auditChannel,{activeChannel:t,action:e,channels:n})}}}])&&ei(t.prototype,n),e}());function ii(){localStorage.setItem("lastUpdatedAt",Date.now().toString())}var ci={isValid:function(){return null!==localStorage.getItem("JADE_DB_LOADED")},init:function(e,t){ci.saveSettings(e),t.forEach((function(e){ci.createConcept(e)})),localStorage.setItem("JADE_DB_LOADED",""),localStorage.setItem("JADE_DB_VER",zo.JADE_DB_VER.toString())},getConcept:function(e){try{var t=localStorage.getItem("concept/".concat(e)),n=JSON.parse(t);return n.relations?n:ri(ri({},n),{},{relations:[]})}catch(e){return}},getAllConcepts:function(){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);if(n.startsWith("concept")){var r=JSON.parse(localStorage.getItem(n));e.push(r.relations?r:ri(ri({},r),{},{relations:[]}))}}return e},updateConcept:function(e){setTimeout((function(){localStorage.setItem("concept/".concat(e.id),JSON.stringify(e)),ii(),setTimeout((function(){ai.publish(e.id),ai.publish("*")}))}),0)},createConcept:function(e){localStorage.setItem("concept/".concat(e.id),JSON.stringify(e)),ii(),ai.publish(e.id),ai.publish("*")},getSettings:function(){try{return JSON.parse(localStorage.getItem("settings"))}catch(e){return}},saveSettings:function(e){localStorage.setItem("settings",JSON.stringify(e)),ii()},getLastUpdatedTime:function(){return parseInt(localStorage.getItem("lastUpdatedAt"))},getVersion:function(){return parseInt(localStorage.getItem("JADE_DB_VER"))},setVersion:function(e){localStorage.setItem("JADE_DB_VER",e.toString())},subscribeConcept:ai.subscribe,unsubscribeConcept:ai.unsubscribe};!function(e,t){document.title="Jade v".concat(zo.JADE_VER);var n,a=function(e,t){var n,r=new Wa.Z([],Ya);function o(e){return Ja(Ja({},e),{},{summary:Ja(Ja({},e.summary),{},{text:t.getConceptString(e)})})}return n=e.getAllConcepts().map(o),r.setCollection(n),Ja(Ja({},e),{},{init:function(t,n){r.setCollection(n.map(o)),e.init(t,n)},createConcept:function(t){r.add(o(t)),e.createConcept(t)},updateConcept:function(t){r.remove((function(e){return e.id===t.id})),r.add(o(t)),e.updateConcept(t)},searchConceptByText:function(e,t){return r.search(e,t)}})}(e,Da),i=function(){var e=localStorage.getItem("state_v3");if(e)try{return JSON.parse(e)}catch(e){return}}();if(!a.isValid()&&i&&(console.log("core/index: Migrating state_v3"),a.init({debugging:i.debugging,homeConceptId:i.homeConceptId,viewingConceptId:i.viewingConceptId},Object.values(i.conceptMap).map((function(e){return Xa(Xa({},e),{},{relations:[]})})))),a.isValid()&&(n=a.getVersion())!=n){console.log("core/index: Migrating state4");var c=a.getAllConcepts(),l=Date.now();c.forEach((function(e){return a.updateConcept({id:e.id,camera:{focus:{x:0,y:0},scale:1},drawing:e.drawing,references:e.details.map((function(e){return{id:e.id,to:e.to,posType:N.Normal,pos:e.position,size:{w:e.width,h:"auto"},createdTime:l,lastEditedTime:l}})),relations:[],summary:e.summary,createdTime:l,lastEditedTime:l})})),a.createConcept(Va),_a.forEach((function(e){return a.createConcept(e)})),a.setVersion(5)}a.isValid()||(console.log("core/index: Bootstrap new db"),a.init({debugging:!1,homeConceptId:"home",viewingConceptId:"b1f78b9d-eebd-4d94-b3e3-ba80b54769ff"},Ua)),o.render(r.createElement(Ft,{db:a,openExternal:function(e){var t=window.open();t.opener=null,t.location.assign(e)},factoryRegistry:Da}),document.getElementById("react-root"))}(ci)},982:(e,t,n)=>{"use strict";e.exports=n.p+"assets/2272b1ebf4a4f045f2ad.png"},4:e=>{"use strict";e.exports=JSON.parse('[{"id":"f581070a-4100-4cdc-9fd5-2f5ca5092199","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"You start by "},{"type":"text","marks":[{"type":"bold"}],"text":"creating"},{"type":"text","text":" "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":"s."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634303968652,"lastEditedTime":1640458346033},{"id":"ddcd8423-05f3-4cf5-869d-c1a73d182d17","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Manage contacts."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056114969,"lastEditedTime":1634056123914},{"id":"370b5e79-f728-4be6-9734-f00e17c58400","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff/87888b5b-5747-43ef-ba05-208952e3c3a6","title":null}}],"text":"← Prev"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634313693054,"lastEditedTime":1634313774295},{"id":"c2525cc9-01c9-4142-b289-8eedae6f4b13","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"background-pink"}}],"text":"Link"},{"type":"text","text":" thoughts in different contexts."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634310641124,"lastEditedTime":1640458682579},{"id":"67214f92-be5d-4d87-9313-472e48685e2c","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"background-orange"}}],"text":"Connect"},{"type":"text","text":" related thoughts with arrows."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634310574552,"lastEditedTime":1640458614277},{"id":"72079351-217f-4529-920c-3ee8f8bb3bb3","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Jade is like your "},{"type":"text","marks":[{"type":"bold"}],"text":"table"},{"type":"text","text":" and "},{"type":"text","marks":[{"type":"bold"}],"text":"stationery"},{"type":"text","text":", letting you bring in "},{"type":"text","marks":[{"type":"bold"}],"text":"resources"},{"type":"text","text":" you care, "},{"type":"text","marks":[{"type":"bold"}],"text":"capture"},{"type":"text","text":" / "},{"type":"text","marks":[{"type":"bold"}],"text":"connect"},{"type":"text","text":" small yet precious thoughts, and evolve useful "},{"type":"text","marks":[{"type":"bold"}],"text":"knowledge"},{"type":"text","text":" from them."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634055507652,"lastEditedTime":1640458319979},{"id":"4fc501f5-40b9-4257-ae52-09d7803ff499","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Drag a search result out."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634314431412,"lastEditedTime":1634314456200},{"id":"8dfecddd-7592-49f6-8a2a-7af588710597","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Build a design gallery."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056165169,"lastEditedTime":1634056834769},{"id":"cda5c762-3e28-4b37-bf20-aee61c6fa9eb","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Hit "},{"type":"text","marks":[{"type":"code"}],"text":"Enter"},{"type":"text","text":" in a "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":" to create another one below. This lets you quickly record a sequence of thoughts."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634304575792,"lastEditedTime":1640458550061},{"id":"b1f78b9d-eebd-4d94-b3e3-ba80b54769ff","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Jade Tutorial"}]}}},"references":[{"id":"ab8fc9ce-5957-4d93-b74a-5f22bc72daa6","createdTime":1634051255657,"lastEditedTime":1634051255657,"to":"8a15e8a7-aa41-4b42-a39b-f9e4dd3fe167","posType":1,"pos":{"x":-990.99995936164,"y":288.0820601749857},"size":{"w":300,"h":"auto"}},{"id":"265d4489-ebcf-4661-acca-d08eea7f1c4c","createdTime":1634052540093,"lastEditedTime":1634052540093,"to":"home","posType":1,"pos":{"x":4710.13318916579,"y":303.66882945634825},"size":{"w":405,"h":"auto"}},{"id":"0676953a-557a-45dd-9788-ba59f64fc309","createdTime":1634053060729,"lastEditedTime":1634053060729,"to":"eb7eb6e9-bf5d-4a0d-9383-2daa41bb3b50","posType":1,"pos":{"x":-1123.206819655667,"y":288.0820601749857},"size":{"w":127.21847453083598,"h":"auto"}},{"id":"dfd6f57d-70cf-4fc9-802d-e9c0f7bafcdf","createdTime":1634055179884,"lastEditedTime":1634055179884,"to":"805f1c64-e0ad-49b7-a542-56bd1e5a4e6f","posType":1,"pos":{"x":4710.13318916579,"y":355.3584847603033},"size":{"w":405,"h":"auto"}},{"id":"1e8dad96-c9cf-4d6a-bd80-a86bc1b1ff3e","createdTime":1634055507654,"lastEditedTime":1634055507654,"to":"72079351-217f-4529-920c-3ee8f8bb3bb3","posType":1,"pos":{"x":-990.9999257347689,"y":339.77174180997883},"size":{"w":474.1329719530507,"h":"auto"}},{"id":"9206c6d6-a950-4ce8-b8ae-549ee8562b95","createdTime":1634057800920,"lastEditedTime":1634057800920,"to":"cb4952ef-d47a-4c53-a9be-5520ae02da0d","posType":1,"pos":{"x":718.2138599710447,"y":771.2296779949529},"size":{"w":116.5,"h":"auto"},"color":"background-blue"},{"id":"359df0a0-57ea-4ea9-823c-111260e7e00c","createdTime":1634304171337,"lastEditedTime":1634304171337,"to":"7583f5d7-46b1-45fd-8c2e-b3ae2fd17bb6","posType":1,"pos":{"x":718.2138599710447,"y":578.4710453350408},"size":{"w":374,"h":"auto"}},{"id":"87888b5b-5747-43ef-ba05-208952e3c3a6","createdTime":1634304264221,"lastEditedTime":1634304264221,"to":"67764109-fdae-4469-addc-c72d9f30e8e9","posType":1,"pos":{"x":1739.0230226884514,"y":-389.37700480987417},"size":{"w":374,"h":"auto"}},{"id":"af55ff6a-0d6a-4bbe-9de9-da0cc5e4c8df","createdTime":1634304575793,"lastEditedTime":1634304575793,"to":"cda5c762-3e28-4b37-bf20-aee61c6fa9eb","posType":1,"pos":{"x":1739.0230226884514,"y":-280.30803126861434},"size":{"w":374,"h":"auto"}},{"id":"2310b763-6bed-49e5-af5d-ae56226c15f2","createdTime":1634305155164,"lastEditedTime":1634305155164,"to":"753c8d99-8931-4b96-96a0-e03313811ed9","posType":1,"pos":{"x":2000.023160017553,"y":-170.13561458160262},"size":{"w":113,"h":"auto"},"color":"background-blue"},{"id":"52102358-30d1-4b4f-97f6-d1023b9b2396","createdTime":1634306596347,"lastEditedTime":1634306596347,"to":"4516c95d-d3cc-412a-a683-c68705517ab3","posType":1,"pos":{"x":-513.4334397582429,"y":476.1165599252132},"size":{"w":116,"h":"auto"},"color":"background-blue"},{"id":"ccbc0cb1-1b48-46f2-9387-d59078a50e08","createdTime":1634307529485,"lastEditedTime":1634307529485,"to":"f6f02393-f01c-4fe8-b3c8-d4e6b1fc19ba","posType":1,"pos":{"x":1739.0230226884514,"y":-170.13561458160268},"size":{"w":116,"h":"auto"},"color":"background-blue"},{"id":"7e4e3cad-cc1d-4631-abfa-13294135f8ce","createdTime":1634307748921,"lastEditedTime":1634307748921,"to":"0a3706b8-f67a-49eb-9e57-291e26d62fbb","posType":1,"pos":{"x":2435.0852464087916,"y":418.62421074110796},"size":{"w":263.1060390802613,"h":"auto"},"color":"background-grey"},{"id":"64fd8807-34ea-44b7-a065-71c276b957d9","createdTime":1634307984208,"lastEditedTime":1634307984208,"to":"f8c62c5b-62fb-42c3-a223-e2332757740d","posType":1,"pos":{"x":718.2138599710447,"y":661.0572613079412},"size":{"x":706.4233124354648,"y":440.9670406437822,"w":374,"h":"auto"}},{"id":"38063a08-ab19-44fb-85ab-0eb4cbb4d3af","createdTime":1634308140909,"lastEditedTime":1634308140909,"to":"0f7090cd-df41-4328-834f-545edb86d10c","posType":1,"pos":{"x":270.2138599710447,"y":533.7813900310857},"size":{"w":400,"h":"auto"}},{"id":"871a8a57-9440-4dda-82fc-82240224fa4b","to":"2eb9e224-adf7-40fd-abc7-cdd2c79236c4","posType":1,"pos":{"x":1148.2138599710447,"y":533.3277701829929},"size":{"w":422,"h":250},"createdTime":1634308867627,"lastEditedTime":1634308946983},{"id":"27bd78dd-21fb-4e10-99a9-753055f4024c","createdTime":1634309127135,"lastEditedTime":1634309127135,"to":"bbb78b24-0b03-4cf0-96f6-36d8da124c11","posType":1,"pos":{"x":975.006960618735,"y":771.2296526892756},"size":{"w":117.20766124213878,"h":"auto"},"color":"background-blue"},{"id":"840c09b9-7c72-467c-8b52-3591eb079afa","createdTime":1634309144614,"lastEditedTime":1634309144614,"to":"f581070a-4100-4cdc-9fd5-2f5ca5092199","posType":1,"pos":{"x":718.2138599710447,"y":526.7813676370686},"size":{"w":374,"h":"auto"}},{"id":"bb33fb4c-e7dd-47bf-8990-e8b1cce80cc5","createdTime":1634310486675,"lastEditedTime":1634310486675,"to":"2fbb1df6-5c90-483d-aa65-20f4720a4843","posType":1,"pos":{"x":2989.1391234438097,"y":505.14856952840273},"size":{"w":405.00000000000045,"h":"auto"}},{"id":"96779e6f-0793-4d8d-8e68-6281f873c3ae","createdTime":1634310574552,"lastEditedTime":1634310574552,"to":"67214f92-be5d-4d87-9313-472e48685e2c","posType":1,"pos":{"x":2989.1391234438097,"y":556.8382248323578},"size":{"w":389,"h":"auto"}},{"id":"13eea517-1dad-45f1-90dc-a34137c2a00f","createdTime":1634310592853,"lastEditedTime":1634310592853,"to":"c2f2a509-87b5-45ff-81ab-85c6de98dfaf","posType":1,"pos":{"x":2989.1391234438097,"y":608.5278801363129},"size":{"w":389,"h":"auto"}},{"id":"f4bfb3fe-5602-492f-83f3-864a79df6b10","createdTime":1634310641124,"lastEditedTime":1634310641124,"to":"c2525cc9-01c9-4142-b289-8eedae6f4b13","posType":1,"pos":{"x":2989.1391234438097,"y":740.5968460481781},"size":{"w":349,"h":"auto"}},{"id":"ed7d6b4d-af5a-41dc-9a8f-d170d7bbbd40","createdTime":1634310987427,"lastEditedTime":1634310987427,"to":"58af6c26-4565-42c8-ad95-e4c540522c31","posType":1,"pos":{"x":2894.1391234438097,"y":505.14856952840273},"size":{"w":90,"h":"auto"}},{"id":"9edd4fb1-d220-479c-9be3-306e82199e56","createdTime":1634311163245,"lastEditedTime":1634311163245,"to":"cd924087-9834-4dfe-8430-623e4b28cf41","posType":1,"pos":{"x":2989.1391234438097,"y":688.907190744223},"size":{"w":283,"h":"auto"}},{"id":"14394fd7-74df-4183-b06e-9a292339ad35","createdTime":1634312031572,"lastEditedTime":1634312031572,"to":"a92621be-4538-4cae-9ac2-9ce352ad56a8","posType":1,"pos":{"x":3350.8726568563325,"y":688.8037437837738},"size":{"w":282,"h":"auto"},"color":"background-green"},{"id":"f161e4ee-ceb1-45c6-92c7-d7d55d9a8be5","createdTime":1634312065148,"lastEditedTime":1634312065148,"to":"72de3b3d-1d8f-432b-8938-fa288be377a3","posType":1,"pos":{"x":3390.8726568563325,"y":751.6856682440041},"size":{"w":370,"h":"auto"},"color":"background-pink"},{"id":"cb2c22cf-738f-41af-8f3e-903754f815d7","createdTime":1634312393789,"lastEditedTime":1634312393789,"to":"b2aada53-355d-4291-ba05-c6df9df2ed29","posType":1,"pos":{"x":3436.5567959528344,"y":505.14856952840273},"size":{"x":3366.9884035459963,"y":706.172265226204,"w":300,"h":"auto"},"color":"background-orange"},{"id":"423d4c3b-ff39-4c9a-9daa-0193380721ce","createdTime":1634312952447,"lastEditedTime":1634312952447,"to":"a06d4cd0-f42f-4299-9a63-50a10eb921ff","posType":1,"pos":{"x":2894.1391234438097,"y":424.7692589204925},"size":{"w":376.6548517371675,"h":"auto"}},{"id":"c448c24e-9e1c-4ca3-a582-8803f6d71410","createdTime":1634312315941,"lastEditedTime":1634312315941,"to":"a9e34922-7b8c-4058-882c-15646bc665d7","posType":1,"pos":{"x":3424.5567959528344,"y":599.3459763802898},"size":{"x":3344.9884035459963,"y":774.172265226204,"w":300,"h":"auto"},"color":"background-yellow"},{"id":"139dd214-cd0d-46db-b43d-4d53290aab9d","createdTime":1634313462867,"lastEditedTime":1634313462867,"to":"827f4330-b424-4384-9748-43c148f747e0","posType":1,"pos":{"x":2567.9617679031467,"y":510.9126773298717},"size":{"w":207.1289949261768,"h":"auto"},"color":"background-grey"},{"id":"484d0e4e-8b8b-4bc7-a45c-36ebe915c0f0","createdTime":1634306342894,"lastEditedTime":1634306342894,"to":"49debdfe-e9d3-4d5f-8a5b-cd7096d63869","posType":1,"pos":{"x":2468.5398133865046,"y":572.9148658262011},"size":{"w":281.22929504496005,"h":"auto"},"color":"background-grey"},{"id":"1577585b-cf5c-4584-99c6-4ae62406f6ca","createdTime":1634307144456,"lastEditedTime":1634307144456,"to":"f30e5148-f6c4-4252-9811-3135506d532f","posType":1,"pos":{"x":2494.523690519723,"y":670.0417627889528},"size":{"w":326.49276044460476,"h":"auto"},"color":"background-grey"},{"id":"f371bc71-06c8-4f75-ae68-ff3fbb3bb7aa","createdTime":1634313416527,"lastEditedTime":1634313416527,"to":"77d4dfe9-10ee-407b-a7b3-df1267fd90e7","posType":1,"pos":{"x":2430.0045545938237,"y":768.7610187203181},"size":{"w":320,"h":"auto"},"color":"background-grey"},{"id":"13b06410-95fb-48cf-9e0b-2ffe9fd3bd97","createdTime":1634313432539,"lastEditedTime":1634313432539,"to":"af67cfe7-e7ef-4b8d-b627-d4000dbc2a94","posType":1,"pos":{"x":2520.695821437951,"y":862.2787401343169},"size":{"x":4546.622587150884,"y":1246.895173880203,"w":300,"h":"auto"},"color":"background-grey"},{"id":"e4a1e744-c728-4776-acf4-20e08bab3d32","createdTime":1634313610310,"lastEditedTime":1634313610310,"to":"addb48b4-ad7f-4eed-b332-6d615227a52c","posType":1,"pos":{"x":2558.4665493123935,"y":355.62421074110796},"size":{"w":293,"h":"auto"},"color":"background-grey"},{"id":"fa8ab356-39df-464f-8987-3dfb8a435b32","createdTime":1634313693054,"lastEditedTime":1634313693054,"to":"370b5e79-f728-4be6-9734-f00e17c58400","posType":1,"pos":{"x":2413.498026719395,"y":303.9345554371529},"size":{"w":110.44137320548407,"h":"auto"},"color":"background-blue"},{"id":"ec0ed5d0-7921-48ce-9e2d-115996003c97","createdTime":1634313708309,"lastEditedTime":1634313708309,"to":"3dbb6a06-53df-43fb-acb4-7cf44957c0d4","posType":1,"pos":{"x":3662.165762935434,"y":863.370889766152},"size":{"w":111.71357875444028,"h":"auto"},"color":"background-blue"},{"id":"4dc336a3-2dad-4b33-98e0-ab617147606b","createdTime":1634313916561,"lastEditedTime":1634313916561,"to":"a83486f5-b348-4846-bbb0-63d6d4505b15","posType":1,"pos":{"x":2186.1944801522036,"y":-371.0655135080983},"size":{"x":2288.0230226884514,"y":-310.37700480987417,"w":300,"h":"auto"},"color":"background-grey"},{"id":"815cacbb-96e4-4bed-9170-a21115cf46fe","createdTime":1634314333195,"lastEditedTime":1634314333195,"to":"2e6808f2-c49e-42e2-8fee-9d9fc1ad4447","posType":1,"pos":{"x":4710.13318916579,"y":454.2895188484381},"size":{"w":110,"h":"auto"},"color":"background-blue"},{"id":"9125cc27-1b5d-4732-8332-f67be5130ca5","createdTime":1634314392690,"lastEditedTime":1634314392690,"to":"a00dcc85-c504-4561-b344-a88bb1f24348","posType":1,"pos":{"x":2989.1389736287997,"y":792.2864899080414},"size":{"w":295,"h":"auto"}},{"id":"7a3fa5cb-6346-4f03-a07f-63f4b435d62a","createdTime":1634314431412,"lastEditedTime":1634314431412,"to":"4fc501f5-40b9-4257-ae52-09d7803ff499","posType":1,"pos":{"x":3330.4665493123935,"y":842.7692589204926},"size":{"x":3239.4665493123935,"y":971.7692589204926,"w":300,"h":"auto"},"color":"background-purple"},{"id":"b5bc5ce7-e6a5-45bc-81a5-2c0edd15a826","createdTime":1634314617697,"lastEditedTime":1634314617697,"to":"cc7baa42-2423-4dfe-b86b-8456e03dbe32","posType":1,"pos":{"x":5168.349408180022,"y":278.71293481048616},"size":{"w":212.77250340274804,"h":"auto"}},{"id":"883d155b-5180-4e33-b8cd-6600b4bca4d7","createdTime":1634054077768,"lastEditedTime":1634054077768,"to":"5606238a-4d2f-497d-afa2-524cff5e08a2","posType":1,"pos":{"x":4711.150438814441,"y":142.91021329885422},"size":{"w":405,"h":"auto"}},{"id":"32b5dd75-27bf-4e83-8f2b-bdc69663b7af","createdTime":1634316296937,"lastEditedTime":1634316296937,"to":"17b1ebc5-fe6f-42bd-8b5f-d90019e1132f","posType":1,"pos":{"x":4711.150438814441,"y":194.59985620533678},"size":{"w":403.9999772426836,"h":"auto"}}],"relations":[{"type":"block-to-block-in-canvas","fromEntity":"block","fromId":"9edd4fb1-d220-479c-9be3-306e82199e56","toEntity":"block","toId":"14394fd7-74df-4183-b06e-9a292339ad35","id":"e4dd8d06-a743-4ec3-876b-60468cf27c8a"},{"type":"block-to-block-in-canvas","fromEntity":"block","fromId":"f4bfb3fe-5602-492f-83f3-864a79df6b10","toEntity":"block","toId":"f161e4ee-ceb1-45c6-92c7-d7d55d9a8be5","id":"d5a3141b-6f0b-41e6-8d15-3e9502917e30"},{"type":"block-to-block-in-canvas","fromEntity":"block","fromId":"96779e6f-0793-4d8d-8e68-6281f873c3ae","toEntity":"block","toId":"cb2c22cf-738f-41af-8f3e-903754f815d7","id":"549205a1-dfe1-4861-8164-e2d4aef41ed7"},{"type":"block-to-block-in-canvas","fromEntity":"block","fromId":"13eea517-1dad-45f1-90dc-a34137c2a00f","toEntity":"block","toId":"c448c24e-9e1c-4ca3-a582-8803f6d71410","id":"a0585435-bb1b-4dd0-8784-692680561aa5"},{"type":"block-to-block-in-canvas","fromEntity":"block","fromId":"9125cc27-1b5d-4732-8332-f67be5130ca5","toEntity":"block","toId":"7a3fa5cb-6346-4f03-a07f-63f4b435d62a","id":"80b1c3fb-b150-4811-af88-222063ebdb46"},{"type":"block-to-block-in-canvas","fromEntity":"block","fromId":"b5bc5ce7-e6a5-45bc-81a5-2c0edd15a826","toEntity":"block","toId":"265d4489-ebcf-4661-acca-d08eea7f1c4c","id":"4f7cf1ee-cfe4-44dc-af40-83b5bb73a2ae"}],"drawing":[],"camera":{"focus":{"x":-1507.9334397582436,"y":129.77174180997883},"scale":1},"createdTime":1634054429016,"lastEditedTime":1634054464290},{"id":"cd924087-9834-4dfe-8430-623e4b28cf41","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"background-green"}}],"text":"Mention"},{"type":"text","text":" well-known terms."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634311163244,"lastEditedTime":1640458626460},{"id":"cb4952ef-d47a-4c53-a9be-5520ae02da0d","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff/1e8dad96-c9cf-4d6a-bd80-a86bc1b1ff3e","title":null}}],"text":"← Prev"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634057800919,"lastEditedTime":1634307492733},{"id":"58af6c26-4565-42c8-ad95-e4c540522c31","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"blue-purple-gradient"}}],"text":"Tips"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634310987427,"lastEditedTime":1634311000705},{"id":"f30e5148-f6c4-4252-9811-3135506d532f","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"2. Adding new ideas is better than updating old ones. ["},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://thesephist.com/posts/inc/","title":null}}],"text":"source"},{"type":"text","text":"]"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634307144456,"lastEditedTime":1634313390475},{"id":"97b8a099-57f4-4c6b-a76e-70a2a31875b8","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"orange-pink-gradient"}}],"text":"This is your home canvas"},{"type":"text","text":", the one you\'ll see whenever you click on the "},{"type":"text","marks":[{"type":"italic"}],"text":"home button"},{"type":"text","text":"."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634057443985,"lastEditedTime":1634315251904},{"id":"cc7baa42-2423-4dfe-b86b-8456e03dbe32","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Click the "},{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-green"}}],"text":"top-left corner"},{"type":"text","text":" of this block when you\'re done."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634314617696,"lastEditedTime":1640458920107},{"id":"5606238a-4d2f-497d-afa2-524cff5e08a2","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Congratulations, that\'s it for now."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634054077768,"lastEditedTime":1634316351822},{"id":"__tool_mask__","summary":{"type":"toolmask"},"references":[{"id":"43d87451-8b95-4cda-a87b-3c6558cc9fcc","createdTime":1634051238541,"lastEditedTime":1634051238541,"to":"9cd97640-aa7c-4916-9a26-dadb694a2717","posType":2,"pos":{"x":400,"y":10},"size":{"w":450,"h":"auto"}},{"id":"2b41d2d4-6b23-46f0-9597-5279d9fa6f09","createdTime":1634051238541,"lastEditedTime":1634051238542,"to":"fb7e6963-aa2e-4fca-b196-8526196be549","posType":3,"pos":{"x":10,"y":10},"size":{"w":450,"h":"auto"}},{"id":"a45d0136-3e98-4292-bc7c-8fa251e37c85","createdTime":1634051238542,"lastEditedTime":1634051238542,"to":"44c11a76-d353-4522-88b8-48523a0115bd","posType":5,"pos":{"x":10,"y":10},"size":{"w":250,"h":"auto"}},{"id":"9f90a945-565e-43a8-a494-4ca7ebe33c37","createdTime":1634051238542,"lastEditedTime":1634051238542,"to":"f5898f68-e760-43c5-af62-0d97de2eca69","posType":2,"pos":{"x":10,"y":10},"size":{"w":270,"h":"auto"}}],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634051238540,"lastEditedTime":1634051238540},{"id":"4516c95d-d3cc-412a-a683-c68705517ab3","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff/840c09b9-7c72-467c-8b52-3591eb079afa","title":null}}],"text":"Next →"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634055113555,"lastEditedTime":1634309339210},{"id":"9793fb6a-328c-4566-937e-93896d367e1f","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Capture your random inspiration."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634055971483,"lastEditedTime":1634056064306},{"id":"fb7e6963-aa2e-4fca-b196-8526196be549","summary":{"type":"recenttool","data":{}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634051238541,"lastEditedTime":1634051238541},{"id":"dcf6da14-23ad-4480-9f8c-9e1303c6f872","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Take notes while reading articles or watching videos."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056846505,"lastEditedTime":1634056932319},{"id":"a06d4cd0-f42f-4299-9a63-50a10eb921ff","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"After having some raw input, you may want to "},{"type":"text","marks":[{"type":"bold"}],"text":"rearrange"},{"type":"text","text":" them."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634306783328,"lastEditedTime":1640458697490},{"id":"8a15e8a7-aa41-4b42-a39b-f9e4dd3fe167","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"blue-purple-gradient"}}],"text":"Hi, Welcome to Jade"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634051255656,"lastEditedTime":1634052669596},{"id":"2e6808f2-c49e-42e2-8fee-9d9fc1ad4447","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff/423d4c3b-ff39-4c9a-9daa-0193380721ce","title":null}}],"text":"← Prev"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634314333194,"lastEditedTime":1634314350860},{"id":"52bd1d10-4535-4bc7-81f3-8d03c5d7bfb3","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Feel free to delete the existing blocks in this canvas."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634054665832,"lastEditedTime":1634057617353},{"id":"b2aada53-355d-4291-ba05-c6df9df2ed29","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Drag from the top-right corner of a "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":"."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634312393789,"lastEditedTime":1634312414903},{"id":"44c11a76-d353-4522-88b8-48523a0115bd","summary":{"type":"insighttool","data":{}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634051238541,"lastEditedTime":1634051238541},{"id":"9cd97640-aa7c-4916-9a26-dadb694a2717","summary":{"type":"headertool","data":{}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634051238541,"lastEditedTime":1634051238541},{"id":"49debdfe-e9d3-4d5f-8a5b-cd7096d63869","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"1. Captured ideas are better than missed ones. ["},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://thesephist.com/posts/inc/","title":null}}],"text":"source"},{"type":"text","text":"]"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634306342894,"lastEditedTime":1634313374307},{"id":"456ada6c-5a78-46fc-b5b2-ae084820aa3c","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Secret Place"}]}}},"references":[{"id":"dd3e06b3-203e-436f-88aa-b44ffacca6c7","createdTime":1634230494173,"lastEditedTime":1634230494173,"to":"6fa22a56-b865-4a5a-acaa-f24e7315051f","posType":1,"pos":{"x":196,"y":177},"size":{"w":720.8631789193493,"h":"auto"}},{"id":"8f777f38-749a-465e-99eb-bf499f54b551","createdTime":1634061083809,"lastEditedTime":1634061083809,"to":"1905f6a9-aa14-4a7d-b276-279aad106b69","posType":1,"pos":{"x":1008.8631789193491,"y":142},"size":{"x":-406.9334803966036,"y":518.000011072249,"w":300,"h":"auto"}}],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056326237,"lastEditedTime":1634315606992},{"id":"a83486f5-b348-4846-bbb0-63d6d4505b15","summary":{"type":"pmtext","data":{"initialized":true}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634313916561,"lastEditedTime":1634313916574},{"id":"f6f02393-f01c-4fe8-b3c8-d4e6b1fc19ba","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff/840c09b9-7c72-467c-8b52-3591eb079afa","title":null}}],"text":"← Back"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634307465884,"lastEditedTime":1634309380459},{"id":"3d92087a-1ed2-4b90-9fae-5d4dfeec6812","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"https://notes.andymatuschak.org/Evergreen_notes","title":null}}],"text":"Evergreen notes"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056635176,"lastEditedTime":1634314905932},{"id":"fba64cf3-f317-4479-82ee-0186b36ece76","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Make sense of complex topics."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056078904,"lastEditedTime":1634056131715},{"id":"665b9c7e-9ed1-44f3-943a-19f553e366ac","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"https://thesephist.com/posts/inc/","title":null}}],"text":"Incremental note-taking"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056400988,"lastEditedTime":1634314878768},{"id":"a92621be-4538-4cae-9ac2-9ce352ad56a8","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Type "},{"type":"text","marks":[{"type":"bold"}],"text":"@"},{"type":"text","text":" or "},{"type":"text","marks":[{"type":"bold"}],"text":"[["},{"type":"text","text":" in a Text "},{"type":"text","marks":[{"type":"italic"}],"text":"Block."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634312031572,"lastEditedTime":1640458589341},{"id":"c2c34960-734e-40a7-ab66-b7ae49afa01b","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"You can start capturing ideas here."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634057536445,"lastEditedTime":1634057565827},{"id":"805f1c64-e0ad-49b7-a542-56bd1e5a4e6f","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Try selecting some text and set styles as you like!"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634055179884,"lastEditedTime":1640458899350},{"id":"3859dd0a-bd3a-40ea-8d60-a8eab2ccb854","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"If you want to read the tutorial again, hit "},{"type":"text","marks":[{"type":"code"}],"text":"Ctrl/Cmd"},{"type":"text","text":" + "},{"type":"text","marks":[{"type":"code"}],"text":"P"},{"type":"text","text":" and search for \\"Jade Tutorial\\", you\'ll find it under the "},{"type":"text","marks":[{"type":"italic"}],"text":"Canvas"},{"type":"text","text":" tab."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634054907332,"lastEditedTime":1634314694759},{"id":"67764109-fdae-4469-addc-c72d9f30e8e9","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Keep your text short, so your "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":"s can be easily rearranged into different groupings and presentations."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634304264221,"lastEditedTime":1634304855840},{"id":"a00dcc85-c504-4561-b344-a88bb1f24348","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"background-purple"}}],"text":"Embed"},{"type":"text","text":" the same thought in multiple "},{"type":"text","marks":[{"type":"italic"}],"text":"Canvas"},{"type":"text","text":"es."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634314392689,"lastEditedTime":1640458648104},{"id":"b4740c13-f7dc-4881-8a67-64d95ce8a7f0","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"If you\'re brought here accidentally in the middle of the tutorial, click "},{"type":"text","marks":[{"type":"bold"},{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff","title":null}}],"text":"this link"},{"type":"text","text":" to go back."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634054623648,"lastEditedTime":1634303692612},{"id":"1905f6a9-aa14-4a7d-b276-279aad106b69","summary":{"type":"status","data":{"initialized":false}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634061083809,"lastEditedTime":1634061088709},{"id":"3dbb6a06-53df-43fb-acb4-7cf44957c0d4","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff/883d155b-5180-4e33-b8cd-6600b4bca4d7","title":null}}],"text":"Next →"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634313708309,"lastEditedTime":1634313811962},{"id":"8f80c2d8-9b53-4210-a624-42d5e30304c1","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"}],"text":"Some things you can try"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634055967167,"lastEditedTime":1634314828406},{"id":"f8c62c5b-62fb-42c3-a223-e2332757740d","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"By default it\'s a "},{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-red"}}],"text":"r"},{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-orange"}}],"text":"ic"},{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-yellow"}}],"text":"h"},{"type":"text","text":"-"},{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-green"}}],"text":"t"},{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-blue"}}],"text":"e"},{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-purple"}}],"text":"x"},{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-pink"}}],"text":"t"},{"type":"text","text":" "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":", but you can type "},{"type":"text","marks":[{"type":"code"}],"text":"/"},{"type":"text","text":" to replace it with an Image "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":" or an Embed "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":"."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634307984207,"lastEditedTime":1640458473667},{"id":"a9e34922-7b8c-4058-882c-15646bc665d7","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Select the details → drag and drop them into another "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":"."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634312315941,"lastEditedTime":1634312357481},{"id":"41bfd25a-a65b-4a6b-9b8c-09c6c295da94","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Plan your life."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056011800,"lastEditedTime":1634056017077},{"id":"753c8d99-8931-4b96-96a0-e03313811ed9","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff/423d4c3b-ff39-4c9a-9daa-0193380721ce","title":null}}],"text":"Next →"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634305155164,"lastEditedTime":1634312993531},{"id":"2fbb1df6-5c90-483d-aa65-20f4720a4843","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"background-red"}}],"text":"Snap"},{"type":"text","text":" continuous thoughts in sequences."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634310486675,"lastEditedTime":1640458607470},{"id":"77d4dfe9-10ee-407b-a7b3-df1267fd90e7","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"3. Ideas that can’t be recalled are worse than useless ["},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://thesephist.com/posts/inc/","title":null}}],"text":"source"},{"type":"text","text":"]"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634313416527,"lastEditedTime":1634313420325},{"id":"0f7090cd-df41-4328-834f-545edb86d10c","summary":{"type":"image","data":{"imgSrc":"https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F426fe4e9-a656-4a03-ba99-a7ee074ebfde%2FJade_v0.3_Block_Set_Presentation.png?width=1366&table=block&id=0ee92779-54e6-4420-b0e9-d30a20351c71"}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634308140909,"lastEditedTime":1634308720139},{"id":"af67cfe7-e7ef-4b8d-b627-d4000dbc2a94","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"4. Time is essential to how we remember ["},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://thesephist.com/posts/inc/","title":null}}],"text":"source"},{"type":"text","text":"]"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634313432539,"lastEditedTime":1634313434786},{"id":"eb7eb6e9-bf5d-4a0d-9383-2daa41bb3b50","summary":{"type":"image","data":{"imgSrc":"https://raw.githubusercontent.com/dragonman225/dragonman225.github.io/master/p/jade/assets/2272b1ebf4a4f045f2ad.png"}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634053060729,"lastEditedTime":1634053168666},{"id":"c2f2a509-87b5-45ff-81ab-85c6de98dfaf","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"},{"type":"highlight","attrs":{"color":"background-yellow"}}],"text":"Hide"},{"type":"text","text":" details that create noise in current context with nested "},{"type":"text","marks":[{"type":"italic"}],"text":"Canvases"},{"type":"text","text":"."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634310592853,"lastEditedTime":1640458620470},{"id":"e6089d0e-33f3-48e4-a780-566f0ac91573","summary":{"type":"css","data":{"globalCss":":root {\\n  --bg-canvas: hsl(215deg, 5%, 17%);\\n\\n}"}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634227721424,"lastEditedTime":1634230472343},{"id":"2eb9e224-adf7-40fd-abc7-cdd2c79236c4","summary":{"type":"embed","data":{"initialized":true,"url":"https://youtu.be/PUv66718DII?t=257"}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634308867627,"lastEditedTime":1634308946983},{"id":"f5898f68-e760-43c5-af62-0d97de2eca69","summary":{"type":"searchtool","data":{}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634051238541,"lastEditedTime":1634051238541},{"id":"0a3706b8-f67a-49eb-9e57-291e26d62fbb","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"https://thesephist.com/posts/medium/#an-infinite-room","title":null}}],"text":"Designing a better thinking-writing medium"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634307748920,"lastEditedTime":1634313549328},{"id":"7583f5d7-46b1-45fd-8c2e-b3ae2fd17bb6","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"highlight","attrs":{"color":"background-yellow"}}],"text":"Double-click"},{"type":"text","text":" on the "},{"type":"text","marks":[{"type":"italic"}],"text":"Canvas"},{"type":"text","text":", or hit "},{"type":"text","marks":[{"type":"code"}],"text":"Alt"},{"type":"text","text":" + "},{"type":"text","marks":[{"type":"code"}],"text":"N"},{"type":"text","text":" anywhere, to "},{"type":"text","marks":[{"type":"bold"}],"text":"create"},{"type":"text","text":" one."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634304171337,"lastEditedTime":1640458366705},{"id":"bbb78b24-0b03-4cf0-96f6-36d8da124c11","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"jade://v1/concept/b1f78b9d-eebd-4d94-b3e3-ba80b54769ff/87888b5b-5747-43ef-ba05-208952e3c3a6","title":null}}],"text":"Next →"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634309127135,"lastEditedTime":1634309445481},{"id":"3775c06e-0a6e-4021-834f-292657f35001","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"bold"}],"text":"Worth reading"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634056622783,"lastEditedTime":1634314861370},{"id":"6fa22a56-b865-4a5a-acaa-f24e7315051f","summary":{"type":"css","data":{"globalCss":"/**\\n * CSS Block lets you set up custom theme.\\n * In this experimental theme, some colors are borrowed from \\n * Logseq.\\n */\\n:root {\\n  --bg-block: #023644;\\n  --bg-canvas: hsl(192deg, 100%, 11%);\\n  --bg-canvas-semi-transparent: hsl(192deg, 100%, 9%, 0.7);\\n  --content-text: hsl(183deg, 11%, 68%);\\n  --bg-red: hsl(0deg, 100%, 15%);\\n  --bg-orange: hsl(31deg, 100%, 12%);\\n  --bg-yellow: hsl(52deg, 100%, 15%);\\n  --bg-green: hsl(147deg, 90%, 13%);\\n  --bg-blue: hsl(206deg, 100%, 11%);\\n  --bg-purple: hsl(264deg, 100%, 13%);\\n  --bg-pink: hsl(309deg, 100%, 13%);\\n  --bg-brown: hsl(29deg, 69%, 13%);\\n  --bg-grey: hsl(204deg, 10%, 13%);\\n  --shadow-layer:\\n    hsla(183deg, 85%, 25%, 0.1) 0px 0px 2px,\\n    hsla(183deg, 85%, 45%, 0.1) 0px 0px 12px,\\n    hsla(183deg, 85%, 65%, 0.1) 0px 0px 32px;\\n}"}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":-48.03125},"scale":1},"createdTime":1634230494173,"lastEditedTime":1634315542903},{"id":"827f4330-b424-4384-9748-43c148f747e0","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"https://darkblueheaven.com/spatialsoftware/","title":null}}],"text":"Spatial Software"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634313462867,"lastEditedTime":1634313463225},{"id":"17b1ebc5-fe6f-42bd-8b5f-d90019e1132f","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"The last thing is to change the content of below block to set the title of your home canvas."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634316296936,"lastEditedTime":1634316297409},{"id":"addb48b4-ad7f-4eed-b332-6d615227a52c","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"↓ "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":"s for you to play with"}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634313610310,"lastEditedTime":1634313754699},{"id":"72de3b3d-1d8f-432b-8938-fa288be377a3","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","text":"Right-click on the target "},{"type":"text","marks":[{"type":"italic"}],"text":"Block"},{"type":"text","text":" → copy link → and paste it to some text."}]}}},"references":[],"relations":[],"drawing":[],"camera":{"focus":{"x":0,"y":0},"scale":1},"createdTime":1634312065147,"lastEditedTime":1634312351544},{"id":"home","summary":{"type":"pmtext","data":{"initialized":true,"data":{"type":"doc","content":[{"type":"text","marks":[{"type":"underline"},{"type":"highlight","attrs":{"color":"orange-pink-gradient"}}],"text":"Your name"},{"type":"text","text":"\'s Space"}]}}},"references":[{"id":"a61d9ba7-924e-406a-9ffd-a1b3bf54390f","createdTime":1634054623648,"lastEditedTime":1634054623648,"to":"b4740c13-f7dc-4881-8a67-64d95ce8a7f0","posType":1,"pos":{"x":76.92337347062107,"y":162.3808399296709},"size":{"w":264,"h":"auto"},"color":"background-red"},{"id":"3417827c-33b8-49bc-bca3-78e21a49ca5a","createdTime":1634054665833,"lastEditedTime":1634054665833,"to":"52bd1d10-4535-4bc7-81f3-8d03c5d7bfb3","posType":1,"pos":{"x":369.9233124354648,"y":353.139472589583},"size":{"w":375.00006103515625,"h":"auto"}},{"id":"d792679b-e181-48c2-96ca-1f5a992ea49d","createdTime":1634054907332,"lastEditedTime":1634054907332,"to":"3859dd0a-bd3a-40ea-8d60-a8eab2ccb854","posType":1,"pos":{"x":369.9233124354648,"y":433.5187946415849},"size":{"x":359.9233124354648,"y":293.76016198167287,"w":375.00006103515625,"h":"auto"}},{"id":"62e08f1f-e65d-4b02-a110-604d3b813bf7","createdTime":1634057443986,"lastEditedTime":1634057443986,"to":"97b8a099-57f4-4c6b-a76e-70a2a31875b8","posType":1,"pos":{"x":369.9233734706211,"y":162.3808399296709},"size":{"w":375.00006103515625,"h":"auto"}},{"id":"735035a6-eabf-4484-bd1c-47caa1314af6","createdTime":1634057536446,"lastEditedTime":1634057536446,"to":"c2c34960-734e-40a7-ab66-b7ae49afa01b","posType":1,"pos":{"x":369.9233124354648,"y":301.4498020268389},"size":{"w":375.00006103515625,"h":"auto"}},{"id":"9409d2f7-6b26-403d-b745-cf22b605402d","createdTime":1634055967167,"lastEditedTime":1634055967167,"to":"8f80c2d8-9b53-4210-a624-42d5e30304c1","posType":1,"pos":{"x":777.2348863348043,"y":162.3808399296709},"size":{"w":275.5815826404309,"h":"auto"},"color":"background-green"},{"id":"b943277e-2b9b-4e66-b8c6-c56cc28e22f7","createdTime":1634055971483,"lastEditedTime":1634055971483,"to":"9793fb6a-328c-4566-937e-93896d367e1f","posType":1,"pos":{"x":777.2348863348043,"y":214.07046200534074},"size":{"w":331,"h":"auto"},"color":"background-green"},{"id":"c3959518-fbaf-43e7-93d9-faeb1d6b05d3","createdTime":1634056011800,"lastEditedTime":1634056011800,"to":"41bfd25a-a65b-4a6b-9b8c-09c6c295da94","posType":1,"pos":{"x":777.2348863348043,"y":265.76012875338785},"size":{"w":170,"h":"auto"},"color":"background-green"},{"id":"34031d2d-f9b9-4a49-a911-d57613d0f2f4","createdTime":1634056078905,"lastEditedTime":1634056078905,"to":"fba64cf3-f317-4479-82ee-0186b36ece76","posType":1,"pos":{"x":777.2348863348043,"y":317.4497649838566},"size":{"w":309,"h":"auto"},"color":"background-green"},{"id":"521923d4-99b0-42cb-a164-dcc68f26d9b1","createdTime":1634056114969,"lastEditedTime":1634056114969,"to":"ddcd8423-05f3-4cf5-869d-c1a73d182d17","posType":1,"pos":{"x":777.2348863348043,"y":420.8290755917658},"size":{"w":202,"h":"auto"},"color":"background-green"},{"id":"77e5ab57-f520-4381-93f7-5c660974fda2","createdTime":1634056165169,"lastEditedTime":1634056165169,"to":"8dfecddd-7592-49f6-8a2a-7af588710597","posType":1,"pos":{"x":777.2348863348043,"y":369.1394202878117},"size":{"w":250,"h":"auto"},"color":"background-green"},{"id":"f15161a4-e166-43e0-b8ea-f99d5d561446","createdTime":1634056400989,"lastEditedTime":1634056400989,"to":"665b9c7e-9ed1-44f3-943a-19f553e366ac","posType":1,"pos":{"x":777.2348863348043,"y":624.0705257512041},"size":{"x":15.423312435464823,"y":706.5187374211259,"w":334,"h":"auto"},"color":"background-orange"},{"id":"025ef444-41b0-4ca1-9a6c-400e53a5b441","createdTime":1634056622783,"lastEditedTime":1634056622783,"to":"3775c06e-0a6e-4021-834f-292657f35001","posType":1,"pos":{"x":777.2348863348043,"y":572.380870447249},"size":{"w":191.86252833869887,"h":"auto"},"color":"background-orange"},{"id":"bf75e869-7c03-4165-a126-2f11a86a97a1","createdTime":1634056635177,"lastEditedTime":1634056635177,"to":"3d92087a-1ed2-4b90-9fae-5d4dfeec6812","posType":1,"pos":{"x":777.2348863348043,"y":675.7601657963701},"size":{"x":421.4233124354648,"y":730.5187336064287,"w":334.00006103515625,"h":"auto"},"color":"background-orange"},{"id":"ef09be5f-420e-4b09-8d39-d6f40a264d5d","createdTime":1634056846505,"lastEditedTime":1634056846505,"to":"dcf6da14-23ad-4480-9f8c-9e1303c6f872","posType":1,"pos":{"x":777.2348863348043,"y":472.5187041928393},"size":{"w":304,"h":"auto"},"color":"background-green"}],"relations":[],"drawing":[],"camera":{"focus":{"x":28.423342953042948,"y":67.38083992967091},"scale":1},"createdTime":1634051204000,"lastEditedTime":1634053481562}]')}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],c=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(c=!1,a<i&&(i=a));if(c){e.splice(d--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={143:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,c,l]=n,s=0;if(i.some((t=>0!==e[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(l)var d=l(r)}for(t&&t(n);s<i.length;s++)a=i[s],r.o(e,a)&&e[a]&&e[a][0](),e[i[s]]=0;return r.O(d)},n=self.webpackChunkjade=self.webpackChunkjade||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[216],(()=>r(151)));o=r.O(o)})();