<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Chrome, Firefox OS and Opera Status Bar Color -->
  <meta name="theme-color" content="#FFFFFF">
  <meta property="og:title" content="Practical STM32 (1) - The Very Beginning">
    <meta property="og:description" content="I got a STM32F469I-DISCO development board to play with recently, here are some notes about how I began.">
    <meta property="og:type" content="blog">
  <title>Practical STM32 (1) - The Very Beginning</title>
  <link rel="stylesheet" type="text/css" href="css/prism.css">
  <link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
  <link rel="stylesheet" type="text/css" href="css/layout.css">
  <link rel="stylesheet" type="text/css" href="css/notion-color.css">
  <link rel="stylesheet" type="text/css" href="css/theme.css">
  <link rel="stylesheet" type="text/css" href="css/debug.css">
  <link rel="stylesheet" type="text/css" href="css/notablog.css">
  <style>
    :root {
      font-size: 16px;
    }
  </style>
</head>

<body>
  <nav class="nav">
    <a href="index.html">
      <div class="nav-btn"><span>ðŸ¥‡</span> <span>Home</span></div>
    </a>
                                                                            <span class="nav-breadcrumb-slash">&centerdot;</span>
    <a href="library.html">
      <div class="nav-btn"><span>ðŸ“š</span> <span>Library</span></div>
    </a>
                <span class="nav-breadcrumb-slash">&centerdot;</span>
    <a href="about.html">
      <div class="nav-btn"><span>ðŸ™‚</span> <span>About</span></div>
    </a>
          </nav>
  <div class="container">
    <div id="post-body" class="fill-h">
            <div id="8dfd7961-1aac-4ecd-a5ae-2b8e9690df68" class="page-title page-title--nocover">
        <div class="page-icon"><span>ðŸ› </span></div>
        <h1>Practical STM32 (1) - The Very Beginning</h1>
                <div class="block block--text meta">
                    <span class="meta--date">Posted on Wed, Oct 2, 2019</span>
                              <span class="meta--tag tag-blue">stm32</span>
                  </div>
              </div>
      <div id="72e31f93-4b3d-455f-a7ee-e65dee9435c7">
  <div class="block block--text ">
  <span>I got a <strong><a href="https://www.st.com/en/evaluation-tools/32f469idiscovery.html">STM32F469I-DISCO</a></strong> development board to play with recently, here are some notes about how I began.</span>
</div>
</div><div id="c37ce400-a393-433f-bbed-2e2a2245475a">
  <div class="block ">
  <h4><span><strong>How to program the board ?</strong></span></h4>
</div>
</div><div id="8ce29b50-76ca-4018-8667-8b3fe8946ecb">
  <div class="block block--text ">
  <span>Most STM32 development boards have a built-in ST-LINK debugger, which can be connected to PC through USB to helps us program the main MCU (in my case, the STM32F469NI) and debug the code (setting breakpoints and reporting register and memory values). I said <em>main MCU</em> because the ST-LINK debugger itself actually has an independent MCU (normally STM32F0 series) with a special firmware.</span>
</div>
</div><div id="c3be1b6b-994a-4bf1-b3f1-3fa06ba54030">
  <div class="block block--text ">
  <span>For beginners, ST provides <strong><a href="https://www.st.com/en/development-tools/stm32cubeprog.html">STM32CubeProg</a></strong>, which is a GUI program and supports Windows, Linux, and macOS. It can also program <strong>External Flash</strong> that some boards have, quite convenient. There is another tool from ST, the <strong><a href="https://www.st.com/en/development-tools/stsw-link004.html">STM32 ST-LINK Utility</a></strong>, it has similar functionalities but I don&#x27;t recommend using since it&#x27;s older and Windows-only.</span>
</div>
</div><div id="dccfb8bd-09d1-478b-bd18-55c2322a9b20">
  <div class="block ">
  <h4><span><strong>Testing out the board</strong></span></h4>
</div>
</div><div id="dfd5d983-7784-49aa-b579-27a4175c71de">
  <div class="block block--text ">
  <span>ST provides a demo binary for STM32F469I-DISCO in the <strong>Resource &gt; Binary resources</strong> section. <strong><a href="https://www.st.com/resource/en/compiled_demos/32f469idiscovery_demo.zip">Direct Link</a></strong></span>
</div>
</div><div id="b9a8b216-6a21-4fba-b5a2-2453a6095ce3">
  <div class="block block--text ">
  <span>Download, decompress, follow instructions in <code>STemWin&#x2F;readme.txt</code> to flash the demo binary. Note that the instructions are a bit outdated. Whenever it mentions <em>STM32 ST-LINK Utility</em>, use <em>STM32CubeProg</em> instead.</span>
</div>
</div><div >
  <ul>
  <li>
  <div id="d86259ea-6d17-478f-b327-283f424e25ef">
    <div class="block block--bulleted_list_item ">
  <span>To flash the demo binary, connect the board to PC from the <strong>Mini-USB</strong> port (CN1), not the <strong>Micro-USB</strong> port (CN13).</span>
</div>
  </div>
  
</li>
</ul>
</div><div id="0018e053-19e9-438a-8fe9-b7cb3ce84a2c">
  <div class="block ">
  <h4><span><strong>Go deeper</strong></span></h4>
</div>
</div><div id="e785b709-795c-499c-b134-6a3e0d7bc15f">
  <div class="block block--text ">
  <span>The <strong><a href="https://www.st.com/resource/en/user_manual/dm00218846.pdf">UM1932 User Manual</a></strong> introduces <strong><a href="https://www.st.com/en/evaluation-tools/32f469idiscovery.html">STM32F469I-DISCO</a></strong>&#x27;s features, on-board external components, and provides electronic schematics. This is useful when I want to get information about which component connects to which GPIO ports and pins.</span>
</div>
</div><div id="9bae2662-2d77-4116-8352-d3de00490e40">
  <div class="block block--text ">
  <span>The <strong><a href="https://www.st.com/content/ccc/resource/technical/document/reference_manual/29/77/09/5a/b1/60/4e/bd/DM00127514.pdf/files/DM00127514.pdf/jcr:content/translations/en.DM00127514.pdf">RM0386 Reference manual</a></strong> contains register-level details of STM32F469xx &#x2F; STM32F479xx MCU. By reading this, I can get concepts about how the MCU peripherals like SPI, I2C, SAI, USB, DMA work and how to setup the registers to use them. Although there&#x27;re libraries that wrap the details, it is still necessary to have some low-level knowledge to use the libraries correctly. Also it&#x27;s unavoidable to go into low-level when debugging peripherals.</span>
</div>
</div><div id="8228da7a-7407-4c56-8042-1e3c64192b3d">
  <div class="block ">
  <h4><span><strong>Other Resource</strong></span></h4>
</div>
</div><div >
  <ul>
  <li>
  <div id="b83ed1eb-4bf4-4012-bdfd-cb7ae04e664a">
    <div class="block block--bulleted_list_item ">
  <span><strong><a href="https://www.st.com/en/development-tools/stm32cubemx.html">STM32CubeMX</a></strong></span>
</div>
  </div>
  <div >
  <ul>
  <li>
  <div id="81809e7b-f484-44eb-98a4-69ef30be0c1b">
    <div class="block block--bulleted_list_item ">
  <span>A GUI tool to configure peripherals and generate code template. I find it a good way to learn how to setup peripherals correctly by reading the generated code.</span>
</div>
  </div>
  
</li><li>
  <div id="666c22a9-d633-443c-aefd-ad1c53837b46">
    <div class="block block--bulleted_list_item ">
  <span>It can be run on Windows, Linux, and macOS.</span>
</div>
  </div>
  
</li>
</ul>
</div>
</li><li>
  <div id="4e9dd87f-e60d-4892-bf48-98ff3bb5b6c5">
    <div class="block block--bulleted_list_item ">
  <span><strong><a href="https://www.st.com/content/st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-ides/stm32cubeide.html">STM32CubeIDE</a></strong></span>
</div>
  </div>
  <div >
  <ul>
  <li>
  <div id="6974644f-aabe-4d57-af16-71d682feb252">
    <div class="block block--bulleted_list_item ">
  <span>A full IDE integrating STM32CubeMX. I think the code editor is not as good as Atom or VSCode, but the debugger&#x27;s <em>Live Expression</em> feature is great.</span>
</div>
  </div>
  
</li><li>
  <div id="5cf70c08-8246-480c-a972-8407f93ad6f9">
    <div class="block block--bulleted_list_item ">
  <span>This is a good start for beginners. I used it for a couple of days before I dived into the compilation process and migrated to Makefile + VSCode.</span>
</div>
  </div>
  
</li><li>
  <div id="a988b3de-1b22-4e4d-ad37-1b30f8eeb8bc">
    <div class="block block--bulleted_list_item ">
  <span>It can be run on Windows, Linux, and macOS.</span>
</div>
  </div>
  
</li>
</ul>
</div>
</li><li>
  <div id="f0b43128-ea29-4010-8a7c-702a71dc8c28">
    <div class="block block--bulleted_list_item ">
  <span><strong><a href="https://github.com/STMicroelectronics/STM32CubeF4">STM32CubeF4 MCU Firmware Package</a></strong> The official library collection from ST. Used by STM32CubeMX. There&#x27;re CMSIS, HAL drivers, BSP (Board Support Package) drivers, and Middlewares (like USB drivers).</span>
</div>
  </div>
  
</li><li>
  <div id="954f5db1-0834-4d17-b1f3-0b6326bec237">
    <div class="block block--bulleted_list_item ">
  <span><strong><a href="https://github.com/libopencm3/libopencm3">libopencm3</a></strong> Open source ARM Cortex-M microcontroller library.</span>
</div>
  </div>
  
</li><li>
  <div id="2628b11d-a50c-49d0-823b-b9d71468bce6">
    <div class="block block--bulleted_list_item ">
  <span><strong><a href="https://www.touchgfx.com/get-touchgfx/">TouchGFX</a></strong> A GUI framework for STM32.</span>
</div>
  </div>
  
</li><li>
  <div id="fe7a300d-4e79-45d3-b3b2-fb637326a24d">
    <div class="block block--bulleted_list_item ">
  <span><strong><a href="https://www.mbed.com/en/platform/mbed-os/">Mbed OS</a></strong></span>
</div>
  </div>
  <div >
  <ul>
  <li>
  <div id="d68d6043-4fe9-4a20-a771-c2ed9928ec13">
    <div class="block block--bulleted_list_item ">
  <span>It seems to be designed for IOT applications. For me, I think it lacks of low-level control and has compatibility problems with libraries not designed for Mbed such as BSP or HAL.</span>
</div>
  </div>
  
</li><li>
  <div id="5b09dd4b-bcaf-42e9-8b6c-3a53f119cdc8">
    <div class="block block--bulleted_list_item ">
  <span>Mbed OS 2 is different from Mbed OS 5, they have different API and not compatible.</span>
</div>
  </div>
  
</li><li>
  <div id="a87806a1-5c1a-47ff-a737-e05950852025">
    <div class="block block--bulleted_list_item ">
  <span><strong><a href="https://os.mbed.com/handbook/Homepage">Mbed OS 2 Handbook</a></strong></span>
</div>
  </div>
  
</li>
</ul>
</div>
</li>
</ul>
</div>    </div>
    <footer>
      <div class="site-footer">
        <div>&copy; Alexander's Note 2019</div>
        <div>&centerdot;</div>
        <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
            rel="noopener noreferrer">Notablog</a>.
        </div>
      </div>
    </footer>
  </div>
</body>

</html>
